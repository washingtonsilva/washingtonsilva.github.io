<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Prof.&nbsp;Dr.&nbsp;Washington S. da Silva">
<meta name="description" content="Um tutorial básico sobre a linguagem R para Ciência de Dados.">

<title>Introdução à Linguagem R – Washington S. da Silva</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-236d90495073fb2ac8939117e3e83141.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-1e17e0b196cced0e86251a2c9966b581.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-X7TV071MD7"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-X7TV071MD7', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"headline",
  "consent_type":"express",
  "palette":"dark",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"pt"
  });
});
</script> 
  
<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Fira+Sans|Merriweather" rel="stylesheet">
<script src="https://kit.fontawesome.com/0fba9333d8.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Washington S. da Silva</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Procurar"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Alternar de navegação" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../publications/index.html"> 
<span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../tutorials/index.html"> 
<span class="menu-text">Tutorials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../teaching/index.html"> 
<span class="menu-text">Teaching</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Nesta página</h2>
   
  <ul class="collapse">
  <li><a href="#sec-introducao" id="toc-sec-introducao" class="nav-link active" data-scroll-target="#sec-introducao"><span class="header-section-number">1</span> Introdução</a></li>
  <li><a href="#objetos-e-variáveis-em-r" id="toc-objetos-e-variáveis-em-r" class="nav-link" data-scroll-target="#objetos-e-variáveis-em-r"><span class="header-section-number">2</span> Objetos e Variáveis em R</a></li>
  <li><a href="#variáveis-e-atribuição-de-valores" id="toc-variáveis-e-atribuição-de-valores" class="nav-link" data-scroll-target="#variáveis-e-atribuição-de-valores"><span class="header-section-number">3</span> Variáveis e Atribuição de Valores</a></li>
  <li><a href="#tipos-atômicos-de-dados" id="toc-tipos-atômicos-de-dados" class="nav-link" data-scroll-target="#tipos-atômicos-de-dados"><span class="header-section-number">4</span> Tipos Atômicos de Dados</a>
  <ul class="collapse">
  <li><a href="#tipos-double-e-integer" id="toc-tipos-double-e-integer" class="nav-link" data-scroll-target="#tipos-double-e-integer"><span class="header-section-number">4.1</span> Tipos <code>double</code> e <code>integer</code></a></li>
  <li><a href="#tipo-character" id="toc-tipo-character" class="nav-link" data-scroll-target="#tipo-character"><span class="header-section-number">4.2</span> Tipo <code>character</code></a></li>
  <li><a href="#tipo-logical" id="toc-tipo-logical" class="nav-link" data-scroll-target="#tipo-logical"><span class="header-section-number">4.3</span> Tipo <code>logical</code></a></li>
  <li><a href="#tipo-especial-na" id="toc-tipo-especial-na" class="nav-link" data-scroll-target="#tipo-especial-na"><span class="header-section-number">4.4</span> Tipo Especial <code>NA</code></a></li>
  <li><a href="#tipo-especial-nan" id="toc-tipo-especial-nan" class="nav-link" data-scroll-target="#tipo-especial-nan"><span class="header-section-number">4.5</span> Tipo Especial <code>NaN</code></a></li>
  <li><a href="#tipo-especial-inf" id="toc-tipo-especial-inf" class="nav-link" data-scroll-target="#tipo-especial-inf"><span class="header-section-number">4.6</span> Tipo Especial <code>inf</code></a></li>
  </ul></li>
  <li><a href="#sec-vetores" id="toc-sec-vetores" class="nav-link" data-scroll-target="#sec-vetores"><span class="header-section-number">5</span> Vetores em R</a>
  <ul class="collapse">
  <li><a href="#criando-vetores" id="toc-criando-vetores" class="nav-link" data-scroll-target="#criando-vetores"><span class="header-section-number">5.1</span> Criando vetores</a></li>
  <li><a href="#indexação-selecionando-elementos" id="toc-indexação-selecionando-elementos" class="nav-link" data-scroll-target="#indexação-selecionando-elementos"><span class="header-section-number">5.2</span> Indexação: selecionando elementos</a></li>
  <li><a href="#operações-vetorizadas-e-reciclagem" id="toc-operações-vetorizadas-e-reciclagem" class="nav-link" data-scroll-target="#operações-vetorizadas-e-reciclagem"><span class="header-section-number">5.3</span> Operações vetorizadas e reciclagem</a></li>
  <li><a href="#testando-tipos-e-classes" id="toc-testando-tipos-e-classes" class="nav-link" data-scroll-target="#testando-tipos-e-classes"><span class="header-section-number">5.4</span> Testando tipos e classes</a></li>
  <li><a href="#comprimento-dos-vetores" id="toc-comprimento-dos-vetores" class="nav-link" data-scroll-target="#comprimento-dos-vetores"><span class="header-section-number">5.5</span> Comprimento dos vetores</a></li>
  <li><a href="#vetores-de-texto-character-e-lógicos" id="toc-vetores-de-texto-character-e-lógicos" class="nav-link" data-scroll-target="#vetores-de-texto-character-e-lógicos"><span class="header-section-number">5.6</span> Vetores de texto (character) e lógicos</a></li>
  <li><a href="#boas-práticas-com-vetores" id="toc-boas-práticas-com-vetores" class="nav-link" data-scroll-target="#boas-práticas-com-vetores"><span class="header-section-number">5.7</span> Boas práticas com vetores</a></li>
  </ul></li>
  <li><a href="#sec-estruturas-dados" id="toc-sec-estruturas-dados" class="nav-link" data-scroll-target="#sec-estruturas-dados"><span class="header-section-number">6</span> Estruturas de Dados em R</a>
  <ul class="collapse">
  <li><a href="#sec-matrizes" id="toc-sec-matrizes" class="nav-link" data-scroll-target="#sec-matrizes"><span class="header-section-number">6.1</span> Matrizes</a></li>
  <li><a href="#sec-listas" id="toc-sec-listas" class="nav-link" data-scroll-target="#sec-listas"><span class="header-section-number">6.2</span> Listas</a></li>
  <li><a href="#sec-dataframes" id="toc-sec-dataframes" class="nav-link" data-scroll-target="#sec-dataframes"><span class="header-section-number">6.3</span> Data Frames</a></li>
  <li><a href="#sec-tibbles" id="toc-sec-tibbles" class="nav-link" data-scroll-target="#sec-tibbles"><span class="header-section-number">6.4</span> Tibbles</a></li>
  <li><a href="#sec-exemplo-real" id="toc-sec-exemplo-real" class="nav-link" data-scroll-target="#sec-exemplo-real"><span class="header-section-number">6.5</span> Exemplo Prático com Dados Financeiros Reais</a></li>
  </ul></li>
  <li><a href="#metapacote-tidyverse" id="toc-metapacote-tidyverse" class="nav-link" data-scroll-target="#metapacote-tidyverse"><span class="header-section-number">7</span> Metapacote tidyverse</a>
  <ul class="collapse">
  <li><a href="#dados-organizados" id="toc-dados-organizados" class="nav-link" data-scroll-target="#dados-organizados"><span class="header-section-number">7.1</span> Dados Organizados</a></li>
  <li><a href="#planilhas-eletrônicas" id="toc-planilhas-eletrônicas" class="nav-link" data-scroll-target="#planilhas-eletrônicas"><span class="header-section-number">7.2</span> Planilhas Eletrônicas</a></li>
  </ul></li>
  <li><a href="#introdução-ao-pacote-tidyr" id="toc-introdução-ao-pacote-tidyr" class="nav-link" data-scroll-target="#introdução-ao-pacote-tidyr"><span class="header-section-number">8</span> Introdução ao Pacote tidyr</a></li>
  <li><a href="#introdução-ao-pacote-dplyr" id="toc-introdução-ao-pacote-dplyr" class="nav-link" data-scroll-target="#introdução-ao-pacote-dplyr"><span class="header-section-number">9</span> Introdução ao Pacote dplyr</a>
  <ul class="collapse">
  <li><a href="#função-select" id="toc-função-select" class="nav-link" data-scroll-target="#função-select"><span class="header-section-number">9.1</span> Função select()</a></li>
  <li><a href="#função-filter" id="toc-função-filter" class="nav-link" data-scroll-target="#função-filter"><span class="header-section-number">9.2</span> Função filter()</a></li>
  <li><a href="#função-mutate" id="toc-função-mutate" class="nav-link" data-scroll-target="#função-mutate"><span class="header-section-number">9.3</span> Função mutate()</a></li>
  <li><a href="#funções-group_by-summarize" id="toc-funções-group_by-summarize" class="nav-link" data-scroll-target="#funções-group_by-summarize"><span class="header-section-number">9.4</span> Funções group_by() + summarize()</a></li>
  <li><a href="#função-arrange" id="toc-função-arrange" class="nav-link" data-scroll-target="#função-arrange"><span class="header-section-number">9.5</span> Função arrange()</a></li>
  <li><a href="#resumo-das-funções-dplyr" id="toc-resumo-das-funções-dplyr" class="nav-link" data-scroll-target="#resumo-das-funções-dplyr"><span class="header-section-number">9.6</span> Resumo das Funções dplyr</a></li>
  <li><a href="#pacote-dplyr-bibliografia-recomendada" id="toc-pacote-dplyr-bibliografia-recomendada" class="nav-link" data-scroll-target="#pacote-dplyr-bibliografia-recomendada"><span class="header-section-number">9.7</span> Pacote dplyr: Bibliografia Recomendada</a></li>
  </ul></li>
  <li><a href="#dplyr-tipos-básicos-de-joins" id="toc-dplyr-tipos-básicos-de-joins" class="nav-link" data-scroll-target="#dplyr-tipos-básicos-de-joins"><span class="header-section-number">10</span> dplyr: Tipos Básicos de <em>joins</em></a>
  <ul class="collapse">
  <li><a href="#desafios-específicos-de-dados-em-finanças" id="toc-desafios-específicos-de-dados-em-finanças" class="nav-link" data-scroll-target="#desafios-específicos-de-dados-em-finanças"><span class="header-section-number">10.1</span> Desafios Específicos de Dados em Finanças</a></li>
  <li><a href="#aplicações-práticas-de-joins-na-pesquisa-em-finanças" id="toc-aplicações-práticas-de-joins-na-pesquisa-em-finanças" class="nav-link" data-scroll-target="#aplicações-práticas-de-joins-na-pesquisa-em-finanças"><span class="header-section-number">10.2</span> Aplicações Práticas de Joins na Pesquisa em Finanças</a></li>
  <li><a href="#crisp-dm-e-joins" id="toc-crisp-dm-e-joins" class="nav-link" data-scroll-target="#crisp-dm-e-joins"><span class="header-section-number">10.3</span> CRISP-DM e Joins</a></li>
  <li><a href="#joins-no-dplyr" id="toc-joins-no-dplyr" class="nav-link" data-scroll-target="#joins-no-dplyr"><span class="header-section-number">10.4</span> Joins no dplyr</a></li>
  <li><a href="#criando-tabelas-de-exemplo" id="toc-criando-tabelas-de-exemplo" class="nav-link" data-scroll-target="#criando-tabelas-de-exemplo"><span class="header-section-number">10.5</span> Criando Tabelas de Exemplo</a></li>
  <li><a href="#chaves-em-joins" id="toc-chaves-em-joins" class="nav-link" data-scroll-target="#chaves-em-joins"><span class="header-section-number">10.6</span> Chaves em Joins</a></li>
  <li><a href="#tipos-de-chaves-em-bancos-de-dados-relacionais" id="toc-tipos-de-chaves-em-bancos-de-dados-relacionais" class="nav-link" data-scroll-target="#tipos-de-chaves-em-bancos-de-dados-relacionais"><span class="header-section-number">10.7</span> Tipos de Chaves em Bancos de Dados Relacionais</a></li>
  <li><a href="#diagrama-de-relações-com-chaves" id="toc-diagrama-de-relações-com-chaves" class="nav-link" data-scroll-target="#diagrama-de-relações-com-chaves"><span class="header-section-number">10.8</span> Diagrama de Relações com Chaves</a></li>
  <li><a href="#exemplos-comuns-de-chaves" id="toc-exemplos-comuns-de-chaves" class="nav-link" data-scroll-target="#exemplos-comuns-de-chaves"><span class="header-section-number">10.9</span> Exemplos Comuns de Chaves</a></li>
  <li><a href="#desafios-com-chaves-em-joins" id="toc-desafios-com-chaves-em-joins" class="nav-link" data-scroll-target="#desafios-com-chaves-em-joins"><span class="header-section-number">10.10</span> Desafios com Chaves em Joins</a></li>
  <li><a href="#sintaxe-básica-de-joins-no-dplyr" id="toc-sintaxe-básica-de-joins-no-dplyr" class="nav-link" data-scroll-target="#sintaxe-básica-de-joins-no-dplyr"><span class="header-section-number">10.11</span> Sintaxe Básica de Joins no dplyr</a></li>
  <li><a href="#visão-geral-dos-joins" id="toc-visão-geral-dos-joins" class="nav-link" data-scroll-target="#visão-geral-dos-joins"><span class="header-section-number">10.12</span> Visão Geral dos Joins</a></li>
  <li><a href="#left-join" id="toc-left-join" class="nav-link" data-scroll-target="#left-join"><span class="header-section-number">10.13</span> Left Join</a></li>
  <li><a href="#exemplo-left-join-em-pesquisa" id="toc-exemplo-left-join-em-pesquisa" class="nav-link" data-scroll-target="#exemplo-left-join-em-pesquisa"><span class="header-section-number">10.14</span> Exemplo: Left Join em Pesquisa</a></li>
  <li><a href="#inner-join" id="toc-inner-join" class="nav-link" data-scroll-target="#inner-join"><span class="header-section-number">10.15</span> Inner Join</a></li>
  <li><a href="#exemplo-inner-join-em-pesquisa" id="toc-exemplo-inner-join-em-pesquisa" class="nav-link" data-scroll-target="#exemplo-inner-join-em-pesquisa"><span class="header-section-number">10.16</span> Exemplo: Inner Join em Pesquisa</a></li>
  <li><a href="#full-join" id="toc-full-join" class="nav-link" data-scroll-target="#full-join"><span class="header-section-number">10.17</span> Full Join</a></li>
  <li><a href="#exemplo-full-join" id="toc-exemplo-full-join" class="nav-link" data-scroll-target="#exemplo-full-join"><span class="header-section-number">10.18</span> Exemplo: Full Join</a></li>
  <li><a href="#right-join" id="toc-right-join" class="nav-link" data-scroll-target="#right-join"><span class="header-section-number">10.19</span> Right Join</a></li>
  <li><a href="#exemplo-right-join" id="toc-exemplo-right-join" class="nav-link" data-scroll-target="#exemplo-right-join"><span class="header-section-number">10.20</span> Exemplo: Right Join</a></li>
  <li><a href="#exemplo-combinando-múltiplas-tabelas" id="toc-exemplo-combinando-múltiplas-tabelas" class="nav-link" data-scroll-target="#exemplo-combinando-múltiplas-tabelas"><span class="header-section-number">10.21</span> Exemplo: Combinando Múltiplas Tabelas</a></li>
  <li><a href="#exemplo-análise-de-demonstrações-financeiras" id="toc-exemplo-análise-de-demonstrações-financeiras" class="nav-link" data-scroll-target="#exemplo-análise-de-demonstrações-financeiras"><span class="header-section-number">10.22</span> Exemplo: Análise de Demonstrações Financeiras</a></li>
  <li><a href="#exemplo-análise-de-retornos-anormais" id="toc-exemplo-análise-de-retornos-anormais" class="nav-link" data-scroll-target="#exemplo-análise-de-retornos-anormais"><span class="header-section-number">10.23</span> Exemplo: Análise de Retornos Anormais</a></li>
  <li><a href="#fontes-comuns-de-dados-em-pesquisa-financeira" id="toc-fontes-comuns-de-dados-em-pesquisa-financeira" class="nav-link" data-scroll-target="#fontes-comuns-de-dados-em-pesquisa-financeira"><span class="header-section-number">10.24</span> Fontes Comuns de Dados em Pesquisa Financeira</a></li>
  <li><a href="#dicas-para-uso-eficiente-de-joins" id="toc-dicas-para-uso-eficiente-de-joins" class="nav-link" data-scroll-target="#dicas-para-uso-eficiente-de-joins"><span class="header-section-number">10.25</span> Dicas para Uso Eficiente de Joins</a></li>
  <li><a href="#o-desafio-dos-sistemas-reais" id="toc-o-desafio-dos-sistemas-reais" class="nav-link" data-scroll-target="#o-desafio-dos-sistemas-reais"><span class="header-section-number">10.26</span> O Desafio dos Sistemas Reais</a></li>
  <li><a href="#a-solução" id="toc-a-solução" class="nav-link" data-scroll-target="#a-solução"><span class="header-section-number">10.27</span> A Solução</a></li>
  <li><a href="#resumo-joins" id="toc-resumo-joins" class="nav-link" data-scroll-target="#resumo-joins"><span class="header-section-number">10.28</span> Resumo: Joins</a></li>
  <li><a href="#sintaxe-comparativa" id="toc-sintaxe-comparativa" class="nav-link" data-scroll-target="#sintaxe-comparativa"><span class="header-section-number">10.29</span> Sintaxe Comparativa</a></li>
  <li><a href="#onde-aplicar-joins-em-pesquisa-financeira" id="toc-onde-aplicar-joins-em-pesquisa-financeira" class="nav-link" data-scroll-target="#onde-aplicar-joins-em-pesquisa-financeira"><span class="header-section-number">10.30</span> Onde Aplicar Joins em Pesquisa Financeira</a></li>
  <li><a href="#joins-bibliografia-recomendada" id="toc-joins-bibliografia-recomendada" class="nav-link" data-scroll-target="#joins-bibliografia-recomendada"><span class="header-section-number">10.31</span> Joins: Bibliografia Recomendada</a></li>
  </ul></li>
  <li><a href="#dados-organizados-potencializando-análises-de-dados" id="toc-dados-organizados-potencializando-análises-de-dados" class="nav-link" data-scroll-target="#dados-organizados-potencializando-análises-de-dados"><span class="header-section-number">11</span> Dados Organizados: Potencializando Análises de Dados</a>
  <ul class="collapse">
  <li><a href="#aplicações" id="toc-aplicações" class="nav-link" data-scroll-target="#aplicações"><span class="header-section-number">11.1</span> Aplicações</a></li>
  <li><a href="#um-pipeline-completo-com-dplyr" id="toc-um-pipeline-completo-com-dplyr" class="nav-link" data-scroll-target="#um-pipeline-completo-com-dplyr"><span class="header-section-number">11.2</span> Um Pipeline Completo com dplyr</a></li>
  <li><a href="#tabelas-profissionais" id="toc-tabelas-profissionais" class="nav-link" data-scroll-target="#tabelas-profissionais"><span class="header-section-number">11.3</span> Tabelas Profissionais</a></li>
  <li><a href="#o-pacote-kableextra" id="toc-o-pacote-kableextra" class="nav-link" data-scroll-target="#o-pacote-kableextra"><span class="header-section-number">11.4</span> O Pacote kableExtra</a></li>
  <li><a href="#sintaxe-básica-do-kableextra" id="toc-sintaxe-básica-do-kableextra" class="nav-link" data-scroll-target="#sintaxe-básica-do-kableextra"><span class="header-section-number">11.5</span> Sintaxe Básica do kableExtra</a></li>
  <li><a href="#resumo" id="toc-resumo" class="nav-link" data-scroll-target="#resumo"><span class="header-section-number">11.6</span> Resumo</a></li>
  <li><a href="#tabela-com-o-pacote-kableextra" id="toc-tabela-com-o-pacote-kableextra" class="nav-link" data-scroll-target="#tabela-com-o-pacote-kableextra"><span class="header-section-number">11.7</span> Tabela com o Pacote KableExtra</a></li>
  <li><a href="#exemplo-típico-em-administração-wide" id="toc-exemplo-típico-em-administração-wide" class="nav-link" data-scroll-target="#exemplo-típico-em-administração-wide"><span class="header-section-number">11.8</span> Exemplo Típico em Administração (Wide)</a></li>
  <li><a href="#transformando-para-analise-de-dados" id="toc-transformando-para-analise-de-dados" class="nav-link" data-scroll-target="#transformando-para-analise-de-dados"><span class="header-section-number">11.9</span> Transformando para Analise de Dados</a></li>
  <li><a href="#análise-1---nível-básico" id="toc-análise-1---nível-básico" class="nav-link" data-scroll-target="#análise-1---nível-básico"><span class="header-section-number">11.10</span> Análise 1 - Nível Básico</a></li>
  <li><a href="#análise-2---nível-básico" id="toc-análise-2---nível-básico" class="nav-link" data-scroll-target="#análise-2---nível-básico"><span class="header-section-number">11.11</span> Análise 2 - Nível Básico</a></li>
  <li><a href="#análise-3---nível-básico" id="toc-análise-3---nível-básico" class="nav-link" data-scroll-target="#análise-3---nível-básico"><span class="header-section-number">11.12</span> Análise 3 - Nível Básico</a></li>
  <li><a href="#análise-4---nível-intermediário" id="toc-análise-4---nível-intermediário" class="nav-link" data-scroll-target="#análise-4---nível-intermediário"><span class="header-section-number">11.13</span> Análise 4 - Nível Intermediário</a></li>
  <li><a href="#análise-4---tabela-para-apresentação" id="toc-análise-4---tabela-para-apresentação" class="nav-link" data-scroll-target="#análise-4---tabela-para-apresentação"><span class="header-section-number">11.14</span> Análise 4 - Tabela para Apresentação</a></li>
  <li><a href="#análise-5---nível-intermediário" id="toc-análise-5---nível-intermediário" class="nav-link" data-scroll-target="#análise-5---nível-intermediário"><span class="header-section-number">11.15</span> Análise 5 - Nível Intermediário</a></li>
  <li><a href="#análise-6---nível-intermediário" id="toc-análise-6---nível-intermediário" class="nav-link" data-scroll-target="#análise-6---nível-intermediário"><span class="header-section-number">11.16</span> Análise 6 - Nível Intermediário</a></li>
  <li><a href="#análise-7---nível-avançado" id="toc-análise-7---nível-avançado" class="nav-link" data-scroll-target="#análise-7---nível-avançado"><span class="header-section-number">11.17</span> Análise 7 - Nível Avançado</a></li>
  <li><a href="#análise-7---tabela-para-apresentação" id="toc-análise-7---tabela-para-apresentação" class="nav-link" data-scroll-target="#análise-7---tabela-para-apresentação"><span class="header-section-number">11.18</span> Análise 7 - Tabela para Apresentação</a></li>
  <li><a href="#dados-em-seu-ambiente-de-trabalho" id="toc-dados-em-seu-ambiente-de-trabalho" class="nav-link" data-scroll-target="#dados-em-seu-ambiente-de-trabalho"><span class="header-section-number">11.19</span> Dados em Seu Ambiente de Trabalho</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Introdução à Linguagem R</h1>
  <div class="quarto-categories">
    <div class="quarto-category">R</div>
    <div class="quarto-category">Reprodutibilidade</div>
  </div>
  </div>

<div>
  <div class="description">
    <p>Um tutorial básico sobre a linguagem R para Ciência de Dados.</p>
  </div>
</div>

<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Autor</div>
  <div class="quarto-title-meta-heading">Afiliação</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Prof.&nbsp;Dr.&nbsp;Washington S. da Silva </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="https://www.formiga.ifmg.edu.br/mestrado">
            IFMG - Campus Formiga - Mestrado Profissional em Administração.
            </a>
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Data de Publicação</div>
    <div class="quarto-title-meta-contents">
      <p class="date">7 julho 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/Rlogo.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:30.0%"></p>
</figure>
</div>
<section id="sec-introducao" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introdução</h1>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Objetivos
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Este tutorial é destinado aos estudantes do bacharelado em Administração e aos mestrandos do Mestrado Profissional em Administração do IFMG - Campus Formiga.</p></li>
<li><p>Também é útil para administradores, economistas, contabilistas, auditores e outros profissionais que desejam utilizar ferramentas modernas para criar relatórios e outros produtos de forma reproduzível e auditável.</p></li>
<li><p>O objetivo principal é proporcionar uma compreensão sólida da linguagem R, desde seus fundamentos até aplicações em análise de dados, permitindo que alunos de graduação, mestrandos e demais profissionais e pesquisadores interessados desenvolvam habilidades para criar análises reproduzíveis e auditáveis. Embora o foco inicial seja a Ciência de Dados aplicada à Administração, o conteúdo foi elaborado para ser útil em diversas áreas do conhecimento.</p></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Instalando a Linguagem R 4.4.1
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>Acesse <a href="https://cloud.r-project.org/" target="_blank">https://cloud.r-project.org/</a></p></li>
<li><p>Selecione o sistema operacional, clicando em <strong>Download R for Windows</strong> por exemplo.</p></li>
<li><p>Na página seguinte clique em <strong>base</strong>.</p></li>
<li><p>Clique em <strong>Download R-4.4.3 for Windows</strong>.</p></li>
<li><p>Feito o download basta ir clicando em próximo/next até a instalação ser concluída.</p></li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
RStudio: Ambiente de Desenvolvimento para R
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Para uma experiência de programação mais produtiva com R, recomenda-se fortemente o uso do RStudio, um IDE (Ambiente de Desenvolvimento Integrado) especialmente projetado para trabalhar com a linguagem R.</p></li>
<li><p>O RStudio oferece diversas funcionalidades que facilitam o aprendizado e uso da linguagem, como editor de código com destaque de sintaxe, projetos Rstudio, integração com Git e suporte nativo ao sistema Quarto.</p></li>
<li><p>Para instalar e configurar o RStudio, consulte nosso <a href="https://washingtonsilva.github.io/tutorials/rstudio/" target="_blank">Tutorial sobre RStudio</a>, onde são apresentadas instruções detalhadas para iniciantes.</p></li>
<li><p>Embora seja perfeitamente possível utilizar R com outros IDEs, a combinação (R + RStudio) facilita e potencializa significativamente a experiência de aprendizado e desenvolvimento.</p></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
O que é R?
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>R é um ambiente ou sistema para computação estatística e gráfico.</p></li>
<li><p>Este sistema é composto por duas partes: a própria <strong>linguagem</strong> R (que é o que a maioria das pessoas querem dizer quando falam sobre R) e um <strong>ambiente de tempo de execução</strong> (<em>runtime environment</em>).</p></li>
<li><p>R é uma linguagem <strong>interpretada</strong>, o que significa que os usuários acessam suas funções por meio de um interpretador de linha de comando.</p></li>
<li><p>Ao contrário de linguagens como Python e Java, R não é uma linguagem de programação de uso geral.</p></li>
<li><p>Em vez disso, R é considerada uma linguagem de domínio específica (DSL), o que significa que suas funções e uso foram projetados para uma área específica de uso ou domínio.</p></li>
<li><p>No caso de R, o domínio e a computação estatística. Por extensão, R é comumente usada para todos os tipos de tarefas de ciência de dados.</p></li>
<li><p>A linguagem R está equipada com um grande conjunto de funções internas para a manipulação, análise e visualização de dados.</p></li>
<li><p>Além das funções internas da linguagem, existem inúmeros pacotes (como os módulos de Python) que estendem as capacidades da linguagem.</p></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Origens da Linguagem R
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>A linguagem S</strong></p>
<ul>
<li><p>A linguagem S foi desenvolvida em meados da década de 1970 por John Chambers no lendário Bell Labs. O objetivo era oferecer uma abordagem interativa para a computação estatística, que fosse fácil de usar e tornasse as tarefas de análise de dados mais fáceis e rápidas.</p></li>
<li><p>Em uma entrevista de 2013, Chambers observou que a equipe do Bell Labs queria que as pessoas começassem em um ambiente interativo, onde não pensassem em si como programadores. Então, à medida que suas necessidades se tornaram mais claras e sua sofisticação aumentasse, eles dseriam capazes de se orientar gradualmente para a programação com a linguagem S.</p></li>
<li><p>A filosofia geral de S era muito semelhante à de R: oferecer um ambiente de software que facilitasse a programação computacional e a análise estatística, que qualquer um possa aprender a usar.</p></li>
<li><p>Como R, S também pode ser usada para escrever programas mais longos centrados em tarefas estatísticas. Ao contrário de R, no entanto, S e sua iteração posterior, <em>S-Plus</em>, eram produtos licenciados, o que significa que tinham que ser comprados de uma empresa.</p></li>
<li><p>Portanto, é importante notar que a linguagem R é um dialeto da linguagem S.</p></li>
</ul>
<p><strong>Sintáxe e Semântica</strong></p>
<ul>
<li><p>Os linguistas usam os termos sintaxe e semântica para descrever elementos de linguagens naturais, e os cientistas da computação também adotaram esses termos para linguagens de programação.</p></li>
<li><p>Na programação de computadores, a sintaxe se refere às regras que ditam a ‘ortografia’ e a ‘gramática’ de uma linguagem, enquanto a semântica se refere a como os dados ou comandos de uma linguagem são apresentados.</p></li>
<li><p>A sintaxe de R era muito semelhante à de S em seus primeiros anos. Isso tornou mais fácil para as pessoas que usavam <em>S-Plus</em> mudar para R, o que desempenhou um papel fundamental na eventual popularidade de R na academia.</p></li>
<li><p>A semântica de R, no entanto, está mais próxima da linguagem Scheme, uma linguagem de programação funcional.</p></li>
</ul>
<p><strong>R é uma linguagem de baixo ou alto nível?</strong></p>
<ul>
<li><p>R é considerada uma linguagem de programação de alto nível. Essa classificação é baseada em seu nível de abstração da linguagem de máquina.</p></li>
<li><p>Ao contrário das linguagens de baixo nível que exigem conhecimento aprofundado da memória e dos processos do computador, linguagens de alto nível como R são projetadas para serem facilmente compreendidas e escritas por humanos, tornando-as mais acessíveis para estatísticos, analistas de dados e pesquisadores.</p></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Um Breve Histórico da Linguagem R
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><strong>1991</strong>: Os professores e estatísticos Ross Ihaka e Robert Gentleman começam a trabalhar em um novo dialeto da linguagem S como um projeto de pesquisa para o Departamento de Estatística da Universidade de Auckland na Nova Zelândia.</p></li>
<li><p><strong>1993</strong>: O primeiro anúncio de R chega ao público através do arquivo de dados StatLib e da lista de discussão s-news.</p></li>
<li><p><strong>1995</strong>: O estatístico Martin Mächler convence os criadodes de R a lançar a linguagem sob uma licença pública geral GNU, tornando R gratuita e de código aberto. Ihaka e Gentleman lançam seu artigo seminal apresentando R ao mundo.</p></li>
<li><p><strong>1997</strong>: O R Core Team foi formado, este grupo é o único com acesso ao código-fonte R. No mesmo ano, foi criada a <em>Comprehensive R Archive Network</em> (CRAN). Este repositório de pacotes R ajuda os profissionais em inúmeras tarefas.</p></li>
<li><p><strong>2000</strong>: R versão 1.0.0 foi lançada ao público.</p></li>
<li><p><strong>Março de 2024</strong>: Estamos atualmente na versão R 4.3.3</p></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Por que usar a linguagem R?
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><strong>Gratuito e de código aberto</strong>: Diferentemente de softwares estatísticos proprietários, R é completamente gratuito e seu código-fonte é aberto, permitindo total transparência e personalização.</p></li>
<li><p><strong>Especialmente projetado para análise estatística e ciência de dados</strong>: Enquanto outras linguagens podem ser adaptadas para estas tarefas, R foi concebida especificamente para computação estatística e visualização de dados.</p></li>
<li><p><strong>Ampla comunidade acadêmica e profissional</strong>: R possui uma comunidade ativa de usuários que contribuem constantemente com novos pacotes, métodos e soluções para problemas complexos.</p></li>
<li><p><strong>Integração com o sistema Quarto</strong>: Perfeita compatibilidade com o sistema de publicação Quarto, permitindo a criação de documentos, apresentações e websites dinâmicos e reproduzíveis.</p></li>
<li><p><strong>Ecossistema Tidyverse</strong>: O conjunto de pacotes Tidyverse fornece uma gramática consistente para manipulação, visualização e modelagem de dados, especialmente útil para iniciantes.</p></li>
<li><p><strong>Excelência em visualização de dados</strong>: Pacotes como ggplot2 permitem criar visualizações estatísticas sofisticadas e personalizáveis.</p></li>
<li><p><strong>Relevância no mercado</strong>: Profissionais com conhecimento em R são valorizados em setores como finanças, consultorias, pesquisa de mercado e análise de negócios.</p></li>
<li><p><strong>Reprodutibilidade científica</strong>: R facilita a implementação de práticas de ciência reproduzível, essencial para pesquisas acadêmicas e relatórios corporativos auditáveis.</p></li>
<li><p><strong>Versatilidade em tipos de análise</strong>: Desde estatísticas descritivas simples até modelos complexos de machine learning e econometria aplicada, R oferece ferramentas para diversos níveis de análise.</p></li>
<li><p><strong>Documentação extensa</strong>: Ampla disponibilidade de documentação, tutoriais, livros e recursos online, facilitando o aprendizado contínuo.</p></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Vídeo sobre R
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Para finalizar esta introdução, assista o vídeo a seguir sobre a linguagem R disponibilizado pelo <a href="https://r-consortium.org" target="_blank">R Consortium</a>:</li>
</ul>
<div class="quarto-video ratio ratio-21x9"><iframe data-external="1" src="https://www.youtube.com/embed/XcBLEVknqvY" title="What is R?" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Próximos Passos
</div>
</div>
<div class="callout-body-container callout-body">
<p>Nas próximas seções do tutorial vamos explorar os conceitos básicos da linguagem R, que servirão como alicerce para os tópicos posteriores. Compreender esses fundamentos é essencial antes de avançarmos para análises mais complexas.</p>
</div>
</div>
</section>
<section id="objetos-e-variáveis-em-r" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Objetos e Variáveis em R</h1>
<p>Em R, os termos “variável” e “objeto” são frequentemente usados de forma intercambiável, o que pode causar confusão inicial, especialmente para quem já possui experiência com outras linguagens de programação. Esta seção esclarece essa terminologia para facilitar seu aprendizado.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
A Filosofia “Tudo é um Objeto” em R
</div>
</div>
<div class="callout-body-container callout-body">
<p>R segue uma filosofia fundamental: <strong>tudo que existe em R é um objeto</strong>. Isso significa que todos os elementos que você manipula — desde números simples até funções complexas — são tratados como objetos.</p>
<p>Esta abordagem difere de muitas outras linguagens de programação que fazem distinção clara entre “variáveis primitivas” (como números) e “objetos” (estruturas mais complexas).</p>
<p>Quando criamos algo em R usando um operador de atribuição (<code>&lt;-</code>), estamos essencialmente:</p>
<ol type="1">
<li>Criando um objeto na memória do computador</li>
<li>Atribuindo um nome a esse objeto para referenciá-lo posteriormente</li>
</ol>
<p>Por exemplo, em <code>idade &lt;- 25</code>, criamos um objeto do tipo numérico com valor 25 e o nomeamos como “idade”. Este nome funciona como uma etiqueta que nos permite acessar e manipular o objeto.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Por que usarei “variável” e “objeto” de forma intercambiável?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Por questões de clareza e para facilitar seu aprendizado:</p>
<ul>
<li><p>Utilizarei o termo <strong>variável</strong> principalmente quando falarmos de valores simples que “variam”, como números, textos ou valores lógicos. Este termo é mais intuitivo para iniciantes e comum em estatística e análise de dados.</p></li>
<li><p>Utilizarei o termo <strong>objeto</strong> quando precisarmos enfatizar a natureza mais complexa de algumas estruturas em R, como data frames, listas, funções ou quando discutirmos conceitos mais avançados.</p></li>
<li><p>Em muitos contextos, usarei ambos os termos de forma intercambiável, refletindo a prática comum na comunidade R.</p></li>
</ul>
<p>Esta flexibilidade terminológica espelha a documentação oficial da linguagem R e a literatura sobre a linguagem, preparando você para diferentes materiais que poderá encontrar em sua jornada de aprendizado.</p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Uma Analogia Útil
</div>
</div>
<div class="callout-body-container callout-body">
<p>Imagine uma biblioteca onde cada livro é um “objeto” de dados:</p>
<ul>
<li><p>O <strong>conteúdo do livro</strong> representa os dados ou valores armazenados.</p></li>
<li><p>O <strong>título na lateral</strong> representa o nome da variável</p></li>
<li><p>As <strong>prateleiras e estantes</strong> representam a memória do computador</p></li>
<li><p>O <strong>catálogo da biblioteca</strong> equivale ao ambiente R, que mantém registro de onde cada objeto está armazenado</p></li>
</ul>
<p>Quando você cria uma variável como <code>receita &lt;- 5000</code>, é como se estivesse colocando um novo livro (com o conteúdo “5000”) na biblioteca e rotulando sua lateral como “receita” para poder encontrá-lo depois.</p>
</div>
</div>
<p>Este entendimento sobre variáveis e objetos em R estabelece uma base conceitual importante antes de mergulharmos nos tipos específicos de dados e em como manipulá-los para análises eficazes.</p>
</section>
<section id="variáveis-e-atribuição-de-valores" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Variáveis e Atribuição de Valores</h1>
<p>Em R, a atribuição de valores a variáveis é fundamental para armazenar e manipular dados. Por exemplo, podemos criar variáveis para armazenar informações financeiras, como receitas, custos e lucros, que são essenciais para análises em Administração.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplo: Atribuição de valores a variáveis</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>receita_mensal <span class="ot">&lt;-</span> <span class="dv">850000</span>  <span class="co"># Receita mensal da empresa</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>custos_mensais <span class="ot">&lt;-</span> <span class="dv">500000</span>  <span class="co"># Custos mensais</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Cálculo do lucro</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>lucro_mensal <span class="ot">&lt;-</span> receita_mensal <span class="sc">-</span> custos_mensais  </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>lucro_mensal</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 350000</code></pre>
</div>
</div>
<p>Todas as instruções R com as quais criamos variáveis ou objetos têm o mesmo formato:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>nome_do_objeto <span class="ot">&lt;-</span> valor</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Lemos esse código como: “<em>valor é atribuído a nome_objeto</em>”</p>
<p>Em R, podemos atribuir informações às variáveis (ou objetos) utilizando os seguintes operadores de atribuição:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Diferentes formas de atribuição em R</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Mesmo resultado, estilos diferentes</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Operador recomendado (&lt;-) </span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>receita_mensal <span class="ot">&lt;-</span> <span class="dv">850000</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>receita_mensal</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 850000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternativa (=), funciona, mas menos </span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># recomendado</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>lucro_operacional <span class="ot">=</span> <span class="dv">320000</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>lucro_operacional</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 320000</code></pre>
</div>
</div>
<p>Em R, como em todas as linguagens, fazemos muitas atribuições de valores a variáveis, e não é agradável digitar o operador manualmente. Assim, o RStudio oferece um atalho de teclado simples para inserir o operador <code>&lt;-</code>:</p>
<ul>
<li><p>Atalho do RStudio: <code>Alt + -</code> (Windows/Linux) ou <code>Option + -</code> (Mac)</p></li>
<li><p>Observe que o RStudio automaticamente envolve <code>&lt;-</code> com <strong>espaços</strong>, o que é uma boa prática de formatação de código.</p></li>
<li><p>Códigos sem espaços são difíceis de ler compare:</p></li>
</ul>
<p><code>lucro&lt;-receita-custos</code> versus</p>
<p><code>lucro &lt;- receita - custos</code></p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Boas Práticas para Escrever Códigos R
</div>
</div>
<div class="callout-body-container callout-body">
<p>Nomes de variáveis devem começar com uma letra e podem conter <code>letras</code>, <code>números</code>, <code>_</code> e <code>.</code></p>
<p>É importante criar nomes de objetos <strong>simples e descritivos</strong> que representem claramente seu conteúdo. Em Administração, é comum trabalhar com dados financeiros, de desempenho ou de mercado, então use nomes que facilitem a compreensão do código.</p>
<p><strong>Exemplos de boas práticas</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Margem bruta da empresa</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>margem_bruta <span class="ot">&lt;-</span> <span class="fl">0.35</span>  </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fluxo de caixa operacional</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>fluxo_caixa_operacional <span class="ot">&lt;-</span> receita <span class="sc">-</span> custos  </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Estilos de nomenclatura</strong>:</p>
<ul>
<li><strong>snake_case</strong>: <code>margem_bruta</code>, <code>fluxo_caixa_operacional</code></li>
<li><strong>CamelCase</strong>: <code>MargemBruta</code>, <code>FluxoCaixaOperacional</code></li>
</ul>
<p>Escolha um estilo e mantenha a consistência em todo o código.</p>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Práticas a evitar
</div>
</div>
<div class="callout-body-container callout-body">
<p>Evite os seguintes erros comuns:</p>
<ol type="1">
<li><strong>Nomes genéricos</strong>:</li>
</ol>
<ul>
<li>Ruim: <code>dados</code>, <code>resultado</code>, <code>x</code></li>
<li>Melhor: <code>receita_anual</code>, <code>lucro_liquido</code></li>
</ul>
<ol start="2" type="1">
<li><strong>Nomes muito longos</strong>:</li>
</ol>
<ul>
<li>Ruim: <code>calculo_da_margem_de_contribuicao_ajustada</code></li>
<li>Melhor: <code>margem_contribuicao</code></li>
</ul>
<ol start="3" type="1">
<li><strong>Espaços nos nomes</strong>:</li>
</ol>
<ul>
<li>Ruim: <code>margem bruta &lt;- 0.35</code> (causa erro)</li>
<li>Melhor: <code>margem_bruta &lt;- 0.35</code></li>
</ul>
<ol start="4" type="1">
<li><strong>Nomes começando com números</strong>:</li>
</ol>
<ul>
<li>Ruim: <code>1trimestre &lt;- "Janeiro-Março"</code> (inválido)</li>
<li>Melhor: <code>trimestre1 &lt;- "Janeiro-Março"</code></li>
</ul>
<ol start="5" type="1">
<li><strong>Sobrescrever funções existentes</strong>:</li>
</ol>
<ul>
<li>Ruim: <code>mean &lt;- 10</code> (sobrescreve a função <code>mean()</code>)</li>
<li>Melhor: <code>media &lt;- 10</code></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Como Imprimir Informações sobre Objetos em R
</div>
</div>
<div class="callout-body-container callout-body">
<p>Em R, existem algumas formas simples e eficazes de exibir informações sobre objetos ou variáveis. Esses métodos são ideais para visualizar valores, depurar código ou criar saídas personalizadas. Abaixo estão as principais formas:</p>
<p><strong>1. Usando</strong> <code>print()</code></p>
<p>A função <code>print()</code> é a maneira mais básica de exibir o conteúdo de um objeto:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplo: Usando print()</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>receita <span class="ot">&lt;-</span> <span class="fl">850000.50</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(receita)  <span class="co"># Exibe o valor da variável</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 850000.5</code></pre>
</div>
</div>
<p><strong>2. Imprimindo diretamente no console</strong></p>
<p>Em R, você pode exibir o conteúdo de um objeto simplesmente digitando seu nome no console. Isso chama automaticamente a função <code>print()</code> implicitamente:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># digitar o nome do objeto exibe seu valor</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>receita  </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 850000.5</code></pre>
</div>
</div>
<p><strong>3. Usando a função</strong> <code>cat()</code></p>
<p>A função <code>cat()</code> permite exibir informações de forma mais personalizada, combinando texto e valores. É útil para criar mensagens ou relatórios simples.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># a funçaão cat() combina texto e valor</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"A receita mensal é:"</span>, receita)  </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>A receita mensal é: 850000.5</code></pre>
</div>
</div>
<p><strong>Resumo</strong>:</p>
<ul>
<li><p>Use <code>print()</code> para exibir valores de forma explícita.</p></li>
<li><p>Digite o nome do objeto diretamente no console para exibir seu valor de forma rápida.</p></li>
<li><p>Use <code>cat()</code> para criar saídas personalizadas, combinando texto e valores.</p></li>
</ul>
</div>
</div>
</section>
<section id="tipos-atômicos-de-dados" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Tipos Atômicos de Dados</h1>
<p>Em R, os dados são armazenados em diferentes tipos atômicos (básicos), cada um com características específicas. A <a href="#tbl-1" class="quarto-xref">Tabela&nbsp;3</a> mostra os principais tipos.</p>
<div id="tbl-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabela&nbsp;1: Principais Tipos
</figcaption>
<div aria-describedby="tbl-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 22%">
<col style="width: 18%">
<col style="width: 58%">
</colgroup>
<thead>
<tr class="header">
<th>Tipo</th>
<th>Classe</th>
<th>Descrição</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>double</code></td>
<td><code>numeric</code></td>
<td>um vetor contendo valores reais (números com casas decimais)</td>
</tr>
<tr class="even">
<td><code>integer</code></td>
<td><code>numeric</code></td>
<td>um vetor contendo valores inteiros (números sem casas decimais)</td>
</tr>
<tr class="odd">
<td><code>character</code></td>
<td><code>character</code></td>
<td>um vetor contendo valores de texto (caracteres)</td>
</tr>
<tr class="even">
<td><code>logical</code></td>
<td><code>logical</code></td>
<td>um vetor contendo valores lógicos (<code>TRUE</code>/<code>FALSE</code>)</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>A <a href="#tbl-2" class="quarto-xref">Tabela&nbsp;2</a> exibe alguns tipos especiais que podem aparecer em análises de dados.</p>
<div id="tbl-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabela&nbsp;2: Tipos Especiais
</figcaption>
<div aria-describedby="tbl-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th>Tipo</th>
<th>Descrição</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>NA</code></td>
<td><code>Not Available</code>: representa dados faltantes</td>
</tr>
<tr class="even">
<td><code>NaN</code></td>
<td><code>Not a Number</code>: (ex: <code>0 / 0</code>)</td>
</tr>
<tr class="odd">
<td><code>Inf</code></td>
<td><span class="math inline">+ \infty</span> ou <span class="math inline">- \infty</span>: (ex: <code>1 / 0</code>)</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
A Importância de Conhecer Tipos e Classes de Dados
</div>
</div>
<div class="callout-body-container callout-body">
<p>Na prática da Ciência de Dados, estima-se que analistas e cientistas dedicam entre 60% a 80% do tempo de um projeto à importação, limpeza e preparação dos dados antes de iniciar análises mais sofisticadas. Compreender profundamente os tipos e classes de dados em R é fundamental por várias razões:</p>
<ul>
<li><p><strong>Evita erros sutis de processamento</strong>: Operações matemáticas em dados textuais ou cálculos com valores ausentes podem produzir resultados inesperados.</p></li>
<li><p><strong>Otimiza o desempenho</strong>: Estruturas de dados apropriadas melhoram a eficiência computacional, especialmente em conjuntos grandes.</p></li>
<li><p><strong>Facilita transformações</strong>: O conhecimento dos tipos permite conversões adequadas (como texto para número) sem perda de informação.</p></li>
<li><p><strong>Melhora a interpretabilidade</strong>: Identificar corretamente dados faltantes (<code>NA</code>), indefinidos (<code>NaN</code>), ou infinitos (<code>Inf</code>) é crucial para conclusões válidas.</p></li>
<li><p><strong>Aumenta a compatibilidade</strong>: Diferentes funções e pacotes em R exigem tipos específicos de dados como entrada.</p></li>
</ul>
<p>O domínio dos tipos e classes de dados não é apenas uma questão técnica, mas um requisito fundamental para análises confiáveis em contextos administrativos e financeiros. Este conhecimento permite ao analista de dados concentrar-se mais nos insights e menos na correção de problemas estruturais nos dados.</p>
</div>
</div>
<section id="tipos-double-e-integer" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="tipos-double-e-integer"><span class="header-section-number">4.1</span> Tipos <code>double</code> e <code>integer</code></h2>
<p>Em R, existem dois tipos principais de dados numéricos:</p>
<ul>
<li><p><strong><code>double</code></strong>: Armazena números com casas decimais (ponto flutuante), ideal para valores monetários, índices financeiros, taxas percentuais e outras medidas que exigem precisão decimal.</p></li>
<li><p><strong><code>integer</code></strong>: Armazena números inteiros sem casas decimais, útil para contagens, quantidades discretas e índices em séries temporais.</p></li>
</ul>
<p>Na prática de Administração e Finanças, o tipo <code>double</code> é frequentemente utilizado para representar valores monetários, taxas de juros ou indicadores financeiros, enquanto <code>integer</code> é mais comum para representar quantidades como número de funcionários, produtos vendidos ou períodos de análise.</p>
<p>O sufixo <code>L</code> após um número (como em <code>50L</code>) indica explicitamente que se trata de um valor inteiro. Na maioria das operações, R utiliza automaticamente o tipo mais apropriado, o que simplifica a programação para análises financeiras e administrativas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># double (números com casas decimais)</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>receita <span class="ot">&lt;-</span> <span class="fl">850000.50</span>  </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># integer (números inteiros)</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>total_funcionarios <span class="ot">&lt;-</span> <span class="dv">50</span>L   </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># verifica os tipos</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(receita)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(total_funcionarios)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
classe <code>numeric</code>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Apesar dos tipos <code>double</code> e <code>integer</code> representarem números decimais e inteiros de forma diferente, ambos pertencem à classe <code>numeric</code>, assim, na maioria das situações, você não precisa se preocupar com a possível diferença.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(receita)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(total_funcionarios)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
</div>
<p><strong>Diferença entre</strong> <code>typeof</code> e <code>class</code></p>
<p>Em R, as funções <code>typeof</code> e <code>class</code> fornecem informações diferentes sobre um objeto:</p>
<ul>
<li><strong><code>typeof</code></strong>: Retorna o <strong>tipo interno</strong> do objeto, ou seja, como R armazena o objeto na memória. Por exemplo:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(receita)  <span class="co"># Retorna "double"</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(total_funcionarios)  <span class="co"># Retorna "integer"</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong><code>class</code></strong>: Retorna a <strong>classe</strong> do objeto, que define como R trata o objeto em operações e funções. Por exemplo:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(receita)  <span class="co"># Retorna "numeric"</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(total_funcionarios)  <span class="co"># Retorna "numeric"</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Em resumo:</p>
<ul>
<li>Use <code>typeof</code> para entender como R armazena o objeto internamente.</li>
<li>Use <code>class</code> para entender como R trata o objeto em operações e funções.</li>
</ul>
</div>
</div>
</section>
<section id="tipo-character" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="tipo-character"><span class="header-section-number">4.2</span> Tipo <code>character</code></h2>
<p>O tipo <code>character</code> é essencial para armazenar e manipular informações textuais. Este tipo de dado armazena sequências de caracteres (texto) e é indicado por aspas simples (<code>'</code>) ou duplas (<code>"</code>).</p>
<p>Em contextos de Administração, o tipo <code>character</code> é utilizado para armazenar:</p>
<ul>
<li>Nomes de empresas, setores ou produtos</li>
<li>Categorias em classificações de mercado</li>
<li>Períodos de tempo expressos como texto (Ex: “1° Trimestre 2024”)</li>
<li>Códigos de identificação alfanuméricos</li>
<li>Observações qualitativas</li>
</ul>
<p>A manipulação de dados textuais é particularmente importante em análises de mercado, pesquisas de satisfação, classificação de produtos e organização de relatórios gerenciais, onde a categorização textual precede análises quantitativas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># character (texto)</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>instituicao <span class="ot">&lt;-</span> <span class="st">"IFMG - Campus Formiga"</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># verifica o tipo </span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(instituicao)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
</section>
<section id="tipo-logical" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="tipo-logical"><span class="header-section-number">4.3</span> Tipo <code>logical</code></h2>
<p>O tipo <code>logical</code> representa valores booleanos (<code>TRUE</code> ou <code>FALSE</code>) e é fundamental para operações condicionais e filtragem de dados.</p>
<p>Em contextos práticos de gestão e finanças, o tipo <code>logical</code> é utilizado para:</p>
<ul>
<li>Verificar condições financeiras (Ex: lucro positivo, meta atingida)</li>
<li>Filtrar dados que atendem a critérios específicos</li>
<li>Automatizar decisões baseadas em regras de negócio</li>
<li>Sinalizar eventos importantes (Ex: inadimplência, quebra de estoque)</li>
<li>Implementar validações em modelos de previsão</li>
</ul>
<p>Os valores <code>TRUE</code> e <code>FALSE</code> devem ser escritos em maiúsculas em R, e podem ser abreviados como <code>T</code> e <code>F</code>, respectivamente, embora a forma completa seja recomendada para maior clareza do código.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># logical (lógico, TRUE/FALSE)</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>lucro_positivo <span class="ot">&lt;-</span> <span class="cn">TRUE</span>  </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>lucro_negativo <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co"># verifica o tipo </span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(lucro_positivo)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "logical"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(lucro_negativo)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "logical"</code></pre>
</div>
</div>
</section>
<section id="tipo-especial-na" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="tipo-especial-na"><span class="header-section-number">4.4</span> Tipo Especial <code>NA</code></h2>
<p>O tipo especial <code>NA</code> (<em>Not Available</em>) é comum em análises de dados reais, onde frequentemente nos deparamos com informações ausentes. Em contextos de Administração e Finanças, dados faltantes podem representar:</p>
<ul>
<li>Vendas não realizadas em determinados períodos</li>
<li>Informações contábeis pendentes</li>
<li>Valores não reportados em demonstrações financeiras</li>
<li>Respostas omitidas em pesquisas de mercado</li>
<li>Métricas não aplicáveis a certos departamentos ou produtos</li>
</ul>
<p>Identificar e tratar corretamente os valores <code>NA</code> é essencial para evitar conclusões tendenciosas. R oferece funções específicas como <code>is.na()</code> para detectar valores ausentes e métodos estatísticos para lidar com eles de forma apropriada.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplo: Detectando valores ausentes em dados de vendas </span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>vendas_trimestrais <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">150000</span>, <span class="dv">165000</span>, <span class="cn">NA</span>, <span class="dv">180000</span>)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(vendas_trimestrais) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE  TRUE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculando a média excluindo valores ausentes</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(vendas_trimestrais, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 165000</code></pre>
</div>
</div>
<p>O tratamento adequado de dados falantes é uma habilidade fundamental em Ciência de Dados.</p>
</section>
<section id="tipo-especial-nan" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="tipo-especial-nan"><span class="header-section-number">4.5</span> Tipo Especial <code>NaN</code></h2>
<p>O valor <code>NaN</code> (<em>Not a Number</em>) ocorre quando uma operação matemática produz um resultado indefinido. Em contextos de gestão e finanças, este tipo especial pode surgir em:</p>
<ul>
<li>Cálculos de indicadores financeiros com divisores zero</li>
<li>Operações matemáticas inválidas em modelos preditivos</li>
<li>Transformações logarítmicas de valores negativos ou zero</li>
<li>Raízes quadradas de números negativos em análises estatísticas</li>
</ul>
<p>Enquanto <code>NA</code> representa dados ausentes, <code>NaN</code> indica especificamente um resultado numérico indefinido. Diferenciá-los é importante para diagnóstico de problemas em cálculos complexos, como em modelos de precificação de ativos ou simulações financeiras.</p>
<p>A função <code>is.nan()</code> permite identificar estes valores em conjuntos de dados:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplo: Identificando resultados indefinidos em cálculos financeiros</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>resultados <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">0</span><span class="sc">/</span><span class="dv">0</span>, <span class="dv">10</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="fu">is.nan</span>(resultados)  </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE FALSE</code></pre>
</div>
</div>
</section>
<section id="tipo-especial-inf" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="tipo-especial-inf"><span class="header-section-number">4.6</span> Tipo Especial <code>inf</code></h2>
<p>O valor especial <code>Inf</code> (e <code>-Inf</code> para infinito negativo) ocorre principalmente em divisões por zero e representa valores que excedem os limites computacionais. Em análises administrativas e financeiras, este tipo pode aparecer em:</p>
<ul>
<li>Cálculos de taxas de crescimento a partir de valores base zero</li>
<li>Razões financeiras com denominadores muito próximos a zero</li>
<li>Projeções exponenciais sem restrições</li>
<li>Análises de retorno sobre investimento com investimentos mínimos</li>
</ul>
<p>Diferentemente de <code>NA</code> e <code>NaN</code>, valores <code>Inf</code> podem ser utilizados em operações aritméticas seguindo regras matemáticas de infinito:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplo: Comportamento de infinito em operações</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>infinito_positivo <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">0</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>infinito_positivo <span class="sc">+</span> <span class="dv">1000</span>  <span class="co"># Continua sendo Inf</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Inf</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>infinito_positivo <span class="sc">/</span> <span class="dv">2</span>     <span class="co"># Continua sendo Inf</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Inf</code></pre>
</div>
</div>
<p>Identificar valores infinitos é importante, por exemplo, em modelos financeiros, pois podem indicar problemas estruturais nas fórmulas utilizadas ou divisões por zero que comprometem a validade das análises.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Sobre Conversão entre Tipos e Classes de Dados
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Você pode estar se perguntando como converter um tipo ou classe de dados em outro(a) (por exemplo, transformar um texto em número ou vice-versa).</p></li>
<li><p>Embora R base ofereça funções como <code>as.numeric()</code>, <code>as.character()</code> e <code>as.logical()</code> para essas conversões, abordaremos este tópico mais adiante no tutorial, quando estudarmos a manipulação de dados com o pacote <code>dplyr</code>.</p></li>
<li><p>Especificamente, aprenderemos como usar as funções <code>mutate()</code> e <code>transmute()</code> para realizar conversões de tipos de maneira eficiente e legível em conjuntos de dados estruturados. Esta abordagem se alinha com as práticas modernas de ciência de dados e permite transformar múltiplas variáveis simultaneamente dentro de um fluxo de trabalho analítico coerente.</p></li>
<li><p>Por enquanto, foque em compreender as características e comportamentos dos diferentes tipos de dados apresentados nesta seção, pois este conhecimento fundamentará toda sua jornada na análise de dados com R.</p></li>
</ul>
</div>
</div>
</section>
</section>
<section id="sec-vetores" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Vetores em R</h1>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Por que começar pelos vetores?
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Vetores são a <strong>estrutura de dados mais básica e fundamental</strong> da linguagem R.</li>
<li>Toda variável simples em R — como um número, texto ou valor lógico — <strong>é um vetor de comprimento 1</strong>.</li>
<li>Vetores armazenam sequências de <strong>valores homogêneos</strong>, ou seja, todos os elementos têm o <strong>mesmo tipo</strong>: numérico, lógico ou texto.</li>
<li>Compreender vetores é <strong>pré-requisito para manipular dados em estruturas mais avançadas</strong>, como <em>data frames</em>, <em>tibbles</em> e listas.</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Analogia
</div>
</div>
<div class="callout-body-container callout-body">
<p>Imagine que você está lidando com uma <strong>planilha do Excel</strong> onde cada coluna contém apenas um tipo de dado:</p>
<ul>
<li>A coluna “Receitas Mensais” possui apenas números → vetor <code>numeric</code></li>
<li>A coluna “Nome da Empresa” possui apenas textos → vetor <code>character</code></li>
<li>A coluna “Meta Atingida?” possui apenas <code>TRUE</code> ou <code>FALSE</code> → vetor <code>logical</code></li>
</ul>
<p>Cada coluna é, conceitualmente, <strong>um vetor em R</strong>: uma sequência ordenada, homogênea e indexada.</p>
</div>
</div>
<section id="criando-vetores" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="criando-vetores"><span class="header-section-number">5.1</span> Criando vetores</h2>
<p>A função mais básica para criar vetores é <code>c()</code>, que significa “concatenar” ou “combinar”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vetor de retornos mensais (%)</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>retornos <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.012</span>, <span class="sc">-</span><span class="fl">0.005</span>, <span class="fl">0.007</span>, <span class="fl">0.013</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Sequência de inteiros de 1 a 4</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>dias <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>                 </span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Sequência trimestral: 1, 4, 7, 10</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>meses <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">12</span>, <span class="at">by =</span> <span class="dv">3</span>) </span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Vetor lógico repetido quatro vezes</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>flags <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">TRUE</span>, <span class="dv">4</span>)       </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Sobre a função <code>c()</code>
</div>
</div>
<div class="callout-body-container callout-body">
<p>A função <code>c()</code> combina valores <strong>do mesmo tipo</strong> em um vetor.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">"IFMG"</span>, <span class="st">"UFV"</span>, <span class="st">"USP"</span>)      <span class="co"># vetor de textos</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "IFMG" "UFV"  "USP" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)         <span class="co"># vetor lógico</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE  TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fl">1.2</span>, <span class="fl">2.5</span>, <span class="fl">3.8</span>)             <span class="co"># vetor numérico (double)</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.2 2.5 3.8</code></pre>
</div>
</div>
<p>Se os elementos tiverem <strong>tipos diferentes</strong>, R fará <em>coerção implícita</em> para um tipo comum. Por exemplo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="st">"texto"</span>, <span class="cn">TRUE</span>)  <span class="co"># Todos convertidos para texto (character)</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1"     "texto" "TRUE" </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="indexação-selecionando-elementos" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="indexação-selecionando-elementos"><span class="header-section-number">5.2</span> Indexação: selecionando elementos</h2>
<p>Vetores são indexados com colchetes <code>[]</code>. A indexação começa em <strong>1</strong> (não em zero, como em Python ou C).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Primeiro e último retorno</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>retornos[<span class="dv">1</span>]                  </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.012</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>retornos[<span class="fu">length</span>(retornos)]   </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.013</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Excluindo o segundo elemento</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>retornos[<span class="sc">-</span><span class="dv">2</span>]                 </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.012 0.007 0.013</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecionando apenas valores positivos</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>retornos[retornos <span class="sc">&gt;</span> <span class="dv">0</span>]       </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.012 0.007 0.013</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Filtro condicional em vetores
</div>
</div>
<div class="callout-body-container callout-body">
<p>Expressões como <code>retornos &gt; 0</code> retornam um vetor lógico com <code>TRUE</code>/<code>FALSE</code>, que pode ser usado para <strong>filtrar elementos</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>retornos <span class="sc">&gt;</span> <span class="dv">0</span>  <span class="co"># vetor lógico</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE  TRUE  TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>retornos[retornos <span class="sc">&gt;</span> <span class="dv">0</span>]  <span class="co"># filtragem condicional</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.012 0.007 0.013</code></pre>
</div>
</div>
<p>Este comportamento é fundamental para manipulação de dados no <code>dplyr</code>.</p>
</div>
</div>
</section>
<section id="operações-vetorizadas-e-reciclagem" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="operações-vetorizadas-e-reciclagem"><span class="header-section-number">5.3</span> Operações vetorizadas e reciclagem</h2>
<p>Em R, você pode aplicar operações matemáticas diretamente sobre vetores.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicando desconto de IR (15%)</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>ret_liq <span class="ot">&lt;-</span> retornos <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> <span class="fl">0.15</span>)  </span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Reciclagem de vetor: IR de 15% e 20% aplicados alternadamente</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>taxas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.15</span>, <span class="fl">0.20</span>)</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>ret_liq2 <span class="ot">&lt;-</span> retornos <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> taxas)  </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Cuidado com a reciclagem automática
</div>
</div>
<div class="callout-body-container callout-body">
<p>Se os vetores tiverem <strong>comprimentos incompatíveis</strong>, R ainda assim executará a operação com uma <strong>mensagem de aviso</strong>, podendo gerar <strong>resultados incorretos</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>) <span class="sc">+</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>)  <span class="co"># comprimento 3 e 2 =&gt; erro sutil</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11 22 13</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="testando-tipos-e-classes" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="testando-tipos-e-classes"><span class="header-section-number">5.4</span> Testando tipos e classes</h2>
<p>Vetores devem ter <strong>elementos do mesmo tipo</strong>, mas podemos verificar isso com:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verifica o tipo atômico (typeof) e a classe do objeto</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(retornos)  <span class="co"># double</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(retornos)   <span class="co"># numeric</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
</section>
<section id="comprimento-dos-vetores" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="comprimento-dos-vetores"><span class="header-section-number">5.5</span> Comprimento dos vetores</h2>
<p>Use <code>length()</code> para saber quantos elementos um vetor possui:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(retornos)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
</section>
<section id="vetores-de-texto-character-e-lógicos" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="vetores-de-texto-character-e-lógicos"><span class="header-section-number">5.6</span> Vetores de texto (character) e lógicos</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vetor de nomes de empresas</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>empresas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Empresa A"</span>, <span class="st">"Empresa B"</span>, <span class="st">"Empresa C"</span>)</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Vetor lógico: metas atingidas?</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>metas_atingidas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Combinação com `cat()`</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Metas atingidas:"</span>, metas_atingidas, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Metas atingidas: TRUE TRUE FALSE </code></pre>
</div>
</div>
</section>
<section id="boas-práticas-com-vetores" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="boas-práticas-com-vetores"><span class="header-section-number">5.7</span> Boas práticas com vetores</h2>
<ul>
<li>Prefira vetores <strong>homogêneos e bem nomeados</strong></li>
<li>Use <code>typeof()</code> para detectar coerções indesejadas</li>
<li>Evite misturar tipos dentro de <code>c()</code> sem intenção</li>
</ul>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Próximos passos
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vetores são a espinha dorsal de todas as estruturas de dados em R. Compreender seu comportamento é essencial para trabalhar com tabelas (<code>data.frames</code>, <code>tibbles</code>), realizar filtros, aplicar transformações e construir visualizações.</p>
<p>Na próxima seção, vamos abordar os <strong>data frames e tibbles</strong>, que correspondem às tabelas que usamos no dia a dia — mas com todo o poder do R por trás.</p>
</div>
</div>
</section>
</section>
<section id="sec-estruturas-dados" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Estruturas de Dados em R</h1>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Fundamentos das Estruturas de Dados
</div>
</div>
<div class="callout-body-container callout-body">
<p>R oferece diferentes tipos de estruturas para organizar e manipular dados, cada uma adequada para situações específicas. As principais estruturas são:</p>
<ul>
<li><strong>Vetores</strong>: Sequências unidimensionais de elementos do mesmo tipo (já estudados)</li>
<li><strong>Matrizes</strong>: Estruturas bidimensionais homogêneas (todos os elementos do mesmo tipo)</li>
<li><strong>Data Frames</strong>: Estruturas bidimensionais heterogêneas (colunas podem ter tipos diferentes)</li>
<li><strong>Tibbles</strong>: Versão moderna e aprimorada dos data frames</li>
<li><strong>Listas</strong>: Estruturas flexíveis que podem conter qualquer tipo de objeto</li>
</ul>
<p>Compreender estas estruturas é fundamental para escolher a abordagem mais adequada em diferentes contextos analíticos e para integrar-se efetivamente com o ecossistema de pacotes do R.</p>
</div>
</div>
<section id="sec-matrizes" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="sec-matrizes"><span class="header-section-number">6.1</span> Matrizes</h2>
<p>Matrizes são estruturas bidimensionais que armazenam elementos do mesmo tipo organizados em linhas e colunas. Em econometria e análise quantitativa, matrizes são fundamentais para implementar modelos estatísticos, álgebra linear computacional e métodos numéricos avançados.</p>
<section id="características-das-matrizes" class="level3" data-number="6.1.1">
<h3 data-number="6.1.1" class="anchored" data-anchor-id="características-das-matrizes"><span class="header-section-number">6.1.1</span> Características das Matrizes</h3>
<ul>
<li><strong>Homogeneidade</strong>: Todos os elementos devem ser do mesmo tipo</li>
<li><strong>Dimensionalidade</strong>: Possuem exatamente duas dimensões (linhas e colunas)</li>
<li><strong>Indexação</strong>: Acessadas por índices [linha, coluna]</li>
<li><strong>Eficiência computacional</strong>: Operações matemáticas otimizadas para cálculos científicos</li>
</ul>
</section>
<section id="criando-matrizes" class="level3" data-number="6.1.2">
<h3 data-number="6.1.2" class="anchored" data-anchor-id="criando-matrizes"><span class="header-section-number">6.1.2</span> Criando Matrizes</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Matrizes básicas para demonstrações</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">6</span>), <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">5</span>), <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>A</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    4    2    1
[2,]    3    5    2
[3,]    1    2    6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>B</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    2    1    3
[2,]    1    4    2
[3,]    2    1    5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Matriz de dados econométricos</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">5</span>), <span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>, <span class="fu">c</span>(<span class="fl">1.5</span>, <span class="fl">2.0</span>, <span class="fl">2.5</span>, <span class="fl">3.0</span>, <span class="fl">3.5</span>)), <span class="at">nrow =</span> <span class="dv">5</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(X) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"intercepto"</span>, <span class="st">"X1"</span>, <span class="st">"X2"</span>)</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>X</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     intercepto X1  X2
[1,]          1  2 1.5
[2,]          1  3 2.0
[3,]          1  4 2.5
[4,]          1  5 3.0
[5,]          1  6 3.5</code></pre>
</div>
</div>
</section>
<section id="operações-aritméticas-básicas" class="level3" data-number="6.1.3">
<h3 data-number="6.1.3" class="anchored" data-anchor-id="operações-aritméticas-básicas"><span class="header-section-number">6.1.3</span> Operações Aritméticas Básicas</h3>
<p>As operações elemento-a-elemento seguem as regras aritméticas usuais:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adição e subtração de matrizes</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>A <span class="sc">+</span> B</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    6    3    4
[2,]    4    9    4
[3,]    3    3   11</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>A <span class="sc">-</span> B</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    2    1   -2
[2,]    2    1    0
[3,]   -1    1    1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiplicação e divisão elemento por elemento (Hadamard)</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>A <span class="sc">*</span> B</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    8    2    3
[2,]    3   20    4
[3,]    2    2   30</code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>A <span class="sc">/</span> B</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]      [,3]
[1,]  2.0 2.00 0.3333333
[2,]  3.0 1.25 1.0000000
[3,]  0.5 2.00 1.2000000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiplicação por escalar</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fl">2.5</span> <span class="sc">*</span> A</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,] 10.0  5.0  2.5
[2,]  7.5 12.5  5.0
[3,]  2.5  5.0 15.0</code></pre>
</div>
</div>
</section>
<section id="multiplicação-matricial-e-transposta" class="level3" data-number="6.1.4">
<h3 data-number="6.1.4" class="anchored" data-anchor-id="multiplicação-matricial-e-transposta"><span class="header-section-number">6.1.4</span> Multiplicação Matricial e Transposta</h3>
<p>A multiplicação matricial é uma operação fundamental que difere da multiplicação elemento-a-elemento. Para que seja possível, o número de colunas da primeira matriz deve igual ao número de linhas da segunda.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiplicação matricial</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>A <span class="sc">%*%</span> B</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]   12   13   21
[2,]   15   25   29
[3,]   16   15   37</code></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transposta</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(A)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    4    3    1
[2,]    2    5    2
[3,]    1    2    6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificando propriedade: (AB)' = B'A'</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="fu">all.equal</span>(<span class="fu">t</span>(A <span class="sc">%*%</span> B), <span class="fu">t</span>(B) <span class="sc">%*%</span> <span class="fu">t</span>(A))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Matriz simétrica: A %*% t(A)</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>simetrica <span class="ot">&lt;-</span> A <span class="sc">%*%</span> <span class="fu">t</span>(A)</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>simetrica</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]   21   24   14
[2,]   24   38   25
[3,]   14   25   41</code></pre>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">isSymmetric</span>(simetrica)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="determinante-e-matriz-inversa" class="level3" data-number="6.1.5">
<h3 data-number="6.1.5" class="anchored" data-anchor-id="determinante-e-matriz-inversa"><span class="header-section-number">6.1.5</span> Determinante e Matriz Inversa</h3>
<p>O determinante é um escalar que fornece informações importantes sobre a matriz, incluindo se ela é invertível. Uma matriz é invertível se e somente se seu determinante é diferente de zero.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculando determinantes</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">det</span>(A)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 73</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">det</span>(B)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 14</code></pre>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Propriedade: det(AB) = det(A) * det(B)</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">det</span>(A <span class="sc">%*%</span> B)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1022</code></pre>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">det</span>(A) <span class="sc">*</span> <span class="fu">det</span>(B)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1022</code></pre>
</div>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Matriz inversa (quando determinante ≠ 0)</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>A_inv <span class="ot">&lt;-</span> <span class="fu">solve</span>(A)</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>A_inv</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            [,1]        [,2]        [,3]
[1,]  0.35616438 -0.13698630 -0.01369863
[2,] -0.21917808  0.31506849 -0.06849315
[3,]  0.01369863 -0.08219178  0.19178082</code></pre>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificação: A * A^(-1) = I</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(A <span class="sc">%*%</span> A_inv, <span class="dv">10</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    0    0
[2,]    0    1    0
[3,]    0    0    1</code></pre>
</div>
</div>
</section>
<section id="matrizes-especiais" class="level3" data-number="6.1.6">
<h3 data-number="6.1.6" class="anchored" data-anchor-id="matrizes-especiais"><span class="header-section-number">6.1.6</span> Matrizes Especiais</h3>
<p>R fornece funções para criar matrizes com propriedades específicas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Matriz identidade</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(<span class="dv">3</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    0    0
[2,]    0    1    0
[3,]    0    0    1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Matriz diagonal</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">3</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    2    0    0
[2,]    0    5    0
[3,]    0    0    3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraindo diagonal de uma matriz</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(A)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4 5 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Matriz triangular superior</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="fu">upper.tri</span>(A, <span class="at">diag =</span> <span class="cn">TRUE</span>) <span class="sc">*</span> A</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    4    2    1
[2,]    0    5    2
[3,]    0    0    6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Matriz triangular inferior</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lower.tri</span>(A, <span class="at">diag =</span> <span class="cn">TRUE</span>) <span class="sc">*</span> A</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    4    0    0
[2,]    3    5    0
[3,]    1    2    6</code></pre>
</div>
</div>
</section>
<section id="potências-de-matrizes" class="level3" data-number="6.1.7">
<h3 data-number="6.1.7" class="anchored" data-anchor-id="potências-de-matrizes"><span class="header-section-number">6.1.7</span> Potências de Matrizes</h3>
<p>Para calcular potências de matrizes, utilizamos multiplicação matricial repetida:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Função para calcular potência de matriz</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>potencia_matriz <span class="ot">&lt;-</span> <span class="cf">function</span>(matriz, n) {</span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(n <span class="sc">==</span> <span class="dv">0</span>) <span class="fu">return</span>(<span class="fu">diag</span>(<span class="fu">nrow</span>(matriz)))</span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(n <span class="sc">==</span> <span class="dv">1</span>) <span class="fu">return</span>(matriz)</span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>  resultado <span class="ot">&lt;-</span> matriz</span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span>n) {</span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a>    resultado <span class="ot">&lt;-</span> resultado <span class="sc">%*%</span> matriz</span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb121-10"><a href="#cb121-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(resultado)</span>
<span id="cb121-11"><a href="#cb121-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb121-12"><a href="#cb121-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-13"><a href="#cb121-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculando A^2 e A^3</span></span>
<span id="cb121-14"><a href="#cb121-14" aria-hidden="true" tabindex="-1"></a><span class="fu">potencia_matriz</span>(A, <span class="dv">2</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]   23   20   14
[2,]   29   35   25
[3,]   16   24   41</code></pre>
</div>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">potencia_matriz</span>(A, <span class="dv">3</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]  166  174  147
[2,]  246  283  249
[3,]  177  234  310</code></pre>
</div>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificação: A^2 = A %*% A</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="fu">all.equal</span>(<span class="fu">potencia_matriz</span>(A, <span class="dv">2</span>), A <span class="sc">%*%</span> A)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="autovalores-e-autovetores" class="level3" data-number="6.1.8">
<h3 data-number="6.1.8" class="anchored" data-anchor-id="autovalores-e-autovetores"><span class="header-section-number">6.1.8</span> Autovalores e Autovetores</h3>
<p>Autovalores e autovetores são conceitos centrais da álgebra linear. Para uma matriz A, um autovalor <span class="math inline">\lambda</span> e seu autovetor correspondente <span class="math inline">v</span> satisfazem a equação <span class="math inline">Av = \lambda v</span> Os autovalores fornecem informações fundamentais sobre as propriedades da matriz.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculando autovalores e autovetores</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>eigen_result <span class="ot">&lt;-</span> <span class="fu">eigen</span>(A)</span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>eigen_result<span class="sc">$</span>values  <span class="co"># Autovalores</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8.758770 4.305407 1.935822</code></pre>
</div>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>eigen_result<span class="sc">$</span>vectors <span class="co"># Autovetores</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           [,1]       [,2]       [,3]
[1,] -0.4099544 -0.4179231 -0.6232476
[2,] -0.6613961 -0.4565376  0.7514727
[3,] -0.6280865  0.7854385 -0.2164516</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificação da equação característica para o primeiro autovalor</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>lambda1 <span class="ot">&lt;-</span> eigen_result<span class="sc">$</span>values[<span class="dv">1</span>]</span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> eigen_result<span class="sc">$</span>vectors[, <span class="dv">1</span>]</span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Deve ser aproximadamente igual: A*v1 ≈ λ1*v1</span></span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a>A <span class="sc">%*%</span> v1</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1]
[1,] -3.590696
[2,] -5.793016
[3,] -5.501266</code></pre>
</div>
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>lambda1 <span class="sc">*</span> v1</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -3.590696 -5.793016 -5.501266</code></pre>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Propriedades importantes</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">diag</span>(A))          <span class="co"># Traço = soma dos autovalores</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(eigen_result<span class="sc">$</span>values)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">det</span>(A)                <span class="co"># Determinante = produto dos autovalores</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 73</code></pre>
</div>
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prod</span>(eigen_result<span class="sc">$</span>values)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 73</code></pre>
</div>
</div>
</section>
<section id="decomposições-matriciais" class="level3" data-number="6.1.9">
<h3 data-number="6.1.9" class="anchored" data-anchor-id="decomposições-matriciais"><span class="header-section-number">6.1.9</span> Decomposições Matriciais</h3>
<p>As decomposições matriciais são técnicas que expressam uma matriz como produto de matrizes com propriedades específicas, facilitando cálculos e análises.</p>
<section id="decomposição-qr" class="level4" data-number="6.1.9.1">
<h4 data-number="6.1.9.1" class="anchored" data-anchor-id="decomposição-qr"><span class="header-section-number">6.1.9.1</span> Decomposição QR</h4>
<p>A decomposição QR expressa uma matriz <span class="math inline">A</span> como produto <span class="math inline">A = QR</span>, onde <span class="math inline">Q</span> é ortogonal e <span class="math inline">R</span> é triangular superior:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>qr_decomp <span class="ot">&lt;-</span> <span class="fu">qr</span>(A)</span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>Q <span class="ot">&lt;-</span> <span class="fu">qr.Q</span>(qr_decomp)</span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>R <span class="ot">&lt;-</span> <span class="fu">qr.R</span>(qr_decomp)</span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a>Q  <span class="co"># Matriz ortogonal</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           [,1]       [,2]        [,3]
[1,] -0.7844645  0.6167038  0.06551218
[2,] -0.5883484 -0.7066397 -0.39307307
[3,] -0.1961161 -0.3468959  0.91717049</code></pre>
</div>
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>R  <span class="co"># Matriz triangular superior</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         [,1]      [,2]      [,3]
[1,] -5.09902 -4.902903 -3.137858
[2,]  0.00000 -2.993583 -2.877951
[3,]  0.00000  0.000000  4.782389</code></pre>
</div>
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificação: A = Q * R</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a><span class="fu">all.equal</span>(A, Q <span class="sc">%*%</span> R)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Propriedade da matriz ortogonal: Q'Q = I</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">t</span>(Q) <span class="sc">%*%</span> Q, <span class="dv">10</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    0    0
[2,]    0    1    0
[3,]    0    0    1</code></pre>
</div>
</div>
</section>
<section id="decomposição-por-valores-singulares-svd" class="level4" data-number="6.1.9.2">
<h4 data-number="6.1.9.2" class="anchored" data-anchor-id="decomposição-por-valores-singulares-svd"><span class="header-section-number">6.1.9.2</span> Decomposição por Valores Singulares (SVD)</h4>
<p>A decomposição SVD expressa qualquer matriz <span class="math inline">A</span> como <span class="math inline">A = UDV'</span>, onde <span class="math inline">U</span> e <span class="math inline">V</span> são ortogonais e <span class="math inline">D</span> é diagonal com valores singulares:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>svd_result <span class="ot">&lt;-</span> <span class="fu">svd</span>(A)</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>U <span class="ot">&lt;-</span> svd_result<span class="sc">$</span>u</span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> svd_result<span class="sc">$</span>d</span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>V <span class="ot">&lt;-</span> svd_result<span class="sc">$</span>v</span>
<span id="cb151-5"><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-6"><a href="#cb151-6" aria-hidden="true" tabindex="-1"></a>d  <span class="co"># Valores singulares</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8.795776 4.360177 1.903464</code></pre>
</div>
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reconstrução: A = U * D * V'</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>D <span class="ot">&lt;-</span> <span class="fu">diag</span>(d)</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a><span class="fu">all.equal</span>(A, U <span class="sc">%*%</span> D <span class="sc">%*%</span> <span class="fu">t</span>(V))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aproximação de baixo posto (usando apenas os 2 maiores valores singulares)</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>A_aprox <span class="ot">&lt;-</span> U[, <span class="dv">1</span><span class="sc">:</span>k] <span class="sc">%*%</span> <span class="fu">diag</span>(d[<span class="dv">1</span><span class="sc">:</span>k]) <span class="sc">%*%</span> <span class="fu">t</span>(V[, <span class="dv">1</span><span class="sc">:</span>k])</span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a>A_aprox</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1]     [,2]      [,3]
[1,] 3.0154817 3.038096 0.7548745
[2,] 3.8161500 4.139435 2.2032052
[3,] 0.8228717 2.186768 5.9558986</code></pre>
</div>
</div>
</section>
<section id="decomposição-de-cholesky" class="level4" data-number="6.1.9.3">
<h4 data-number="6.1.9.3" class="anchored" data-anchor-id="decomposição-de-cholesky"><span class="header-section-number">6.1.9.3</span> Decomposição de Cholesky</h4>
<p>A decomposição de Cholesky é aplicável a matrizes simétricas e positivas definidas, expressando <span class="math inline">S = LL'</span>, onde <span class="math inline">L</span> é triangular:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando matriz simétrica positiva definida</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">456</span>)</span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>M <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">9</span>), <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>S <span class="ot">&lt;-</span> <span class="fu">t</span>(M) <span class="sc">%*%</span> M  <span class="co"># Garantidamente positiva definida</span></span>
<span id="cb157-5"><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-6"><a href="#cb157-6" aria-hidden="true" tabindex="-1"></a>S</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           [,1]      [,2]        [,3]
[1,] 2.83305484  1.162305  0.03465382
[2,] 1.16230477  2.544343 -1.46465307
[3,] 0.03465382 -1.464653  1.55452060</code></pre>
</div>
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Decomposição de Cholesky</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>L <span class="ot">&lt;-</span> <span class="fu">chol</span>(S)  <span class="co"># Triangular superior em R</span></span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a>L</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         [,1]      [,2]        [,3]
[1,] 1.683168 0.6905459  0.02058845
[2,] 0.000000 1.4378768 -1.02850973
[3,] 0.000000 0.0000000  0.70446039</code></pre>
</div>
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificação: S = L' * L</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a><span class="fu">all.equal</span>(S, <span class="fu">t</span>(L) <span class="sc">%*%</span> L)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
</section>
<section id="aplicações-em-econometria" class="level3" data-number="6.1.10">
<h3 data-number="6.1.10" class="anchored" data-anchor-id="aplicações-em-econometria"><span class="header-section-number">6.1.10</span> Aplicações em Econometria</h3>
<section id="estimação-por-mínimos-quadrados-ordinários" class="level4" data-number="6.1.10.1">
<h4 data-number="6.1.10.1" class="anchored" data-anchor-id="estimação-por-mínimos-quadrados-ordinários"><span class="header-section-number">6.1.10.1</span> Estimação por Mínimos Quadrados Ordinários</h4>
<p>A estimação por MQO utiliza intensivamente álgebra matricial. Para o modelo <span class="math inline">Y = X\beta + \varepsilon</span>, o estimador de MQO é <span class="math inline">\hat{\beta} = (X'X)^(-1)X'Y</span>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulando dados</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">789</span>)</span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a>X_reg <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="dv">1</span>, <span class="fu">rnorm</span>(n), <span class="fu">rnorm</span>(n))  <span class="co"># Intercepto + 2 regressores</span></span>
<span id="cb163-5"><a href="#cb163-5" aria-hidden="true" tabindex="-1"></a>beta_true <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="fl">1.5</span>, <span class="sc">-</span><span class="fl">0.8</span>)</span>
<span id="cb163-6"><a href="#cb163-6" aria-hidden="true" tabindex="-1"></a>epsilon <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, <span class="dv">0</span>, <span class="dv">2</span>)</span>
<span id="cb163-7"><a href="#cb163-7" aria-hidden="true" tabindex="-1"></a>Y <span class="ot">&lt;-</span> X_reg <span class="sc">%*%</span> beta_true <span class="sc">+</span> epsilon</span>
<span id="cb163-8"><a href="#cb163-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-9"><a href="#cb163-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimação: β̂ = (X'X)⁻¹X'Y</span></span>
<span id="cb163-10"><a href="#cb163-10" aria-hidden="true" tabindex="-1"></a>XtX <span class="ot">&lt;-</span> <span class="fu">t</span>(X_reg) <span class="sc">%*%</span> X_reg</span>
<span id="cb163-11"><a href="#cb163-11" aria-hidden="true" tabindex="-1"></a>XtY <span class="ot">&lt;-</span> <span class="fu">t</span>(X_reg) <span class="sc">%*%</span> Y</span>
<span id="cb163-12"><a href="#cb163-12" aria-hidden="true" tabindex="-1"></a>beta_hat <span class="ot">&lt;-</span> <span class="fu">solve</span>(XtX) <span class="sc">%*%</span> XtY</span>
<span id="cb163-13"><a href="#cb163-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-14"><a href="#cb163-14" aria-hidden="true" tabindex="-1"></a>beta_hat</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           [,1]
[1,]  1.8129163
[2,]  1.6714639
[3,] -0.8985624</code></pre>
</div>
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>beta_true  <span class="co"># Para comparação</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2.0  1.5 -0.8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Matriz de covariância dos estimadores: σ²(X'X)⁻¹</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>residuos <span class="ot">&lt;-</span> Y <span class="sc">-</span> X_reg <span class="sc">%*%</span> beta_hat</span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a>sigma2_hat <span class="ot">&lt;-</span> <span class="fu">sum</span>(residuos<span class="sc">^</span><span class="dv">2</span>) <span class="sc">/</span> (n <span class="sc">-</span> <span class="fu">ncol</span>(X_reg))</span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true" tabindex="-1"></a>cov_beta <span class="ot">&lt;-</span> sigma2_hat <span class="sc">*</span> <span class="fu">solve</span>(XtX)</span>
<span id="cb167-5"><a href="#cb167-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-6"><a href="#cb167-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Erros padrão</span></span>
<span id="cb167-7"><a href="#cb167-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="fu">diag</span>(cov_beta))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1978563 0.2032500 0.1907543</code></pre>
</div>
</div>
</section>
<section id="matriz-de-projeção" class="level4" data-number="6.1.10.2">
<h4 data-number="6.1.10.2" class="anchored" data-anchor-id="matriz-de-projeção"><span class="header-section-number">6.1.10.2</span> Matriz de Projeção</h4>
<p>A matriz de projeção <span class="math inline">H = X(X'X)^(-1)X'</span> projeta o vetor <span class="math inline">Y</span> no espaço gerado pelas colunas de <span class="math inline">X</span>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Matriz "hat" (projeção)</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>H <span class="ot">&lt;-</span> X_reg <span class="sc">%*%</span> <span class="fu">solve</span>(XtX) <span class="sc">%*%</span> <span class="fu">t</span>(X_reg)</span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Propriedades importantes</span></span>
<span id="cb169-5"><a href="#cb169-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">diag</span>(H))  <span class="co"># Traço = número de parâmetros</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(X_reg)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Idempotência: H² = H</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a><span class="fu">all.equal</span>(H, H <span class="sc">%*%</span> H, <span class="at">tolerance =</span> <span class="fl">1e-10</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simetria</span></span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a><span class="fu">isSymmetric</span>(H)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="sec-listas" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="sec-listas"><span class="header-section-number">6.2</span> Listas</h2>
<p>Listas são as estruturas mais flexíveis do R, fundamentais em econometria para armazenar resultados de simulações, outputs de modelos estatísticos e organizar dados de diferentes tipos e dimensões. São especialmente úteis em simulações de Monte Carlo e no desenvolvimento de funções econométricas personalizadas.</p>
<section id="características-das-listas" class="level3" data-number="6.2.1">
<h3 data-number="6.2.1" class="anchored" data-anchor-id="características-das-listas"><span class="header-section-number">6.2.1</span> Características das Listas</h3>
<ul>
<li><strong>Heterogeneidade</strong>: Podem conter elementos de tipos diferentes (números, matrizes, data frames, outras listas)</li>
<li><strong>Flexibilidade</strong>: Cada elemento pode ser de qualquer classe ou estrutura</li>
<li><strong>Aninhamento</strong>: Podem conter outras listas (estruturas hierárquicas)</li>
<li><strong>Nomeação</strong>: Elementos podem ter nomes para acesso facilitado</li>
<li><strong>Armazenamento de resultados</strong>: Ideais para guardar outputs complexos de análises</li>
</ul>
</section>
<section id="criando-listas-para-análises-econométricas" class="level3" data-number="6.2.2">
<h3 data-number="6.2.2" class="anchored" data-anchor-id="criando-listas-para-análises-econométricas"><span class="header-section-number">6.2.2</span> Criando Listas para Análises Econométricas</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lista para armazenar resultados de um modelo de regressão</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="dv">1</span>, <span class="fu">rnorm</span>(n), <span class="fu">rnorm</span>(n))  <span class="co"># Matriz de regressores</span></span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true" tabindex="-1"></a>beta_true <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="fl">1.5</span>, <span class="sc">-</span><span class="fl">0.8</span>)      <span class="co"># Parâmetros verdadeiros</span></span>
<span id="cb177-6"><a href="#cb177-6" aria-hidden="true" tabindex="-1"></a>epsilon <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, <span class="dv">0</span>, <span class="dv">2</span>)          <span class="co"># Termo de erro</span></span>
<span id="cb177-7"><a href="#cb177-7" aria-hidden="true" tabindex="-1"></a>Y <span class="ot">&lt;-</span> X <span class="sc">%*%</span> beta_true <span class="sc">+</span> epsilon     <span class="co"># Variável dependente</span></span>
<span id="cb177-8"><a href="#cb177-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-9"><a href="#cb177-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimação do modelo</span></span>
<span id="cb177-10"><a href="#cb177-10" aria-hidden="true" tabindex="-1"></a>XtX_inv <span class="ot">&lt;-</span> <span class="fu">solve</span>(<span class="fu">t</span>(X) <span class="sc">%*%</span> X)</span>
<span id="cb177-11"><a href="#cb177-11" aria-hidden="true" tabindex="-1"></a>beta_hat <span class="ot">&lt;-</span> XtX_inv <span class="sc">%*%</span> <span class="fu">t</span>(X) <span class="sc">%*%</span> Y</span>
<span id="cb177-12"><a href="#cb177-12" aria-hidden="true" tabindex="-1"></a>residuos <span class="ot">&lt;-</span> Y <span class="sc">-</span> X <span class="sc">%*%</span> beta_hat</span>
<span id="cb177-13"><a href="#cb177-13" aria-hidden="true" tabindex="-1"></a>sigma2_hat <span class="ot">&lt;-</span> <span class="fu">sum</span>(residuos<span class="sc">^</span><span class="dv">2</span>) <span class="sc">/</span> (n <span class="sc">-</span> <span class="fu">ncol</span>(X))</span>
<span id="cb177-14"><a href="#cb177-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-15"><a href="#cb177-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Armazenando resultados em uma lista</span></span>
<span id="cb177-16"><a href="#cb177-16" aria-hidden="true" tabindex="-1"></a>resultado_regressao <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb177-17"><a href="#cb177-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">coeficientes =</span> <span class="fu">as.vector</span>(beta_hat),</span>
<span id="cb177-18"><a href="#cb177-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">matriz_covariancia =</span> sigma2_hat <span class="sc">*</span> XtX_inv,</span>
<span id="cb177-19"><a href="#cb177-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">residuos =</span> <span class="fu">as.vector</span>(residuos),</span>
<span id="cb177-20"><a href="#cb177-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">R_quadrado =</span> <span class="dv">1</span> <span class="sc">-</span> <span class="fu">sum</span>(residuos<span class="sc">^</span><span class="dv">2</span>) <span class="sc">/</span> <span class="fu">sum</span>((Y <span class="sc">-</span> <span class="fu">mean</span>(Y))<span class="sc">^</span><span class="dv">2</span>),</span>
<span id="cb177-21"><a href="#cb177-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">graus_liberdade =</span> n <span class="sc">-</span> <span class="fu">ncol</span>(X),</span>
<span id="cb177-22"><a href="#cb177-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">observacoes =</span> n,</span>
<span id="cb177-23"><a href="#cb177-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">dados =</span> <span class="fu">list</span>(<span class="at">X =</span> X, <span class="at">Y =</span> Y)</span>
<span id="cb177-24"><a href="#cb177-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb177-25"><a href="#cb177-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-26"><a href="#cb177-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizando a estrutura da lista</span></span>
<span id="cb177-27"><a href="#cb177-27" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(resultado_regressao)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 7
 $ coeficientes      : num [1:3] 2.27 1.234 -0.752
 $ matriz_covariancia: num [1:3, 1:3] 0.03697 -0.00376 0.00403 -0.00376 0.04399 ...
 $ residuos          : num [1:100] 4.012 2.281 -0.374 0.852 -1.019 ...
 $ R_quadrado        : num 0.346
 $ graus_liberdade   : num 97
 $ observacoes       : num 100
 $ dados             :List of 2
  ..$ X: num [1:100, 1:3] 1 1 1 1 1 1 1 1 1 1 ...
  ..$ Y: num [1:100, 1] 6.13 4.07 4.01 3.47 2.13 ...</code></pre>
</div>
</div>
</section>
<section id="acessando-elementos-de-listas" class="level3" data-number="6.2.3">
<h3 data-number="6.2.3" class="anchored" data-anchor-id="acessando-elementos-de-listas"><span class="header-section-number">6.2.3</span> Acessando Elementos de Listas</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Acesso por nome com $</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>resultado_regressao<span class="sc">$</span>coeficientes</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2.2701309  1.2336569 -0.7523774</code></pre>
</div>
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Acesso por nome com [[]]</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>resultado_regressao[[<span class="st">"R_quadrado"</span>]]</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3462614</code></pre>
</div>
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Acesso por índice</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>resultado_regressao[[<span class="dv">4</span>]]  <span class="co"># R-quadrado</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3462614</code></pre>
</div>
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Acesso a elementos aninhados</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>resultado_regressao<span class="sc">$</span>dados<span class="sc">$</span>Y[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]  <span class="co"># Primeiras 5 observações de Y</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6.125232 4.074053 4.005126 3.470185 2.126547</code></pre>
</div>
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Múltiplos elementos (retorna uma lista)</span></span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a>resultado_regressao[<span class="fu">c</span>(<span class="st">"coeficientes"</span>, <span class="st">"R_quadrado"</span>)]</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$coeficientes
[1]  2.2701309  1.2336569 -0.7523774

$R_quadrado
[1] 0.3462614</code></pre>
</div>
</div>
</section>
<section id="simulação-de-monte-carlo-com-listas" class="level3" data-number="6.2.4">
<h3 data-number="6.2.4" class="anchored" data-anchor-id="simulação-de-monte-carlo-com-listas"><span class="header-section-number">6.2.4</span> Simulação de Monte Carlo com Listas</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Função para simulação de Monte Carlo</span></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a>simulacao_regressao <span class="ot">&lt;-</span> <span class="cf">function</span>(n, beta_true, sigma, <span class="at">n_sim =</span> <span class="dv">1000</span>) {</span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb189-4"><a href="#cb189-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Lista para armazenar resultados de cada simulação</span></span>
<span id="cb189-5"><a href="#cb189-5" aria-hidden="true" tabindex="-1"></a>  resultados <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb189-6"><a href="#cb189-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb189-7"><a href="#cb189-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n_sim) {</span>
<span id="cb189-8"><a href="#cb189-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Gerando dados</span></span>
<span id="cb189-9"><a href="#cb189-9" aria-hidden="true" tabindex="-1"></a>    X <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="dv">1</span>, <span class="fu">rnorm</span>(n), <span class="fu">rnorm</span>(n))</span>
<span id="cb189-10"><a href="#cb189-10" aria-hidden="true" tabindex="-1"></a>    epsilon <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, <span class="dv">0</span>, sigma)</span>
<span id="cb189-11"><a href="#cb189-11" aria-hidden="true" tabindex="-1"></a>    Y <span class="ot">&lt;-</span> X <span class="sc">%*%</span> beta_true <span class="sc">+</span> epsilon</span>
<span id="cb189-12"><a href="#cb189-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb189-13"><a href="#cb189-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Estimando parâmetros</span></span>
<span id="cb189-14"><a href="#cb189-14" aria-hidden="true" tabindex="-1"></a>    beta_hat <span class="ot">&lt;-</span> <span class="fu">solve</span>(<span class="fu">t</span>(X) <span class="sc">%*%</span> X) <span class="sc">%*%</span> <span class="fu">t</span>(X) <span class="sc">%*%</span> Y</span>
<span id="cb189-15"><a href="#cb189-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb189-16"><a href="#cb189-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Armazenando resultado da i-ésima simulação</span></span>
<span id="cb189-17"><a href="#cb189-17" aria-hidden="true" tabindex="-1"></a>    resultados[[i]] <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb189-18"><a href="#cb189-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">beta_hat =</span> <span class="fu">as.vector</span>(beta_hat),</span>
<span id="cb189-19"><a href="#cb189-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">iteracao =</span> i</span>
<span id="cb189-20"><a href="#cb189-20" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb189-21"><a href="#cb189-21" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb189-22"><a href="#cb189-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb189-23"><a href="#cb189-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(resultados)</span>
<span id="cb189-24"><a href="#cb189-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb189-25"><a href="#cb189-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-26"><a href="#cb189-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Executando simulação (versão reduzida para demonstração)</span></span>
<span id="cb189-27"><a href="#cb189-27" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">456</span>)</span>
<span id="cb189-28"><a href="#cb189-28" aria-hidden="true" tabindex="-1"></a>sim_resultados <span class="ot">&lt;-</span> <span class="fu">simulacao_regressao</span>(</span>
<span id="cb189-29"><a href="#cb189-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">n =</span> <span class="dv">50</span>, </span>
<span id="cb189-30"><a href="#cb189-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">beta_true =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>), </span>
<span id="cb189-31"><a href="#cb189-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">sigma =</span> <span class="dv">1</span>, </span>
<span id="cb189-32"><a href="#cb189-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">n_sim =</span> <span class="dv">100</span></span>
<span id="cb189-33"><a href="#cb189-33" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb189-34"><a href="#cb189-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-35"><a href="#cb189-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Analisando resultados da simulação</span></span>
<span id="cb189-36"><a href="#cb189-36" aria-hidden="true" tabindex="-1"></a>betas_simulados <span class="ot">&lt;-</span> <span class="fu">sapply</span>(sim_resultados, <span class="cf">function</span>(x) x<span class="sc">$</span>beta_hat)</span>
<span id="cb189-37"><a href="#cb189-37" aria-hidden="true" tabindex="-1"></a>media_betas <span class="ot">&lt;-</span> <span class="fu">rowMeans</span>(betas_simulados)</span>
<span id="cb189-38"><a href="#cb189-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-39"><a href="#cb189-39" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Parâmetros verdadeiros:"</span>, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Parâmetros verdadeiros: 1 2 -1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Média das estimativas:"</span>, <span class="fu">round</span>(media_betas, <span class="dv">3</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Média das estimativas: 1.013 2 -1.002 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Número de simulações:"</span>, <span class="fu">length</span>(sim_resultados), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Número de simulações: 100 </code></pre>
</div>
</div>
</section>
<section id="organizando-resultados-de-múltiplos-modelos" class="level3" data-number="6.2.5">
<h3 data-number="6.2.5" class="anchored" data-anchor-id="organizando-resultados-de-múltiplos-modelos"><span class="header-section-number">6.2.5</span> Organizando Resultados de Múltiplos Modelos</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Função para estimar e comparar diferentes modelos</span></span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a>comparar_modelos <span class="ot">&lt;-</span> <span class="cf">function</span>(Y, X1, X2, X3) {</span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb195-4"><a href="#cb195-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Modelo 1: apenas X1</span></span>
<span id="cb195-5"><a href="#cb195-5" aria-hidden="true" tabindex="-1"></a>  modelo1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Y <span class="sc">~</span> X1)</span>
<span id="cb195-6"><a href="#cb195-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb195-7"><a href="#cb195-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Modelo 2: X1 e X2</span></span>
<span id="cb195-8"><a href="#cb195-8" aria-hidden="true" tabindex="-1"></a>  modelo2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Y <span class="sc">~</span> X1 <span class="sc">+</span> X2)</span>
<span id="cb195-9"><a href="#cb195-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb195-10"><a href="#cb195-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Modelo 3: X1, X2 e X3</span></span>
<span id="cb195-11"><a href="#cb195-11" aria-hidden="true" tabindex="-1"></a>  modelo3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Y <span class="sc">~</span> X1 <span class="sc">+</span> X2 <span class="sc">+</span> X3)</span>
<span id="cb195-12"><a href="#cb195-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb195-13"><a href="#cb195-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Organizando resultados em lista</span></span>
<span id="cb195-14"><a href="#cb195-14" aria-hidden="true" tabindex="-1"></a>  comparacao <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb195-15"><a href="#cb195-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">modelo_1 =</span> <span class="fu">list</span>(</span>
<span id="cb195-16"><a href="#cb195-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">coeficientes =</span> <span class="fu">coef</span>(modelo1),</span>
<span id="cb195-17"><a href="#cb195-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">R2 =</span> <span class="fu">summary</span>(modelo1)<span class="sc">$</span>r.squared,</span>
<span id="cb195-18"><a href="#cb195-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">AIC =</span> <span class="fu">AIC</span>(modelo1),</span>
<span id="cb195-19"><a href="#cb195-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">n_parametros =</span> <span class="fu">length</span>(<span class="fu">coef</span>(modelo1))</span>
<span id="cb195-20"><a href="#cb195-20" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb195-21"><a href="#cb195-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">modelo_2 =</span> <span class="fu">list</span>(</span>
<span id="cb195-22"><a href="#cb195-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">coeficientes =</span> <span class="fu">coef</span>(modelo2),</span>
<span id="cb195-23"><a href="#cb195-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">R2 =</span> <span class="fu">summary</span>(modelo2)<span class="sc">$</span>r.squared,</span>
<span id="cb195-24"><a href="#cb195-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">AIC =</span> <span class="fu">AIC</span>(modelo2),</span>
<span id="cb195-25"><a href="#cb195-25" aria-hidden="true" tabindex="-1"></a>      <span class="at">n_parametros =</span> <span class="fu">length</span>(<span class="fu">coef</span>(modelo2))</span>
<span id="cb195-26"><a href="#cb195-26" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb195-27"><a href="#cb195-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">modelo_3 =</span> <span class="fu">list</span>(</span>
<span id="cb195-28"><a href="#cb195-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">coeficientes =</span> <span class="fu">coef</span>(modelo3),</span>
<span id="cb195-29"><a href="#cb195-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">R2 =</span> <span class="fu">summary</span>(modelo3)<span class="sc">$</span>r.squared,</span>
<span id="cb195-30"><a href="#cb195-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">AIC =</span> <span class="fu">AIC</span>(modelo3),</span>
<span id="cb195-31"><a href="#cb195-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">n_parametros =</span> <span class="fu">length</span>(<span class="fu">coef</span>(modelo3))</span>
<span id="cb195-32"><a href="#cb195-32" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb195-33"><a href="#cb195-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">criterios_selecao =</span> <span class="fu">data.frame</span>(</span>
<span id="cb195-34"><a href="#cb195-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">Modelo =</span> <span class="fu">c</span>(<span class="st">"Modelo 1"</span>, <span class="st">"Modelo 2"</span>, <span class="st">"Modelo 3"</span>),</span>
<span id="cb195-35"><a href="#cb195-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">R2 =</span> <span class="fu">c</span>(<span class="fu">summary</span>(modelo1)<span class="sc">$</span>r.squared, </span>
<span id="cb195-36"><a href="#cb195-36" aria-hidden="true" tabindex="-1"></a>             <span class="fu">summary</span>(modelo2)<span class="sc">$</span>r.squared, </span>
<span id="cb195-37"><a href="#cb195-37" aria-hidden="true" tabindex="-1"></a>             <span class="fu">summary</span>(modelo3)<span class="sc">$</span>r.squared),</span>
<span id="cb195-38"><a href="#cb195-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">AIC =</span> <span class="fu">c</span>(<span class="fu">AIC</span>(modelo1), <span class="fu">AIC</span>(modelo2), <span class="fu">AIC</span>(modelo3))</span>
<span id="cb195-39"><a href="#cb195-39" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb195-40"><a href="#cb195-40" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb195-41"><a href="#cb195-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb195-42"><a href="#cb195-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(comparacao)</span>
<span id="cb195-43"><a href="#cb195-43" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb195-44"><a href="#cb195-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-45"><a href="#cb195-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Gerando dados para demonstração</span></span>
<span id="cb195-46"><a href="#cb195-46" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">789</span>)</span>
<span id="cb195-47"><a href="#cb195-47" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">80</span></span>
<span id="cb195-48"><a href="#cb195-48" aria-hidden="true" tabindex="-1"></a>X1 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n)</span>
<span id="cb195-49"><a href="#cb195-49" aria-hidden="true" tabindex="-1"></a>X2 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n)</span>
<span id="cb195-50"><a href="#cb195-50" aria-hidden="true" tabindex="-1"></a>X3 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n)</span>
<span id="cb195-51"><a href="#cb195-51" aria-hidden="true" tabindex="-1"></a>Y <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">+</span> <span class="fl">1.5</span><span class="sc">*</span>X1 <span class="sc">+</span> <span class="fl">0.8</span><span class="sc">*</span>X2 <span class="sc">+</span> <span class="fu">rnorm</span>(n, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb195-52"><a href="#cb195-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-53"><a href="#cb195-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Executando comparação</span></span>
<span id="cb195-54"><a href="#cb195-54" aria-hidden="true" tabindex="-1"></a>resultados_comparacao <span class="ot">&lt;-</span> <span class="fu">comparar_modelos</span>(Y, X1, X2, X3)</span>
<span id="cb195-55"><a href="#cb195-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-56"><a href="#cb195-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Acessando resultados</span></span>
<span id="cb195-57"><a href="#cb195-57" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Critérios de Seleção:"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Critérios de Seleção:"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(resultados_comparacao<span class="sc">$</span>criterios_selecao)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Modelo        R2      AIC
1 Modelo 1 0.5164472 280.1806
2 Modelo 2 0.7801518 219.1228
3 Modelo 3 0.7872469 218.4984</code></pre>
</div>
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">R² do melhor modelo:"</span>, </span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">max</span>(resultados_comparacao<span class="sc">$</span>criterios_selecao<span class="sc">$</span>R2), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
R² do melhor modelo: 0.7872469 </code></pre>
</div>
</div>
</section>
<section id="armazenando-resultados-de-testes-econométricos" class="level3" data-number="6.2.6">
<h3 data-number="6.2.6" class="anchored" data-anchor-id="armazenando-resultados-de-testes-econométricos"><span class="header-section-number">6.2.6</span> Armazenando Resultados de Testes Econométricos</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Função para realizar múltiplos testes diagnósticos</span></span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a>testes_diagnosticos <span class="ot">&lt;-</span> <span class="cf">function</span>(modelo) {</span>
<span id="cb201-3"><a href="#cb201-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb201-4"><a href="#cb201-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Teste de normalidade dos resíduos (Shapiro-Wilk)</span></span>
<span id="cb201-5"><a href="#cb201-5" aria-hidden="true" tabindex="-1"></a>  teste_normalidade <span class="ot">&lt;-</span> <span class="fu">shapiro.test</span>(<span class="fu">residuals</span>(modelo))</span>
<span id="cb201-6"><a href="#cb201-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb201-7"><a href="#cb201-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Teste de heterocedasticidade (Breusch-Pagan simplificado)</span></span>
<span id="cb201-8"><a href="#cb201-8" aria-hidden="true" tabindex="-1"></a>  residuos2 <span class="ot">&lt;-</span> <span class="fu">residuals</span>(modelo)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb201-9"><a href="#cb201-9" aria-hidden="true" tabindex="-1"></a>  valores_ajustados <span class="ot">&lt;-</span> <span class="fu">fitted</span>(modelo)</span>
<span id="cb201-10"><a href="#cb201-10" aria-hidden="true" tabindex="-1"></a>  teste_hetero <span class="ot">&lt;-</span> <span class="fu">summary</span>(<span class="fu">lm</span>(residuos2 <span class="sc">~</span> valores_ajustados))</span>
<span id="cb201-11"><a href="#cb201-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb201-12"><a href="#cb201-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Organizando resultados em lista estruturada</span></span>
<span id="cb201-13"><a href="#cb201-13" aria-hidden="true" tabindex="-1"></a>  diagnosticos <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb201-14"><a href="#cb201-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">normalidade =</span> <span class="fu">list</span>(</span>
<span id="cb201-15"><a href="#cb201-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">estatistica =</span> teste_normalidade<span class="sc">$</span>statistic,</span>
<span id="cb201-16"><a href="#cb201-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">p_valor =</span> teste_normalidade<span class="sc">$</span>p.value,</span>
<span id="cb201-17"><a href="#cb201-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">interpretacao =</span> <span class="fu">ifelse</span>(teste_normalidade<span class="sc">$</span>p.value <span class="sc">&gt;</span> <span class="fl">0.05</span>, </span>
<span id="cb201-18"><a href="#cb201-18" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Resíduos seguem distribuição normal"</span>, </span>
<span id="cb201-19"><a href="#cb201-19" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Evidência contra normalidade"</span>)</span>
<span id="cb201-20"><a href="#cb201-20" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb201-21"><a href="#cb201-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">heterocedasticidade =</span> <span class="fu">list</span>(</span>
<span id="cb201-22"><a href="#cb201-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">R2 =</span> teste_hetero<span class="sc">$</span>r.squared,</span>
<span id="cb201-23"><a href="#cb201-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">F_estatistica =</span> teste_hetero<span class="sc">$</span>fstatistic[<span class="dv">1</span>],</span>
<span id="cb201-24"><a href="#cb201-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">interpretacao =</span> <span class="fu">ifelse</span>(teste_hetero<span class="sc">$</span>r.squared <span class="sc">&lt;</span> <span class="fl">0.1</span>, </span>
<span id="cb201-25"><a href="#cb201-25" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Não há evidência de heterocedasticidade"</span>, </span>
<span id="cb201-26"><a href="#cb201-26" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Possível heterocedasticidade"</span>)</span>
<span id="cb201-27"><a href="#cb201-27" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb201-28"><a href="#cb201-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">resumo_modelo =</span> <span class="fu">list</span>(</span>
<span id="cb201-29"><a href="#cb201-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">R2_ajustado =</span> <span class="fu">summary</span>(modelo)<span class="sc">$</span>adj.r.squared,</span>
<span id="cb201-30"><a href="#cb201-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">erro_padrao =</span> <span class="fu">summary</span>(modelo)<span class="sc">$</span>sigma,</span>
<span id="cb201-31"><a href="#cb201-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">observacoes =</span> <span class="fu">nobs</span>(modelo)</span>
<span id="cb201-32"><a href="#cb201-32" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb201-33"><a href="#cb201-33" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb201-34"><a href="#cb201-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb201-35"><a href="#cb201-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(diagnosticos)</span>
<span id="cb201-36"><a href="#cb201-36" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb201-37"><a href="#cb201-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-38"><a href="#cb201-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicando função de testes</span></span>
<span id="cb201-39"><a href="#cb201-39" aria-hidden="true" tabindex="-1"></a>modelo_exemplo <span class="ot">&lt;-</span> <span class="fu">lm</span>(Y <span class="sc">~</span> X1 <span class="sc">+</span> X2)</span>
<span id="cb201-40"><a href="#cb201-40" aria-hidden="true" tabindex="-1"></a>resultados_testes <span class="ot">&lt;-</span> <span class="fu">testes_diagnosticos</span>(modelo_exemplo)</span>
<span id="cb201-41"><a href="#cb201-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-42"><a href="#cb201-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizando resultados</span></span>
<span id="cb201-43"><a href="#cb201-43" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(resultados_testes, <span class="at">max.level =</span> <span class="dv">2</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 3
 $ normalidade        :List of 3
  ..$ estatistica  : Named num 0.973
  .. ..- attr(*, "names")= chr "W"
  ..$ p_valor      : num 0.0887
  ..$ interpretacao: chr "Resíduos seguem distribuição normal"
 $ heterocedasticidade:List of 3
  ..$ R2           : num 0.00434
  ..$ F_estatistica: Named num 0.34
  .. ..- attr(*, "names")= chr "value"
  ..$ interpretacao: chr "Não há evidência de heterocedasticidade"
 $ resumo_modelo      :List of 3
  ..$ R2_ajustado: num 0.774
  ..$ erro_padrao: num 0.923
  ..$ observacoes: int 80</code></pre>
</div>
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(resultados_testes<span class="sc">$</span>normalidade<span class="sc">$</span>interpretacao)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Resíduos seguem distribuição normal"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb205"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(resultados_testes<span class="sc">$</span>heterocedasticidade<span class="sc">$</span>interpretacao)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Não há evidência de heterocedasticidade"</code></pre>
</div>
</div>
</section>
</section>
<section id="sec-dataframes" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="sec-dataframes"><span class="header-section-number">6.3</span> Data Frames</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Fundamentos das Estruturas Tabulares
</div>
</div>
<div class="callout-body-container callout-body">
<p>As estruturas tabulares organizam informações em formato de tabela, com linhas representando observações e colunas representando variáveis. Data frames e tibbles constituem a base para a maioria das análises estatísticas e financeiras.</p>
<p>Estas estruturas permitem:</p>
<ul>
<li>Armazenar dados heterogêneos (números, textos, valores lógicos) de forma organizada</li>
<li>Aplicar operações estatísticas e transformações por variável</li>
<li>Integrar-se com pacotes especializados para análises avançadas</li>
<li>Facilitar a importação e exportação de dados de diversas fontes</li>
</ul>
<p>Diferentemente das matrizes (homogêneas), data frames e tibbles permitem colunas de tipos diferentes, sendo ideais para conjuntos de dados típicos em administração e finanças.</p>
</div>
</div>
<p>O data frame é a estrutura de dados mais utilizada em R para análises estatísticas. Conceptualmente similar a uma planilha, um data frame organiza dados em formato retangular onde cada linha representa uma observação e cada coluna representa uma variável.</p>
<section id="características-fundamentais" class="level3" data-number="6.3.1">
<h3 data-number="6.3.1" class="anchored" data-anchor-id="características-fundamentais"><span class="header-section-number">6.3.1</span> Características Fundamentais</h3>
<p>Um data frame possui as seguintes características essenciais:</p>
<ul>
<li><strong>Estrutura retangular</strong>: Todas as colunas devem ter o mesmo comprimento</li>
<li><strong>Colunas heterogêneas</strong>: Cada coluna pode conter um tipo diferente de dados</li>
<li><strong>Colunas homogêneas</strong>: Dentro de cada coluna, todos os elementos devem ser do mesmo tipo</li>
<li><strong>Indexação</strong>: Linhas e colunas podem ser acessadas por índices numéricos ou nomes</li>
</ul>
</section>
<section id="criando-data-frames" class="level3" data-number="6.3.2">
<h3 data-number="6.3.2" class="anchored" data-anchor-id="criando-data-frames"><span class="header-section-number">6.3.2</span> Criando Data Frames</h3>
<p>A função <code>data.frame()</code> permite criar estruturas tabulares combinando vetores de mesmo comprimento:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dados de desempenho empresarial</span></span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a>empresa <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"TechCorp"</span>, <span class="st">"FinanceMax"</span>, <span class="st">"RetailPlus"</span>)</span>
<span id="cb207-3"><a href="#cb207-3" aria-hidden="true" tabindex="-1"></a>receita_milhoes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">125.8</span>, <span class="fl">89.3</span>, <span class="fl">156.7</span>)</span>
<span id="cb207-4"><a href="#cb207-4" aria-hidden="true" tabindex="-1"></a>crescimento_percentual <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">12.5</span>, <span class="sc">-</span><span class="fl">3.2</span>, <span class="fl">8.9</span>)</span>
<span id="cb207-5"><a href="#cb207-5" aria-hidden="true" tabindex="-1"></a>meta_atingida <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb207-6"><a href="#cb207-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-7"><a href="#cb207-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando o data frame</span></span>
<span id="cb207-8"><a href="#cb207-8" aria-hidden="true" tabindex="-1"></a>desempenho_empresas <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb207-9"><a href="#cb207-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">empresa =</span> empresa,</span>
<span id="cb207-10"><a href="#cb207-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">receita_milhoes =</span> receita_milhoes,</span>
<span id="cb207-11"><a href="#cb207-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">crescimento_percentual =</span> crescimento_percentual,</span>
<span id="cb207-12"><a href="#cb207-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">meta_atingida =</span> meta_atingida</span>
<span id="cb207-13"><a href="#cb207-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb207-14"><a href="#cb207-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-15"><a href="#cb207-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Exibindo o resultado</span></span>
<span id="cb207-16"><a href="#cb207-16" aria-hidden="true" tabindex="-1"></a>desempenho_empresas</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     empresa receita_milhoes crescimento_percentual meta_atingida
1   TechCorp           125.8                   12.5          TRUE
2 FinanceMax            89.3                   -3.2         FALSE
3 RetailPlus           156.7                    8.9          TRUE</code></pre>
</div>
</div>
</section>
<section id="estrutura-e-propriedades" class="level3" data-number="6.3.3">
<h3 data-number="6.3.3" class="anchored" data-anchor-id="estrutura-e-propriedades"><span class="header-section-number">6.3.3</span> Estrutura e Propriedades</h3>
<p>Para compreender a estrutura interna de um data frame, utilizamos funções específicas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estrutura detalhada do objeto</span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(desempenho_empresas)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   3 obs. of  4 variables:
 $ empresa               : chr  "TechCorp" "FinanceMax" "RetailPlus"
 $ receita_milhoes       : num  125.8 89.3 156.7
 $ crescimento_percentual: num  12.5 -3.2 8.9
 $ meta_atingida         : logi  TRUE FALSE TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dimensões: linhas e colunas</span></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(desempenho_empresas)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nomes das colunas</span></span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(desempenho_empresas)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "empresa"                "receita_milhoes"        "crescimento_percentual"
[4] "meta_atingida"         </code></pre>
</div>
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nomes das linhas</span></span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(desempenho_empresas)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1" "2" "3"</code></pre>
</div>
</div>
</section>
<section id="acesso-a-dados" class="level3" data-number="6.3.4">
<h3 data-number="6.3.4" class="anchored" data-anchor-id="acesso-a-dados"><span class="header-section-number">6.3.4</span> Acesso a Dados</h3>
<p>R oferece múltiplas formas de acessar elementos em data frames:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Acessando uma coluna específica pelo nome</span></span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a>desempenho_empresas<span class="sc">$</span>receita_milhoes</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 125.8  89.3 156.7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Acessando múltiplas colunas</span></span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true" tabindex="-1"></a>desempenho_empresas[<span class="fu">c</span>(<span class="st">"empresa"</span>, <span class="st">"receita_milhoes"</span>)]</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     empresa receita_milhoes
1   TechCorp           125.8
2 FinanceMax            89.3
3 RetailPlus           156.7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Acessando por índices: linha 2, coluna 3</span></span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a>desempenho_empresas[<span class="dv">2</span>, <span class="dv">3</span>]</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -3.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtrando observações por condição</span></span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a>desempenho_empresas[desempenho_empresas<span class="sc">$</span>meta_atingida <span class="sc">==</span> <span class="cn">TRUE</span>, ]</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     empresa receita_milhoes crescimento_percentual meta_atingida
1   TechCorp           125.8                   12.5          TRUE
3 RetailPlus           156.7                    8.9          TRUE</code></pre>
</div>
</div>
</section>
<section id="resumo-estatístico" class="level3" data-number="6.3.5">
<h3 data-number="6.3.5" class="anchored" data-anchor-id="resumo-estatístico"><span class="header-section-number">6.3.5</span> Resumo Estatístico</h3>
<p>Para análises preliminares, a função <code>summary()</code> fornece estatísticas descritivas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(desempenho_empresas)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   empresa          receita_milhoes crescimento_percentual meta_atingida  
 Length:3           Min.   : 89.3   Min.   :-3.200         Mode :logical  
 Class :character   1st Qu.:107.5   1st Qu.: 2.850         FALSE:1        
 Mode  :character   Median :125.8   Median : 8.900         TRUE :2        
                    Mean   :123.9   Mean   : 6.067                        
                    3rd Qu.:141.2   3rd Qu.:10.700                        
                    Max.   :156.7   Max.   :12.500                        </code></pre>
</div>
</div>
</section>
</section>
<section id="sec-tibbles" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="sec-tibbles"><span class="header-section-number">6.4</span> Tibbles</h2>
<p>Tibbles são uma versão modernizada dos data frames, desenvolvida como parte do ecosistema tidyverse. Mantêm compatibilidade com data frames tradicionais, mas incorporam melhorias significativas para análise de dados contemporânea.</p>
<section id="principais-vantagens-dos-tibbles" class="level3" data-number="6.4.1">
<h3 data-number="6.4.1" class="anchored" data-anchor-id="principais-vantagens-dos-tibbles"><span class="header-section-number">6.4.1</span> Principais Vantagens dos Tibbles</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Melhorias em Relação aos Data Frames
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Exibição otimizada</strong>: Apresenta automaticamente apenas as primeiras linhas e colunas, evitando sobrecarga visual</li>
<li><strong>Informações de tipos</strong>: Exibe o tipo de cada coluna na visualização</li>
<li><strong>Comportamento previsível</strong>: Evita conversões automáticas indesejadas (como texto para fator)</li>
<li><strong>Performance superior</strong>: Operações mais eficientes com conjuntos grandes de dados</li>
<li><strong>Integração com tidyverse</strong>: Compatibilidade total com pacotes modernos de análise</li>
</ul>
</div>
</div>
</section>
<section id="convertendo-data-frames-para-tibbles" class="level3" data-number="6.4.2">
<h3 data-number="6.4.2" class="anchored" data-anchor-id="convertendo-data-frames-para-tibbles"><span class="header-section-number">6.4.2</span> Convertendo Data Frames para Tibbles</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertendo o data frame em tibble</span></span>
<span id="cb227-4"><a href="#cb227-4" aria-hidden="true" tabindex="-1"></a>desempenho_tibble <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(desempenho_empresas)</span>
<span id="cb227-5"><a href="#cb227-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-6"><a href="#cb227-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Exibindo o tibble</span></span>
<span id="cb227-7"><a href="#cb227-7" aria-hidden="true" tabindex="-1"></a>desempenho_tibble</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  empresa    receita_milhoes crescimento_percentual meta_atingida
  &lt;chr&gt;                &lt;dbl&gt;                  &lt;dbl&gt; &lt;lgl&gt;        
1 TechCorp             126.                    12.5 TRUE         
2 FinanceMax            89.3                   -3.2 FALSE        
3 RetailPlus           157.                     8.9 TRUE         </code></pre>
</div>
</div>
</section>
<section id="criando-tibbles-diretamente" class="level3" data-number="6.4.3">
<h3 data-number="6.4.3" class="anchored" data-anchor-id="criando-tibbles-diretamente"><span class="header-section-number">6.4.3</span> Criando Tibbles Diretamente</h3>
<p>A função <code>tibble()</code> oferece uma sintaxe mais moderna para criação:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb229"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando tibble com dados financeiros trimestrais</span></span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a>resultados_trim <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb229-3"><a href="#cb229-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">trimestre =</span> <span class="fu">c</span>(<span class="st">"Q1"</span>, <span class="st">"Q2"</span>, <span class="st">"Q3"</span>, <span class="st">"Q4"</span>),</span>
<span id="cb229-4"><a href="#cb229-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">receita =</span> <span class="fu">c</span>(<span class="fl">2.8</span>, <span class="fl">3.1</span>, <span class="fl">3.5</span>, <span class="fl">4.2</span>),</span>
<span id="cb229-5"><a href="#cb229-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">margem_bruta =</span> <span class="fu">c</span>(<span class="fl">0.32</span>, <span class="fl">0.35</span>, <span class="fl">0.38</span>, <span class="fl">0.41</span>),</span>
<span id="cb229-6"><a href="#cb229-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">roi =</span> receita <span class="sc">*</span> margem_bruta <span class="sc">/</span> <span class="fl">2.5</span>  <span class="co"># Calculando ROI diretamente</span></span>
<span id="cb229-7"><a href="#cb229-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb229-8"><a href="#cb229-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-9"><a href="#cb229-9" aria-hidden="true" tabindex="-1"></a>resultados_trim</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  trimestre receita margem_bruta   roi
  &lt;chr&gt;       &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt;
1 Q1            2.8         0.32 0.358
2 Q2            3.1         0.35 0.434
3 Q3            3.5         0.38 0.532
4 Q4            4.2         0.41 0.689</code></pre>
</div>
</div>
</section>
<section id="inspeção-avançada-de-tibbles" class="level3" data-number="6.4.4">
<h3 data-number="6.4.4" class="anchored" data-anchor-id="inspeção-avançada-de-tibbles"><span class="header-section-number">6.4.4</span> Inspeção Avançada de Tibbles</h3>
<p>O tibble oferece funções específicas para inspeção detalhada:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb231"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visão geral compacta - função do pacote dplyr</span></span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(resultados_trim)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 4
Columns: 4
$ trimestre    &lt;chr&gt; "Q1", "Q2", "Q3", "Q4"
$ receita      &lt;dbl&gt; 2.8, 3.1, 3.5, 4.2
$ margem_bruta &lt;dbl&gt; 0.32, 0.35, 0.38, 0.41
$ roi          &lt;dbl&gt; 0.3584, 0.4340, 0.5320, 0.6888</code></pre>
</div>
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificando tipos de dados de cada coluna individualmente</span></span>
<span id="cb233-2"><a href="#cb233-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(resultados_trim<span class="sc">$</span>trimestre)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(resultados_trim<span class="sc">$</span>receita)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(resultados_trim<span class="sc">$</span>margem_bruta)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(resultados_trim<span class="sc">$</span>roi)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
</section>
<section id="detecção-de-valores-ausentes" class="level3" data-number="6.4.5">
<h3 data-number="6.4.5" class="anchored" data-anchor-id="detecção-de-valores-ausentes"><span class="header-section-number">6.4.5</span> Detecção de Valores Ausentes</h3>
<p>Para análises robustas, é fundamental identificar dados faltantes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb241"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando tibble com alguns valores ausentes para demonstração</span></span>
<span id="cb241-2"><a href="#cb241-2" aria-hidden="true" tabindex="-1"></a>dados_com_na <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb241-3"><a href="#cb241-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">empresa =</span> <span class="fu">c</span>(<span class="st">"Alpha"</span>, <span class="st">"Beta"</span>, <span class="st">"Gamma"</span>, <span class="st">"Delta"</span>),</span>
<span id="cb241-4"><a href="#cb241-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">vendas =</span> <span class="fu">c</span>(<span class="dv">150</span>, <span class="cn">NA</span>, <span class="dv">180</span>, <span class="dv">165</span>),</span>
<span id="cb241-5"><a href="#cb241-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">custo =</span> <span class="fu">c</span>(<span class="dv">120</span>, <span class="dv">140</span>, <span class="cn">NA</span>, <span class="dv">135</span>),</span>
<span id="cb241-6"><a href="#cb241-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">lucro =</span> vendas <span class="sc">-</span> custo</span>
<span id="cb241-7"><a href="#cb241-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb241-8"><a href="#cb241-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-9"><a href="#cb241-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizando o tibble</span></span>
<span id="cb241-10"><a href="#cb241-10" aria-hidden="true" tabindex="-1"></a>dados_com_na</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  empresa vendas custo lucro
  &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Alpha      150   120    30
2 Beta        NA   140    NA
3 Gamma      180    NA    NA
4 Delta      165   135    30</code></pre>
</div>
<div class="sourceCode cell-code" id="cb243"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Contando valores ausentes por coluna usando loop</span></span>
<span id="cb243-2"><a href="#cb243-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(coluna <span class="cf">in</span> <span class="fu">names</span>(dados_com_na)) {</span>
<span id="cb243-3"><a href="#cb243-3" aria-hidden="true" tabindex="-1"></a>  na_count <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(dados_com_na[[coluna]]))</span>
<span id="cb243-4"><a href="#cb243-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Coluna"</span>, coluna, <span class="st">":"</span>, na_count, <span class="st">"valores ausentes</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb243-5"><a href="#cb243-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Coluna empresa : 0 valores ausentes
Coluna vendas : 1 valores ausentes
Coluna custo : 1 valores ausentes
Coluna lucro : 2 valores ausentes</code></pre>
</div>
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identificando linhas com algum valor ausente</span></span>
<span id="cb245-2"><a href="#cb245-2" aria-hidden="true" tabindex="-1"></a>dados_com_na[<span class="sc">!</span><span class="fu">complete.cases</span>(dados_com_na), ]</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  empresa vendas custo lucro
  &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Beta        NA   140    NA
2 Gamma      180    NA    NA</code></pre>
</div>
</div>
</section>
</section>
<section id="sec-exemplo-real" class="level2" data-number="6.5">
<h2 data-number="6.5" class="anchored" data-anchor-id="sec-exemplo-real"><span class="header-section-number">6.5</span> Exemplo Prático com Dados Financeiros Reais</h2>
<p>Para demonstrar a aplicação prática dessas estruturas, utilizaremos dados reais de performance de carteiras do pacote <code>PerformanceAnalytics</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb247"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(PerformanceAnalytics)</span>
<span id="cb247-2"><a href="#cb247-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb247-3"><a href="#cb247-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-4"><a href="#cb247-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Carregando dados de retornos de gestores e benchmarks</span></span>
<span id="cb247-5"><a href="#cb247-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(managers, <span class="at">package =</span> <span class="st">"PerformanceAnalytics"</span>)</span>
<span id="cb247-6"><a href="#cb247-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-7"><a href="#cb247-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertendo para tibble e preservando datas</span></span>
<span id="cb247-8"><a href="#cb247-8" aria-hidden="true" tabindex="-1"></a>retornos_gestores <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(managers, <span class="at">rownames =</span> <span class="st">"data"</span>)</span>
<span id="cb247-9"><a href="#cb247-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-10"><a href="#cb247-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Exibindo estrutura dos dados</span></span>
<span id="cb247-11"><a href="#cb247-11" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(retornos_gestores)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 132
Columns: 11
$ data          &lt;chr&gt; "1996-01-31", "1996-02-29", "1996-03-31", "1996-04-30", …
$ HAM1          &lt;dbl&gt; 0.0074, 0.0193, 0.0155, -0.0091, 0.0076, -0.0039, -0.023…
$ HAM2          &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, -0.0001, 0.1002, 0.0338, 0.0…
$ HAM3          &lt;dbl&gt; 0.0349, 0.0351, 0.0258, 0.0449, 0.0353, -0.0303, -0.0337…
$ HAM4          &lt;dbl&gt; 0.0222, 0.0195, -0.0098, 0.0236, 0.0028, -0.0019, -0.044…
$ HAM5          &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ HAM6          &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ `EDHEC LS EQ` &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0.0281, …
$ `SP500 TR`    &lt;dbl&gt; 0.0340, 0.0093, 0.0096, 0.0147, 0.0258, 0.0038, -0.0442,…
$ `US 10Y TR`   &lt;dbl&gt; 0.00380, -0.03532, -0.01057, -0.01739, -0.00543, 0.01507…
$ `US 3m TR`    &lt;dbl&gt; 0.00456, 0.00398, 0.00371, 0.00428, 0.00443, 0.00412, 0.…</code></pre>
</div>
</div>
<section id="análise-inicial-dos-dados" class="level3" data-number="6.5.1">
<h3 data-number="6.5.1" class="anchored" data-anchor-id="análise-inicial-dos-dados"><span class="header-section-number">6.5.1</span> Análise Inicial dos Dados</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb249"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificando período de análise</span></span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(retornos_gestores<span class="sc">$</span>data, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1996-01-31" "2006-12-31"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Contando observações válidas por gestor (excluindo valores ausentes)</span></span>
<span id="cb251-2"><a href="#cb251-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Observações válidas por coluna:</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Observações válidas por coluna:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb253"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(coluna <span class="cf">in</span> <span class="fu">names</span>(retornos_gestores)[<span class="sc">-</span><span class="dv">1</span>]) {  <span class="co"># Excluindo coluna 'data'</span></span>
<span id="cb253-2"><a href="#cb253-2" aria-hidden="true" tabindex="-1"></a>  obs_validas <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(retornos_gestores[[coluna]]))</span>
<span id="cb253-3"><a href="#cb253-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(coluna, <span class="st">":"</span>, obs_validas, <span class="st">"observações</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb253-4"><a href="#cb253-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>HAM1 : 132 observações
HAM2 : 125 observações
HAM3 : 132 observações
HAM4 : 132 observações
HAM5 : 77 observações
HAM6 : 64 observações
EDHEC LS EQ : 120 observações
SP500 TR : 132 observações
US 10Y TR : 132 observações
US 3m TR : 132 observações</code></pre>
</div>
<div class="sourceCode cell-code" id="cb255"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estatísticas descritivas dos primeiros três gestores</span></span>
<span id="cb255-2"><a href="#cb255-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(retornos_gestores[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>])</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      HAM1                HAM2               HAM3          
 Min.   :-0.094400   Min.   :-0.03710   Min.   :-0.071800  
 1st Qu.:-0.000025   1st Qu.:-0.00980   1st Qu.:-0.005375  
 Median : 0.011150   Median : 0.00820   Median : 0.010200  
 Mean   : 0.011123   Mean   : 0.01414   Mean   : 0.012447  
 3rd Qu.: 0.024850   3rd Qu.: 0.02520   3rd Qu.: 0.031375  
 Max.   : 0.069200   Max.   : 0.15560   Max.   : 0.179600  
                     NA's   :7                             </code></pre>
</div>
</div>
</section>
<section id="preparação-para-análises-avançadas" class="level3" data-number="6.5.2">
<h3 data-number="6.5.2" class="anchored" data-anchor-id="preparação-para-análises-avançadas"><span class="header-section-number">6.5.2</span> Preparação para Análises Avançadas</h3>
<p>Este conjunto de dados será utilizado nas próximas seções para demonstrar:</p>
<ul>
<li>Manipulação de dados com dplyr</li>
<li>Visualizações com ggplot2<br>
</li>
<li>Análises de performance e risco</li>
<li>Modelos econométricos aplicados</li>
</ul>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Consolidação do Aprendizado
</div>
</div>
<div class="callout-body-container callout-body">
<p>Nesta seção estabelecemos os fundamentos das principais estruturas de dados em R:</p>
<ul>
<li><strong>Matrizes</strong>: Estruturas bidimensionais homogêneas, ideais para cálculos matemáticos e operações de álgebra linear</li>
<li><strong>Listas</strong>: Estruturas flexíveis que permitem armazenar objetos de diferentes tipos e complexidades</li>
<li><strong>Data frames</strong>: Estruturas tabulares fundamentais para análise estatística com colunas heterogêneas</li>
<li><strong>Tibbles</strong>: Evolução moderna dos data frames com melhorias práticas para ciência de dados</li>
</ul>
<p><strong>Critérios para Escolha da Estrutura:</strong></p>
<ul>
<li>Use <strong>matrizes</strong> para operações matemáticas com dados homogêneos</li>
<li>Use <strong>listas</strong> para armazenar resultados complexos ou dados hierárquicos</li>
<li>Use <strong>data frames/tibbles</strong> para análises estatísticas com dados tabulares heterogêneos</li>
</ul>
<p>Compreender quando e como utilizar cada estrutura é fundamental para desenvolver análises eficientes e código limpo em contextos administrativos e financeiros.</p>
</div>
</div>
</section>
</section>
</section>
<section id="metapacote-tidyverse" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Metapacote tidyverse</h1>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Descrição
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>O <a href="https://www.tidyverse.org" target="_blank">tidyverse</a> é um ecossistema coerente de pacotes R para ciência de dados que compartilham uma filosofia de design e gramática comuns.</p></li>
<li><p>Desenvolvido por Hadley Wickham e mantido pela Posit, o tidyverse facilita todo o fluxo de trabalho de análise de dados através de pacotes integrados.</p></li>
</ul>
<section id="alguns-dos-principais-pacotes-do-tidyverse" class="level5 unnumbered">
<h5 class="unnumbered anchored" data-anchor-id="alguns-dos-principais-pacotes-do-tidyverse">Alguns dos Principais Pacotes do tidyverse</h5>
<ul>
<li><p><strong>readr/readxl</strong>: Importação eficiente de dados retangulares</p></li>
<li><p><strong>tidyr</strong>: Estruturação de dados no formato “tidy” (<code>pivot_longer</code>, <code>pivot_wider</code>)</p></li>
<li><p><strong>dplyr</strong>: Manipulação de dados com verbos intuitivos (<code>filter</code>, <code>select</code>, <code>mutate</code>)</p></li>
<li><p><strong>ggplot2/gt</strong>: Visualização de dados baseada na gramática dos gráficos</p></li>
<li><p>O tidyverse implementa o princípio de “tidy data”, criando um fluxo de trabalho coeso através do operador pipe (<code>%&gt;%</code> ou <code>|&gt;</code>).</p></li>
</ul>
</section>
<section id="integração-entre-os-pacotes" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="integração-entre-os-pacotes">Integração entre os Pacotes</h4>
<p>O grande poder do tidyverse está na <strong>integração entre seus pacotes</strong>. Exemplo: um fluxo completo que:</p>
<ol type="1">
<li><strong>Transforma</strong> os dados (<code>mutate</code>)</li>
<li><strong>Agrupa e resume</strong> estatísticas (<code>group_by</code>, <code>summarise</code>)</li>
<li><strong>Converte</strong> em formato longo (<code>pivot_longer</code>)</li>
<li><strong>Visualiza</strong> os dados (<code>ggplot2</code>)</li>
</ol>
</section>
<section id="princípios-do-tidyverse" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="princípios-do-tidyverse">Princípios do tidyverse</h4>
<ul>
<li><strong>Consistência</strong>: funções com sintaxe similar.</li>
<li><strong>Composição</strong>: código encadeado com <code>%&gt;%</code> ou <code>|&gt;</code>.</li>
<li><strong>Clareza sem ambiguidade</strong>: nomes expressivos e argumentos explícitos.</li>
<li><strong>Reprodutibilidade</strong>: fácil de entender, refatorar e auditar.</li>
</ul>
<p>A filosofia do tidyverse está alinhada com os princípios modernos de ciência de dados transparente, auditável e reproduzível.</p>
</section>
</div>
</div>
<section id="dados-organizados" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="dados-organizados"><span class="header-section-number">7.1</span> Dados Organizados</h2>
<ul>
<li><p>O conceito de <strong>Tidy Data</strong> (Dados Organizados) foi formalizado por Hadley Wickham.</p></li>
<li><p>Um arquivo de dados organizado possui a seguinte estrutura:</p>
<ul>
<li>Cada <strong>linha</strong> representa <strong>uma</strong> observação individual</li>
<li>Cada <strong>coluna</strong> representa <strong>uma</strong> variável específica</li>
<li>Cada <strong>célula</strong> contém <strong>um</strong> valor de <strong>uma</strong> variável para <strong>uma</strong> observação específica</li>
</ul></li>
<li><p>A <a href="#fig-2" class="quarto-xref">Figura&nbsp;1</a> ilustra o conceito de dados organizados visualmente.</p></li>
</ul>
<div id="fig-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/tidy_data.jpeg" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<strong>Fig.</strong>&nbsp;1: Dados Organizados
</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Benefícios de Dados Organizados
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><strong>Adequação para Ferramentas</strong>: Formato de armazenamento de dados adequado para análise em linguagens (R/Python) e softwares de análise de dados.</p></li>
<li><p><strong>Consistência</strong>: Estrutura uniforme para todos os conjuntos de dados</p></li>
<li><p><strong>Facilidade para operações comuns</strong>:</p>
<ul>
<li>Filtragem de observações</li>
<li>Seleção de variáveis</li>
<li>Criação de novas variáveis</li>
<li>Agregação de dados</li>
<li>Junção de múltiplas tabelas</li>
</ul></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Dados Financeiros Desorganizados Típicos
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Colunas contendo valores</strong>: Nomes de colunas contendo valores de uma ou mais variáveis.</p>
<ul>
<li>Ex: Colunas nomeadas com anos (2020, 2021, 2022)</li>
</ul>
<div class="sourceCode" id="cb257" style="font-size: 1em;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa   <span class="pp">|</span> 2020    <span class="pp">|</span> 2021    <span class="pp">|</span> 2022    <span class="pp">|</span></span>
<span id="cb257-2"><a href="#cb257-2" aria-hidden="true" tabindex="-1"></a><span class="pp">|-----------|---------|---------|---------|</span></span>
<span id="cb257-3"><a href="#cb257-3" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa A <span class="pp">|</span> 350.000 <span class="pp">|</span> 425.000 <span class="pp">|</span> 510.000 <span class="pp">|</span></span>
<span id="cb257-4"><a href="#cb257-4" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa B <span class="pp">|</span> 780.000 <span class="pp">|</span> 815.000 <span class="pp">|</span> 840.000 <span class="pp">|</span></span>
<span id="cb257-5"><a href="#cb257-5" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa C <span class="pp">|</span> 540.000 <span class="pp">|</span> 490.000 <span class="pp">|</span> 620.000 <span class="pp">|</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Versão Organizada dos Dados Anteriores:
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb258" style="font-size: 1em;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa   <span class="pp">|</span> Ano  <span class="pp">|</span> Valor   <span class="pp">|</span></span>
<span id="cb258-2"><a href="#cb258-2" aria-hidden="true" tabindex="-1"></a><span class="pp">|-----------|------|---------|</span></span>
<span id="cb258-3"><a href="#cb258-3" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa A <span class="pp">|</span> 2020 <span class="pp">|</span> 350.000 <span class="pp">|</span></span>
<span id="cb258-4"><a href="#cb258-4" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa A <span class="pp">|</span> 2021 <span class="pp">|</span> 425.000 <span class="pp">|</span></span>
<span id="cb258-5"><a href="#cb258-5" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa A <span class="pp">|</span> 2022 <span class="pp">|</span> 510.000 <span class="pp">|</span></span>
<span id="cb258-6"><a href="#cb258-6" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa B <span class="pp">|</span> 2020 <span class="pp">|</span> 780.000 <span class="pp">|</span></span>
<span id="cb258-7"><a href="#cb258-7" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa B <span class="pp">|</span> 2021 <span class="pp">|</span> 815.000 <span class="pp">|</span></span>
<span id="cb258-8"><a href="#cb258-8" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa B <span class="pp">|</span> 2022 <span class="pp">|</span> 840.000 <span class="pp">|</span></span>
<span id="cb258-9"><a href="#cb258-9" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa C <span class="pp">|</span> 2020 <span class="pp">|</span> 540.000 <span class="pp">|</span></span>
<span id="cb258-10"><a href="#cb258-10" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa C <span class="pp">|</span> 2021 <span class="pp">|</span> 490.000 <span class="pp">|</span></span>
<span id="cb258-11"><a href="#cb258-11" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa C <span class="pp">|</span> 2022 <span class="pp">|</span> 620.000 <span class="pp">|</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Características:</strong></p>
<ul>
<li>Cada variável está em uma coluna separada</li>
<li>Cada observação está em uma linha</li>
<li>Cada célula contém um valor único</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tipos de “Desorganização” Comuns em Administração
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Múltiplas variáveis em uma coluna</strong>: Uma coluna contendo mais de uma variável</p>
<ul>
<li>Ex: “Nome_Empresa (Ano)” combinando empresa e ano</li>
</ul>
<div class="sourceCode" id="cb259" style="font-size: 1em;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Nome_Empresa (Ano) <span class="pp">|</span> Receita       <span class="pp">|</span> Despesa       <span class="pp">|</span></span>
<span id="cb259-2"><a href="#cb259-2" aria-hidden="true" tabindex="-1"></a><span class="pp">|--------------------|---------------|---------------|</span></span>
<span id="cb259-3"><a href="#cb259-3" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa A (2020)   <span class="pp">|</span> R$ 350.000,00 <span class="pp">|</span> R$ 290.000,00 <span class="pp">|</span></span>
<span id="cb259-4"><a href="#cb259-4" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa A (2021)   <span class="pp">|</span> R$ 425.000,00 <span class="pp">|</span> R$ 320.000,00 <span class="pp">|</span></span>
<span id="cb259-5"><a href="#cb259-5" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa B (2020)   <span class="pp">|</span> R$ 780.000,00 <span class="pp">|</span> R$ 710.000,00 <span class="pp">|</span></span>
<span id="cb259-6"><a href="#cb259-6" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa B (2021)   <span class="pp">|</span> R$ 815.000,00 <span class="pp">|</span> R$ 735.000,00 <span class="pp">|</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong>Não</strong> se deve usar unidades (R$ no caso) em arquivos para armazenamento de dados para análise.</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<strong>Versão Organizada dos Dados</strong>:
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb260" style="font-size: 1em;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa    <span class="pp">|</span> Ano  <span class="pp">|</span> Receita  <span class="pp">|</span> Despesa  <span class="pp">|</span></span>
<span id="cb260-2"><a href="#cb260-2" aria-hidden="true" tabindex="-1"></a><span class="pp">|------------|------|----------|----------|</span></span>
<span id="cb260-3"><a href="#cb260-3" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa A  <span class="pp">|</span> 2020 <span class="pp">|</span> 350000   <span class="pp">|</span> 290000   <span class="pp">|</span></span>
<span id="cb260-4"><a href="#cb260-4" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa A  <span class="pp">|</span> 2021 <span class="pp">|</span> 425000   <span class="pp">|</span> 320000   <span class="pp">|</span></span>
<span id="cb260-5"><a href="#cb260-5" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa B  <span class="pp">|</span> 2020 <span class="pp">|</span> 780000   <span class="pp">|</span> 710000   <span class="pp">|</span></span>
<span id="cb260-6"><a href="#cb260-6" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa B  <span class="pp">|</span> 2021 <span class="pp">|</span> 815000   <span class="pp">|</span> 735000   <span class="pp">|</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Múltiplas variáveis em uma coluna:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Os números referem-se ao lucro líquido trimestral das empresas em milhões de reais:</li>
</ul>
<div class="sourceCode" id="cb261" style="font-size: 1em;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa    <span class="pp">|</span> T1 2023 <span class="pp">|</span> T2 2023 <span class="pp">|</span> T3 2023 <span class="pp">|</span> T4 2023 <span class="pp">|</span></span>
<span id="cb261-2"><a href="#cb261-2" aria-hidden="true" tabindex="-1"></a><span class="pp">|------------|---------|---------|---------|---------|</span></span>
<span id="cb261-3"><a href="#cb261-3" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> TechSoft   <span class="pp">|</span> 25.3    <span class="pp">|</span> 31.7    <span class="pp">|</span> 28.4    <span class="pp">|</span> 35.2    <span class="pp">|</span></span>
<span id="cb261-4"><a href="#cb261-4" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> VarejoMax  <span class="pp">|</span> 12.8    <span class="pp">|</span> 15.4    <span class="pp">|</span> 19.3    <span class="pp">|</span> 22.7    <span class="pp">|</span></span>
<span id="cb261-5"><a href="#cb261-5" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> FinGroup   <span class="pp">|</span> 41.6    <span class="pp">|</span> 38.9    <span class="pp">|</span> 45.2    <span class="pp">|</span> 51.8    <span class="pp">|</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><p><strong>Problemas:</strong></p>
<ul>
<li>Valores de uma variável (trimestre) estão nas colunas</li>
<li>Não segue o princípio “uma coluna, uma variável”</li>
<li>Dificulta análises temporais e comparativas</li>
</ul></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<strong>Versão Organizada dos Dados</strong>:
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb262" style="font-size: 1em;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa   <span class="pp">|</span> Trimestre <span class="pp">|</span> Ano  <span class="pp">|</span> Lucro_Liquido <span class="pp">|</span></span>
<span id="cb262-2"><a href="#cb262-2" aria-hidden="true" tabindex="-1"></a><span class="pp">|-----------|-----------|------|---------------|</span></span>
<span id="cb262-3"><a href="#cb262-3" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> TechSoft  <span class="pp">|</span> T1        <span class="pp">|</span> 2023 <span class="pp">|</span> 25.3          <span class="pp">|</span></span>
<span id="cb262-4"><a href="#cb262-4" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> TechSoft  <span class="pp">|</span> T2        <span class="pp">|</span> 2023 <span class="pp">|</span> 31.7          <span class="pp">|</span></span>
<span id="cb262-5"><a href="#cb262-5" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> TechSoft  <span class="pp">|</span> T3        <span class="pp">|</span> 2023 <span class="pp">|</span> 28.4          <span class="pp">|</span></span>
<span id="cb262-6"><a href="#cb262-6" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> TechSoft  <span class="pp">|</span> T4        <span class="pp">|</span> 2023 <span class="pp">|</span> 35.2          <span class="pp">|</span></span>
<span id="cb262-7"><a href="#cb262-7" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> VarejoMax <span class="pp">|</span> T1        <span class="pp">|</span> 2023 <span class="pp">|</span> 12.8          <span class="pp">|</span></span>
<span id="cb262-8"><a href="#cb262-8" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> VarejoMax <span class="pp">|</span> T2        <span class="pp">|</span> 2023 <span class="pp">|</span> 15.4          <span class="pp">|</span></span>
<span id="cb262-9"><a href="#cb262-9" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> VarejoMax <span class="pp">|</span> T3        <span class="pp">|</span> 2023 <span class="pp">|</span> 19.3          <span class="pp">|</span></span>
<span id="cb262-10"><a href="#cb262-10" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> VarejoMax <span class="pp">|</span> T4        <span class="pp">|</span> 2023 <span class="pp">|</span> 22.7          <span class="pp">|</span></span>
<span id="cb262-11"><a href="#cb262-11" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> FinGroup  <span class="pp">|</span> T1        <span class="pp">|</span> 2023 <span class="pp">|</span> 41.6          <span class="pp">|</span></span>
<span id="cb262-12"><a href="#cb262-12" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> FinGroup  <span class="pp">|</span> T2        <span class="pp">|</span> 2023 <span class="pp">|</span> 38.9          <span class="pp">|</span></span>
<span id="cb262-13"><a href="#cb262-13" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> FinGroup  <span class="pp">|</span> T3        <span class="pp">|</span> 2023 <span class="pp">|</span> 45.2          <span class="pp">|</span></span>
<span id="cb262-14"><a href="#cb262-14" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> FinGroup  <span class="pp">|</span> T4        <span class="pp">|</span> 2023 <span class="pp">|</span> 51.8          <span class="pp">|</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tipos de “Desorganização” Comuns em Administração
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Variáveis em linhas e colunas</strong></p>
<ul>
<li>Ex: Planilha de desempenho onde ROE aparece como coluna, mas Lucro Líquido e outras variáveis aparecem nas linhas</li>
</ul>
<div class="sourceCode" id="cb263" style="font-size: 1em;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa            <span class="pp">|</span> ROE (%)       <span class="pp">|</span> Liquidez Corrente <span class="pp">|</span></span>
<span id="cb263-2"><a href="#cb263-2" aria-hidden="true" tabindex="-1"></a><span class="pp">|--------------------|---------------|-------------------|</span></span>
<span id="cb263-3"><a href="#cb263-3" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa XYZ        <span class="pp">|</span> 15,2          <span class="pp">|</span> 1,8               <span class="pp">|</span></span>
<span id="cb263-4"><a href="#cb263-4" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Lucro Líquido      <span class="pp">|</span> R$ 2.500.000  <span class="pp">|</span> -                 <span class="pp">|</span></span>
<span id="cb263-5"><a href="#cb263-5" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Patrimônio Líquido <span class="pp">|</span> R$ 16.400.000 <span class="pp">|</span> -                 <span class="pp">|</span></span>
<span id="cb263-6"><a href="#cb263-6" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Ativo Circulante   <span class="pp">|</span> -             <span class="pp">|</span> R$ 3.600.000      <span class="pp">|</span></span>
<span id="cb263-7"><a href="#cb263-7" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Passivo Circulante <span class="pp">|</span> -             <span class="pp">|</span> R$ 2.000.000      <span class="pp">|</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<strong>Versão Organizada dos Dados</strong>:
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb264" style="font-size: 1em;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa    <span class="pp">|</span> Indicador           <span class="pp">|</span> Valor       <span class="pp">|</span></span>
<span id="cb264-2"><a href="#cb264-2" aria-hidden="true" tabindex="-1"></a><span class="pp">|------------|---------------------|-------------|</span></span>
<span id="cb264-3"><a href="#cb264-3" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa XYZ<span class="pp">|</span> ROE                 <span class="pp">|</span> 0.152       <span class="pp">|</span></span>
<span id="cb264-4"><a href="#cb264-4" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa XYZ<span class="pp">|</span> Liquidez Corrente   <span class="pp">|</span> 1.8         <span class="pp">|</span></span>
<span id="cb264-5"><a href="#cb264-5" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa XYZ<span class="pp">|</span> Lucro Líquido       <span class="pp">|</span> 2500000     <span class="pp">|</span></span>
<span id="cb264-6"><a href="#cb264-6" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa XYZ<span class="pp">|</span> Patrimônio Líquido  <span class="pp">|</span> 16400000    <span class="pp">|</span></span>
<span id="cb264-7"><a href="#cb264-7" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa XYZ<span class="pp">|</span> Ativo Circulante    <span class="pp">|</span> 3600000     <span class="pp">|</span></span>
<span id="cb264-8"><a href="#cb264-8" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Empresa XYZ<span class="pp">|</span> Passivo Circulante  <span class="pp">|</span> 2000000     <span class="pp">|</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Por que a absoluta maioria dos arquivos de dados são desorganizados?
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Por que a maioria das pessoas que trabalham na área de negócios <strong>não está</strong> familiarizada com os <strong>princípios</strong> da organização de dados para análise e utilizam <strong>planilhas eletrônicas</strong> para trabalhar com dados.</p></li>
<li><p>Planilhas de dados são frequentemente organizadas pensando em <strong>apresentar</strong> os dados ou para tornar a <strong>entrada</strong> de dados mais simples, não em um formato adequado para armazenamento e análise.</p></li>
<li><p>Isso significa que, para a maioria das análises reais, cientistas e analistas de dados <strong>dispendem muito tempo e esforço</strong> organizando e preparando dados elaborados por terceiros.</p></li>
<li><p>A <strong>primeira etapa</strong> é sempre descobrir quais são as <strong>observações</strong> e as <strong>variáveis</strong> associadas a cada observação.</p></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Benefícios para Dissertações e Artigos Científicos
</div>
</div>
<div class="callout-body-container callout-body">
<p>Dados organizados viabilizam e facilitam a:</p>
<ul>
<li><p><strong>Reprodutibilidade</strong>: Formato padronizado que outros pesquisadores podem entender e utilizar</p></li>
<li><p><strong>Visualizações avançadas</strong>: Estrutura ideal para a criação de diversos tipos de tabelas e gráficos.</p></li>
<li><p><strong>Análise econométrica</strong>: Adequação imediata para estudos e modelos econométricos em (regressão linear, painel, logit, probit etc.)</p></li>
</ul>
</div>
</div>
</section>
<section id="planilhas-eletrônicas" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="planilhas-eletrônicas"><span class="header-section-number">7.2</span> Planilhas Eletrônicas</h2>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="citation" data-cites="broman2018">Broman e Woo (<a href="#ref-broman2018" role="doc-biblioref">2018</a>)</span>: Riscos para Armazenamento de Dados
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Planilhas eletrônicas têm <strong>alto risco de erros</strong>: Em 13 auditorias de planilhas reais, uma média de <strong>88%</strong> continham erros <span class="citation" data-cites="broman2018">(<a href="#ref-broman2018" role="doc-biblioref">Broman e Woo, 2018</a>)</span>.</p></li>
<li><p>Problemas comuns incluem:</p>
<ul>
<li><p>Conversão automática de formatos (ex: nomes de genes interpretados como datas)</p></li>
<li><p>Armazenamento de datas de forma diferente entre sistemas operacionais</p></li>
<li><p>Cálculos incorporados que podem corromper dados originais</p></li>
<li><p>A mistura de análise, visualização e armazenamento no mesmo arquivo aumenta o risco de comprometer os dados brutos e os resultados.</p></li>
</ul></li>
<li><p>Mas dada a ubiquidade de planilhas nas organizações, caso precise usar planilhas para armazenar dados, siga as seguintes boas práticas:</p></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Recomendações práticas para organizar dados em planilhas.
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Artigo de <span class="citation" data-cites="broman2018">Broman e Woo (<a href="#ref-broman2018" role="doc-biblioref">2018</a>)</span></p></li>
<li><p>Crie planilhas <strong>organizadas</strong> (uma linha = uma observação, uma coluna = uma variável, uma célula = um valor)</p></li>
<li><p>Seja <strong>consistente</strong> e escolha <strong>bons nomes</strong> para as variáveis:</p>
<ul>
<li>use <code>snake_case</code> ou <code>CamelCase</code></li>
<li><code>Lucro Líquido (R$)</code> 😱</li>
<li><code>lucro_liquido</code> ou <code>LucroLiquido</code> 😃</li>
<li><strong>NUNCA use</strong> acentos, caracteres especiais e espaços vaziso para nomes ou valores.</li>
</ul></li>
<li><p>Escreva <strong>datas</strong> conforme a <a href="https://pt.wikipedia.org/wiki/ISO_8601" target="&quot;_blank">Norma ISO 8601</a>:</p>
<ul>
<li><code>YYYY-MM-DD</code>, exemplo: <code>2025-05-07</code></li>
</ul></li>
<li><p><strong>Sem</strong> células vazias: use hífen (<code>-</code>) e no caso de usar R, use <code>NA</code></p></li>
<li><p>Crie um <strong>dicionário dos dados</strong></p></li>
<li><p><strong>NUNCA faça cálculos</strong> na planilha dos dados originais/brutos</p></li>
<li><p><strong>NUNCA use</strong> unidades de medida (R$), cor ou realce como um dado.</p>
<ul>
<li><code>R$ 50.000,00</code> 😱</li>
<li><code>50000</code> 😃</li>
<li><code>10 %</code> 😱</li>
<li><code>O.1</code> 😃</li>
</ul></li>
<li><p><strong>Faça backups</strong></p></li>
<li><p>Use <strong>validação</strong> dos dados para evitar erros</p></li>
<li><p><strong>Salve</strong> os dados em <strong>arquivos de texto simples</strong> (<code>.csv</code>):</p>
<ul>
<li>todas as linguagens (R/Python) e softwares de análises de dados reconhecem facilmente esse formato.</li>
</ul></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pacote tidyr
</div>
</div>
<div class="callout-body-container callout-body">
<p>Na próxima seção, vamos aprender sobre como o pacote tidyr do tidyverse pode ser usado para tornar alguns tipos de dados desorganizados em dados organizados para análise.</p>
</div>
</div>
</section>
</section>
<section id="introdução-ao-pacote-tidyr" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Introdução ao Pacote tidyr</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://tidyr.tidyverse.org/logo.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:30.0%"></p>
</figure>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
O pacote tidyr no ecossistema tidyverse
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>O <a href="https://tidyr.tidyverse.org" target="_blank">tidyr</a> é um pacote do tidyverse para <strong>organizar dados desorganizados</strong></p></li>
<li><p>Seu nome vem de “<em>tidy</em>” (organizado) + “r” (R)</p></li>
<li><p>Foi criado para facilitar a transformação de dados desorganizados em dados organizados (<em>tidy data</em>) para análise</p></li>
<li><p>É muito útil para a preparação de dados na fase 3 do CRISP-DM (Preparação dos Dados)</p></li>
<li><p>Permite que dados em formatos comuns de planilhas e relatórios sejam transformados em formatos adequados para análise e visualização</p></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
A Principal função do pacote tidyr para nós
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><code>pivot_longer()</code>: Converte dados do formato amplo (onde valores de uma ou mais variáveis são espalhadas por colunas) em um formato longo (onde cada variável está em uma única coluna).</p>
<ul>
<li><p>Útil quando você precisa de de dados para análise ou visualização</p></li>
<li><p><strong>Ex</strong>: Transformar colunas de trimestres (Q1, Q2, Q3, Q4) em uma única coluna “trimestre”</p></li>
</ul></li>
<li><p>Iremos estudar <strong>somente</strong> a função <code>pivot_longer()</code>, porque o foco deste módulo é a preparação de dados para análise.</p></li>
<li><p>Mas há diversas outras funções úteis para a organização de dados:</p></li>
</ul>
</div>
</div>
<section id="quando-usar-o-tidyr" class="level3" data-number="8.0.1">
<h3 data-number="8.0.1" class="anchored" data-anchor-id="quando-usar-o-tidyr"><span class="header-section-number">8.0.1</span> Quando usar o tidyr?</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Situações comuns em Administração
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Quando você tem <strong>planilhas financeiras</strong> com colunas para diferentes períodos (meses, trimestres, anos)</p></li>
<li><p>Quando você recebe <strong>planilhas Excel</strong> organizadas para visualização humana, mas não para análise de dados.</p></li>
<li><p>Quando precisa <strong>combinar dados</strong> de diferentes fontes que estão em formatos incompatíveis.</p></li>
<li><p>Quando precisa <strong>preparar dados</strong> para visualizações específicas com ggplot2 (gráficos de linhas, facetas, etc.)</p></li>
<li><p>Quando realiza <strong>análises temporais</strong> e precisa converter entre formatos de data/hora.</p></li>
</ul>
</div>
</div>
</section>
<section id="a-função-tidyrpivot_longer" class="level3" data-number="8.0.2">
<h3 data-number="8.0.2" class="anchored" data-anchor-id="a-função-tidyrpivot_longer"><span class="header-section-number">8.0.2</span> A Função tidyr::pivot_longer</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Ao final desta seção, você será capaz de:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><strong>Aplicar</strong> a função pivot_longer() com seus parâmetros essenciais: <code>cols</code>, <code>names_to</code> e <code>values_to</code></p></li>
<li><p><strong>Organizar/Transformar</strong> dados complexos extraindo múltiplas informações de colunas</p></li>
<li><p><strong>Integrar</strong> pivot_longer() em pipelines de análise com dplyr</p></li>
<li><p><strong>Implementar</strong> soluções para casos reais de análise de dados administrativos</p></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Transformando dados de formato amplo para longo
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>A função <code>pivot_longer()</code> converte dados do formato <strong>amplo</strong> (wide) para o formato <strong>longo</strong> (long)</p></li>
<li><p>É muito útil quando as colunas contêm <strong>valores</strong> em vez de <strong>variáveis</strong></p></li>
<li><p>Geralmente, é o primeiro passo para transformar planilhas de negócios em dados organizados para análise (<em>tidy data</em>)</p></li>
<li><p>A <a href="#fig-3" class="quarto-xref">Figura&nbsp;2</a> ilustra o uso desta função</p></li>
</ul>
</div>
</div>
<div id="fig-3" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/pivot_longer.jpeg" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<strong>Fig.</strong>&nbsp;2: Aplicando a função pivot_longer()
</figcaption>
</figure>
</div>
</section>
<section id="sintaxe-da-função-pivot_longer" class="level3" data-number="8.0.3">
<h3 data-number="8.0.3" class="anchored" data-anchor-id="sintaxe-da-função-pivot_longer"><span class="header-section-number">8.0.3</span> Sintaxe da função pivot_longer()</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Como usar pivot_longer() na prática
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb265"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Formato básico</span></span>
<span id="cb265-2"><a href="#cb265-2" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span></span>
<span id="cb265-3"><a href="#cb265-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb265-4"><a href="#cb265-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="st">"valores_de_uma_nova_coluna"</span>,</span>
<span id="cb265-5"><a href="#cb265-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"nome_nova_coluna"</span>,</span>
<span id="cb265-6"><a href="#cb265-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"nome_outra_nova_coluna"</span></span>
<span id="cb265-7"><a href="#cb265-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p><strong>valores_de_uma_nova_coluna</strong>: as <u>colunas</u> que contêm valores de uma variável e serão transformadas.</p></li>
<li><p><strong>nome_nova_coluna</strong>: <u>nome</u> da nova coluna/variável que conterá os nomes das colunas originais.</p></li>
<li><p><strong>nome_outra_nova_coluna</strong>: <u>nome</u> da nova coluna/variável que conterá os valores originais.</p></li>
</ul>
</div>
</div>
</section>
<section id="função-pivot_longer" class="level3" data-number="8.0.4">
<h3 data-number="8.0.4" class="anchored" data-anchor-id="função-pivot_longer"><span class="header-section-number">8.0.4</span> Função pivot_longer</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Descrição
</div>
</div>
<div class="callout-body-container callout-body">
<table class="caption-top table">
<colgroup>
<col style="width: 32%">
<col style="width: 68%">
</colgroup>
<thead>
<tr class="header">
<th>Característica</th>
<th>pivot_longer()</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Transforma</strong></td>
<td>Colunas → Linhas</td>
</tr>
<tr class="even">
<td><strong>Formato resultante</strong></td>
<td>Longo (mais linhas)</td>
</tr>
<tr class="odd">
<td><strong>Quando usar</strong></td>
<td>Para análise e visualização</td>
</tr>
<tr class="even">
<td><strong>Exemplo típico</strong></td>
<td>Transformar colunas de anos em uma variável “ano”</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="a-função-tribble" class="level3" data-number="8.0.5">
<h3 data-number="8.0.5" class="anchored" data-anchor-id="a-função-tribble"><span class="header-section-number">8.0.5</span> A Função tribble()</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Descrição
</div>
</div>
<div class="callout-body-container callout-body">
<p>A função <code>tribble()</code> (abreviação de “<em>transposed tibble</em>”) é uma forma elegante de criar pequenas tibbles/data frames para exemplos ou testes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb266"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando uma data frame com tribble() - "tibble transposta"</span></span>
<span id="cb266-2"><a href="#cb266-2" aria-hidden="true" tabindex="-1"></a>produtos <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb266-3"><a href="#cb266-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>codigo, <span class="sc">~</span>produto, <span class="sc">~</span>preco, <span class="co"># Nomes das colunas começam com ~</span></span>
<span id="cb266-4"><a href="#cb266-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"A123"</span>, <span class="st">"Notebook"</span>, <span class="dv">3500</span>, <span class="co"># Cada linha é um registro</span></span>
<span id="cb266-5"><a href="#cb266-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"B456"</span>, <span class="st">"Smartphone"</span>, <span class="dv">1800</span>, <span class="co"># Os valores são separados por vírgulas</span></span>
<span id="cb266-6"><a href="#cb266-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"C789"</span>, <span class="st">"Monitor"</span>, <span class="dv">950</span> <span class="co"># A formatação facilita a leitura</span></span>
<span id="cb266-7"><a href="#cb266-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb266-8"><a href="#cb266-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb266-9"><a href="#cb266-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizando a data frame criada</span></span>
<span id="cb266-10"><a href="#cb266-10" aria-hidden="true" tabindex="-1"></a>produtos</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  codigo produto    preco
  &lt;chr&gt;  &lt;chr&gt;      &lt;dbl&gt;
1 A123   Notebook    3500
2 B456   Smartphone  1800
3 C789   Monitor      950</code></pre>
</div>
</div>
<p><strong>Vantagens da função tribble():</strong></p>
<ul>
<li><p><strong>Layout Visual</strong>: Cada linha do código corresponde a uma linha da data frame, tornando o código mais legível</p></li>
<li><p><strong>Especificação direta</strong>: Os nomes das colunas são definidos com ~ (til)</p></li>
<li><p><strong>Flexibilidade de tipos</strong>: Cada coluna pode conter diferentes tipos de dados</p></li>
<li><p><strong>Ideal para exemplos</strong>: Perfeita para criar pequenas data frames para demonstrações ou testes.</p></li>
</ul>
<p>Esta função faz parte do pacote <code>tibble</code>, que é carregado automaticamente quando você carrega o <code>tidyverse</code>.</p>
</div>
</div>
</section>
<section id="exemplo-básico-de-pivot_longer" class="level3" data-number="8.0.6">
<h3 data-number="8.0.6" class="anchored" data-anchor-id="exemplo-básico-de-pivot_longer"><span class="header-section-number">8.0.6</span> Exemplo Básico de pivot_longer()</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Dados de receita trimestral (formato amplo/wide)
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb268"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando a data frame de exemplo</span></span>
<span id="cb268-2"><a href="#cb268-2" aria-hidden="true" tabindex="-1"></a>receitas <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb268-3"><a href="#cb268-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>produto, <span class="sc">~</span>T1, <span class="sc">~</span>T2, <span class="sc">~</span>T3, <span class="sc">~</span>T4,</span>
<span id="cb268-4"><a href="#cb268-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Produto A"</span>, <span class="dv">50000</span>, <span class="dv">55000</span>, <span class="dv">60000</span>, <span class="dv">65000</span>,</span>
<span id="cb268-5"><a href="#cb268-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Produto B"</span>, <span class="dv">30000</span>, <span class="dv">32000</span>, <span class="dv">35000</span>, <span class="dv">37000</span>,</span>
<span id="cb268-6"><a href="#cb268-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Produto C"</span>, <span class="dv">20000</span>, <span class="dv">22000</span>, <span class="dv">25000</span>, <span class="dv">27000</span></span>
<span id="cb268-7"><a href="#cb268-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb268-8"><a href="#cb268-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-9"><a href="#cb268-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizando a data frame original (formato amplo/wide)</span></span>
<span id="cb268-10"><a href="#cb268-10" aria-hidden="true" tabindex="-1"></a>receitas</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  produto      T1    T2    T3    T4
  &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Produto A 50000 55000 60000 65000
2 Produto B 30000 32000 35000 37000
3 Produto C 20000 22000 25000 27000</code></pre>
</div>
</div>
<p>Este formato é para apresentação, não para armazenamento e análise.</p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Transformando para o formato longo
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb270"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformando para o formato longo usando pivot_longer</span></span>
<span id="cb270-2"><a href="#cb270-2" aria-hidden="true" tabindex="-1"></a>receitas_longas <span class="ot">&lt;-</span> receitas <span class="sc">%&gt;%</span></span>
<span id="cb270-3"><a href="#cb270-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb270-4"><a href="#cb270-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"T1"</span>, <span class="st">"T2"</span>, <span class="st">"T3"</span>, <span class="st">"T4"</span>), <span class="co"># colunas que serão valores da nova coluna</span></span>
<span id="cb270-5"><a href="#cb270-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"trimestre"</span>, <span class="co"># nome da nova coluna</span></span>
<span id="cb270-6"><a href="#cb270-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"receita"</span> <span class="co"># nome de outra nova coluna</span></span>
<span id="cb270-7"><a href="#cb270-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb270-8"><a href="#cb270-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-9"><a href="#cb270-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizando o resultado (formato longo/long)</span></span>
<span id="cb270-10"><a href="#cb270-10" aria-hidden="true" tabindex="-1"></a>receitas_longas</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 3
   produto   trimestre receita
   &lt;chr&gt;     &lt;chr&gt;       &lt;dbl&gt;
 1 Produto A T1          50000
 2 Produto A T2          55000
 3 Produto A T3          60000
 4 Produto A T4          65000
 5 Produto B T1          30000
 6 Produto B T2          32000
 7 Produto B T3          35000
 8 Produto B T4          37000
 9 Produto C T1          20000
10 Produto C T2          22000
11 Produto C T3          25000
12 Produto C T4          27000</code></pre>
</div>
</div>
<p>Agora os dados estão organizados:</p>
<ul>
<li>Cada linha é uma observação (um produto em um trimestre)</li>
<li>Cada coluna é uma variável (produto, trimestre, receita)</li>
<li>Cada célula contém um único valor</li>
</ul>
</div>
</div>
</section>
<section id="exemplo-intermediário-várias-colunas" class="level3" data-number="8.0.7">
<h3 data-number="8.0.7" class="anchored" data-anchor-id="exemplo-intermediário-várias-colunas"><span class="header-section-number">8.0.7</span> Exemplo Intermediário: Várias Colunas</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Dados de desempenho financeiro
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb272"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando a data frame com múltiplas métricas por trimestre</span></span>
<span id="cb272-2"><a href="#cb272-2" aria-hidden="true" tabindex="-1"></a>desempenho <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb272-3"><a href="#cb272-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>empresa, <span class="sc">~</span>receita_T1, <span class="sc">~</span>receita_T2, <span class="sc">~</span>despesa_T1, <span class="sc">~</span>despesa_T2,</span>
<span id="cb272-4"><a href="#cb272-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Empresa A"</span>, <span class="dv">150000</span>, <span class="dv">175000</span>, <span class="dv">120000</span>, <span class="dv">130000</span>,</span>
<span id="cb272-5"><a href="#cb272-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Empresa B"</span>, <span class="dv">250000</span>, <span class="dv">270000</span>, <span class="dv">200000</span>, <span class="dv">220000</span>,</span>
<span id="cb272-6"><a href="#cb272-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Empresa C"</span>, <span class="dv">100000</span>, <span class="dv">115000</span>, <span class="dv">80000</span>, <span class="dv">95000</span></span>
<span id="cb272-7"><a href="#cb272-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb272-8"><a href="#cb272-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-9"><a href="#cb272-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizando a data frame original</span></span>
<span id="cb272-10"><a href="#cb272-10" aria-hidden="true" tabindex="-1"></a>desempenho</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  empresa   receita_T1 receita_T2 despesa_T1 despesa_T2
  &lt;chr&gt;          &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
1 Empresa A     150000     175000     120000     130000
2 Empresa B     250000     270000     200000     220000
3 Empresa C     100000     115000      80000      95000</code></pre>
</div>
</div>
<p>Este formato é ainda mais desorganizado, pois mistura três variáveis (receita, despesa e trimestre) nos nomes das colunas.</p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Transformando para o formato longo com dois níveis
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb274"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformando para o formato longo usando pivot_longer com nomes separados</span></span>
<span id="cb274-2"><a href="#cb274-2" aria-hidden="true" tabindex="-1"></a>desempenho_longo <span class="ot">&lt;-</span> desempenho <span class="sc">%&gt;%</span></span>
<span id="cb274-3"><a href="#cb274-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb274-4"><a href="#cb274-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="sc">-</span>empresa, <span class="co"># todas as colunas exceto "empresa"</span></span>
<span id="cb274-5"><a href="#cb274-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">"indicador"</span>, <span class="st">"trimestre"</span>), <span class="co"># nomes das duas novas colunas</span></span>
<span id="cb274-6"><a href="#cb274-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_sep =</span> <span class="st">"_"</span>, <span class="co"># separador nos nomes das colunas</span></span>
<span id="cb274-7"><a href="#cb274-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"valor"</span> <span class="co"># nome de nova coluna para receber os valores</span></span>
<span id="cb274-8"><a href="#cb274-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb274-9"><a href="#cb274-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-10"><a href="#cb274-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizando o resultado</span></span>
<span id="cb274-11"><a href="#cb274-11" aria-hidden="true" tabindex="-1"></a>desempenho_longo</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   empresa   indicador trimestre  valor
   &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;      &lt;dbl&gt;
 1 Empresa A receita   T1        150000
 2 Empresa A receita   T2        175000
 3 Empresa A despesa   T1        120000
 4 Empresa A despesa   T2        130000
 5 Empresa B receita   T1        250000
 6 Empresa B receita   T2        270000
 7 Empresa B despesa   T1        200000
 8 Empresa B despesa   T2        220000
 9 Empresa C receita   T1        100000
10 Empresa C receita   T2        115000
11 Empresa C despesa   T1         80000
12 Empresa C despesa   T2         95000</code></pre>
</div>
</div>
<p><strong>Observação importante:</strong></p>
<ul>
<li><p>Os nomes das colunas originais (<code>receita_T1</code>, <code>receita_T2</code>, etc.) são divididos pelo separador “_” em exatamente duas partes.</p></li>
<li><p>A primeira parte (“receita” ou “despesa”) vai para a coluna “indicador” e a segunda parte (“T1” ou “T2”) vai para a coluna “trimestre”.</p></li>
<li><p>Este é um padrão comum em dados financeiros: quando os nomes de colunas seguem um formato consistente com separadores, podemos extrair as informações contidas neles para criar novas variáveis.</p></li>
</ul>
</div>
</div>
</section>
<section id="exemplo-avançado" class="level3" data-number="8.0.8">
<h3 data-number="8.0.8" class="anchored" data-anchor-id="exemplo-avançado"><span class="header-section-number">8.0.8</span> Exemplo Avançado</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Indicadores financeiros por trimestre
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb276"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb276-1"><a href="#cb276-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplo mais gerenciável para slides</span></span>
<span id="cb276-2"><a href="#cb276-2" aria-hidden="true" tabindex="-1"></a>receita_trimestral <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb276-3"><a href="#cb276-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>empresa, <span class="sc">~</span><span class="st">`</span><span class="at">2022_T1_Receita</span><span class="st">`</span>, <span class="sc">~</span><span class="st">`</span><span class="at">2022_T2_Receita</span><span class="st">`</span>, <span class="sc">~</span><span class="st">`</span><span class="at">2023_T1_Receita</span><span class="st">`</span>, <span class="sc">~</span><span class="st">`</span><span class="at">2023_T2_Receita</span><span class="st">`</span>,</span>
<span id="cb276-4"><a href="#cb276-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ABC Ltda"</span>, <span class="dv">1200000</span>, <span class="dv">1350000</span>, <span class="dv">1500000</span>, <span class="dv">1620000</span>,</span>
<span id="cb276-5"><a href="#cb276-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"XYZ S.A."</span>, <span class="dv">2500000</span>, <span class="dv">2700000</span>, <span class="dv">2900000</span>, <span class="dv">3100000</span></span>
<span id="cb276-6"><a href="#cb276-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb276-7"><a href="#cb276-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb276-8"><a href="#cb276-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizando a data frame original</span></span>
<span id="cb276-9"><a href="#cb276-9" aria-hidden="true" tabindex="-1"></a>receita_trimestral</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  empresa  `2022_T1_Receita` `2022_T2_Receita` `2023_T1_Receita`
  &lt;chr&gt;                &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;
1 ABC Ltda           1200000           1350000           1500000
2 XYZ S.A.           2500000           2700000           2900000
# ℹ 1 more variable: `2023_T2_Receita` &lt;dbl&gt;</code></pre>
</div>
</div>
<ul>
<li>Temos informações de ano e trimestre nos nomes das colunas</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Organizando dados financeiros complexos
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb278"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb278-1"><a href="#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformando para o formato longo usando pivot_longer com três níveis</span></span>
<span id="cb278-2"><a href="#cb278-2" aria-hidden="true" tabindex="-1"></a>receita_trimestral_organizada <span class="ot">&lt;-</span> receita_trimestral <span class="sc">%&gt;%</span></span>
<span id="cb278-3"><a href="#cb278-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb278-4"><a href="#cb278-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="sc">-</span>empresa, <span class="co"># todas as colunas exceto "empresa"</span></span>
<span id="cb278-5"><a href="#cb278-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">"ano"</span>, <span class="st">"trimestre"</span>), <span class="co"># nomes de duas novas colunas</span></span>
<span id="cb278-6"><a href="#cb278-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_sep =</span> <span class="st">"_"</span>, <span class="co"># separador nos nomes das colunas</span></span>
<span id="cb278-7"><a href="#cb278-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"receita"</span> <span class="co"># nome de nova coluna para receber os valores da receita</span></span>
<span id="cb278-8"><a href="#cb278-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb278-9"><a href="#cb278-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-10"><a href="#cb278-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizando o resultado</span></span>
<span id="cb278-11"><a href="#cb278-11" aria-hidden="true" tabindex="-1"></a>receita_trimestral_organizada</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 4
  empresa  ano   trimestre receita
  &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;
1 ABC Ltda 2022  T1        1200000
2 ABC Ltda 2022  T2        1350000
3 ABC Ltda 2023  T1        1500000
4 ABC Ltda 2023  T2        1620000
5 XYZ S.A. 2022  T1        2500000
6 XYZ S.A. 2022  T2        2700000
7 XYZ S.A. 2023  T1        2900000
8 XYZ S.A. 2023  T2        3100000</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="resumo-função-pivot_longer" class="level3" data-number="8.0.9">
<h3 data-number="8.0.9" class="anchored" data-anchor-id="resumo-função-pivot_longer"><span class="header-section-number">8.0.9</span> Resumo: Função pivot_longer()</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
O que você precisa lembrar
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Finalidade</strong>: Transformar dados do formato amplo (wide) para o formato longo (long), organizando-os conforme o princípio tidy data</p></li>
<li><p><strong>Sintaxe básica</strong>:</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb280"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb280-1"><a href="#cb280-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span></span>
<span id="cb280-2"><a href="#cb280-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb280-3"><a href="#cb280-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> colunas_a_transformar,</span>
<span id="cb280-4"><a href="#cb280-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"nome_nova_coluna_para_nomes"</span>,</span>
<span id="cb280-5"><a href="#cb280-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"nome_nova_coluna_para_valores"</span></span>
<span id="cb280-6"><a href="#cb280-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li><strong>Parâmetros principais</strong>:</li>
</ol>
<ul>
<li><code>cols</code>: Quais colunas serão transformadas em pares nome-valor</li>
<li><code>names_to</code>: Nome da nova coluna que receberá os nomes das colunas originais</li>
<li><code>values_to</code>: Nome da nova coluna que receberá os valores</li>
</ul>
<p><br> 4. <strong>Caso avançado</strong>:</p>
<ul>
<li><p>Quando os nomes de colunas contêm múltiplas informações, use:</p>
<ul>
<li><code>names_to = c("variavel1", "variavel2", ...)</code></li>
<li><code>names_sep = "_"</code> (ou outro separador presente nos nomes)</li>
</ul></li>
</ul>
<p><br> 5. <strong>Benefícios</strong>:</p>
<ul>
<li>Padroniza o formato de dados conforme princípios da ciência de dados</li>
<li>Facilita análises com dplyr (group_by, summarize, etc.)</li>
<li>Prepara dados para visualizações eficientes</li>
</ul>
</div>
</div>
</section>
<section id="dicas-para-trabalhar-com-tidyr" class="level3" data-number="8.0.10">
<h3 data-number="8.0.10" class="anchored" data-anchor-id="dicas-para-trabalhar-com-tidyr"><span class="header-section-number">8.0.10</span> Dicas para Trabalhar com tidyr</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Recomendações práticas
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Identifique as variáveis</strong>: Antes de transformar, identifique claramente quais são as observações e variáveis reais nos seus dados</p></li>
<li><p><strong>Comece com subconjuntos</strong>: Para dados complexos, comece testando com um pequeno subconjunto de dados</p></li>
<li><p><strong>Use nomes descritivos</strong>: Escolha bons nomes para as novas colunas criadas por <code>pivot_longer()</code></p></li>
<li><p><strong>Combine com dplyr</strong>: As transformações com tidyr geralmente são seguidas por operações com dplyr para análise</p></li>
<li><p><strong>Verifique os resultados</strong>: Sempre confira se os dados transformados mantêm as mesmas informações dos dados originais</p></li>
</ol>
</div>
</div>
</section>
<section id="resumo-pacote-tidyr" class="level3" data-number="8.0.11">
<h3 data-number="8.0.11" class="anchored" data-anchor-id="resumo-pacote-tidyr"><span class="header-section-number">8.0.11</span> Resumo: Pacote tidyr</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
O que você precisa lembrar
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>O que faz</strong>: O pacote tidyr transforma dados entre os formatos amplo (wide) e longo (long)</p></li>
<li><p><strong>Principal função</strong>:</p>
<ul>
<li><code>pivot_longer()</code>: Converte de amplo (<em>wide</em>) para longo (<em>long</em>) (colunas para linhas)</li>
</ul></li>
<li><p><strong>Quando usar</strong>:</p>
<ul>
<li>Use <code>pivot_longer()</code> quando colunas contiverem valores em vez de variáveis</li>
</ul></li>
<li><p><strong>Importância na análise de dados</strong>:</p>
<ul>
<li><p>É essencial para a preparação de dados (fase 3 do CRISP-DM)</p></li>
<li><p>Permite transformar dados comuns de negócios em formatos adequados para análise</p></li>
<li><p>Facilita a aplicação de funções do dplyr e criação de visualizações</p></li>
</ul></li>
<li><p><strong>Lembre-se sempre</strong>:</p>
<ul>
<li>Dados organizados (tidy) têm uma variável por coluna, uma observação por linha.</li>
</ul></li>
</ol>
</div>
</div>
</section>
</section>
<section id="introdução-ao-pacote-dplyr" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Introdução ao Pacote dplyr</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://dplyr.tidyverse.org/logo.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
O pacote dplyr no ecossistema tidyverse
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>O <a href="https://dplyr.tidyverse.org/index.html" target="_blank">dplyr</a> é um dos pacotes principais do <a href="https://www.tidyverse.org" target="_blank">tidyverse</a>, criado por Hadley Wickham</p></li>
<li><p>Seu nome vem de “<em>data plier</em>” (alicate para dados) - uma ferramenta para manipular dados</p></li>
<li><p>Foi projetado seguindo a filosofia “<em>tidy data</em>” (dados organizados) - cada variável é uma coluna, cada observação é uma linha</p></li>
<li><p>É escrito em C++ para performance otimizada</p></li>
<li><p>Permite manipulação de dados de forma consistente, clara e encadeada</p></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
O dplyr no Ecossistema R
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>O pacote dplyr é parte do <strong>tidyverse</strong></p></li>
<li><p>Enquanto os pacotes <strong>readr</strong> e <strong>readxl</strong> ajudam na importação de dados, o dplyr é especializado na <strong>manipulação</strong> de dados</p></li>
<li><p>O dplyr foi otimizado para manipular sobre <strong>dados organizados</strong>, longos ou <em>tidy data</em></p></li>
<li><p>O dplyr trabalha com uma estrutura de dados de R que já conhecemos: <strong>data frames/tibbles</strong></p></li>
<li><p>As funções do dplyr foram projetadas para serem usadas com o operador pipe (<code>%&gt;%</code>), que já vimos brevemente no relatório Junglivet</p></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
O dplyr como uma “linha de produção”
</div>
</div>
<div class="callout-body-container callout-body">
<p>Imagine o processo de análise de dados como uma linha de produção:</p>
<ul>
<li><p>Os <strong>dados brutos</strong> são sua “matéria-prima”</p></li>
<li><p>Cada função do dplyr é uma “estação de trabalho” que realiza uma operação específica:</p>
<ul>
<li><code>filter()</code> seleciona apenas os materiais que atendem a certos critérios</li>
<li><code>select()</code> separa apenas as partes que você precisa</li>
<li><code>mutate()</code> transforma ou cria novos componentes</li>
<li><code>group_by()</code> + <code>summarize()</code> agrupam e calculam estatísticas</li>
<li><code>arrange()</code> organiza o resultado final</li>
</ul></li>
<li><p>O operador pipe (<code>%&gt;%</code>) é a “esteira” que move os dados de uma estação para outra</p></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Operações Comuns em Análise de Dados
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Muitas vezes precisamos <strong>filtrar</strong> somente certas linhas (<strong>observações</strong> ) de uma data frame.</p></li>
<li><p>Muitas vezes precisamos <strong>selecionar</strong> somente certas colunas (<strong>variáveis</strong>) de uma data frame.</p></li>
<li><p>Muitas vezes precisamos <strong>agrupar</strong> os dados por uma determinada(s) variável(s) categórica.</p></li>
<li><p>Muitas vezes precisamos <strong>calcular estatísticas descritivas</strong> para esses subconjuntos de dados (função <code>summarize</code>).</p></li>
</ul>
</div>
</div>
<section id="por-que-usar-o-dplyr" class="level3" data-number="9.0.1">
<h3 data-number="9.0.1" class="anchored" data-anchor-id="por-que-usar-o-dplyr"><span class="header-section-number">9.0.1</span> Por que usar o dplyr?</h3>
<ul>
<li><strong>Exemplo 1:</strong> Usando R base</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb281"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pib per capita médio dos países do continente americano</span></span>
<span id="cb281-2"><a href="#cb281-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(gapminder<span class="sc">$</span>gdpPercap[gapminder<span class="sc">$</span>continent <span class="sc">==</span> <span class="st">"Americas"</span>])</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7136.11</code></pre>
</div>
</div>
<ul>
<li><strong>Exemplo 1:</strong> Usando o pacote dplyr</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb283"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb283-1"><a href="#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pib per capita médio dos países do continente americano</span></span>
<span id="cb283-2"><a href="#cb283-2" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb283-3"><a href="#cb283-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(continent <span class="sc">==</span> <span class="st">"Americas"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb283-4"><a href="#cb283-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">mean</span>(gdpPercap))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  `mean(gdpPercap)`
              &lt;dbl&gt;
1             7136.</code></pre>
</div>
</div>
<ul>
<li><strong>Exemplo 2:</strong> R base (aninhado)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb285"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb285-1"><a href="#cb285-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular a média de PIB per capita para </span></span>
<span id="cb285-2"><a href="#cb285-2" aria-hidden="true" tabindex="-1"></a><span class="co"># países asiáticos com população &gt; 50 milhões </span></span>
<span id="cb285-3"><a href="#cb285-3" aria-hidden="true" tabindex="-1"></a><span class="co"># em 2007</span></span>
<span id="cb285-4"><a href="#cb285-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(gapminder<span class="sc">$</span>gdpPercap[</span>
<span id="cb285-5"><a href="#cb285-5" aria-hidden="true" tabindex="-1"></a>  gapminder<span class="sc">$</span>continent <span class="sc">==</span> <span class="st">"Asia"</span> <span class="sc">&amp;</span> </span>
<span id="cb285-6"><a href="#cb285-6" aria-hidden="true" tabindex="-1"></a>  gapminder<span class="sc">$</span>pop <span class="sc">&gt;</span> <span class="dv">50000000</span> <span class="sc">&amp;</span> </span>
<span id="cb285-7"><a href="#cb285-7" aria-hidden="true" tabindex="-1"></a>  gapminder<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2007</span></span>
<span id="cb285-8"><a href="#cb285-8" aria-hidden="true" tabindex="-1"></a>])</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7130.141</code></pre>
</div>
</div>
<ul>
<li><p>Difícil de ler e entender</p></li>
<li><p>Propenso a erros</p></li>
<li><p>Difícil de modificar</p></li>
<li><p><strong>Exemplo 2:</strong> Com dplyr e o operador pipe</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb287"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb287-1"><a href="#cb287-1" aria-hidden="true" tabindex="-1"></a><span class="co"># O mesmo cálculo com dplyr</span></span>
<span id="cb287-2"><a href="#cb287-2" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb287-3"><a href="#cb287-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb287-4"><a href="#cb287-4" aria-hidden="true" tabindex="-1"></a>    continent <span class="sc">==</span> <span class="st">"Asia"</span>,</span>
<span id="cb287-5"><a href="#cb287-5" aria-hidden="true" tabindex="-1"></a>    pop <span class="sc">&gt;</span> <span class="dv">50000000</span>,</span>
<span id="cb287-6"><a href="#cb287-6" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">==</span> <span class="dv">2007</span></span>
<span id="cb287-7"><a href="#cb287-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb287-8"><a href="#cb287-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">mean</span>(gdpPercap))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  `mean(gdpPercap)`
              &lt;dbl&gt;
1             7130.</code></pre>
</div>
</div>
<ul>
<li>Leitura sequencial, mais natural</li>
<li>Cada etapa claramente separada</li>
<li>Fácil de modificar ou expandir</li>
</ul>
</section>
<section id="comparando-abordagens" class="level3" data-number="9.0.2">
<h3 data-number="9.0.2" class="anchored" data-anchor-id="comparando-abordagens"><span class="header-section-number">9.0.2</span> Comparando Abordagens</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Vantagens e Desvantagens
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Base R: Funções aninhadas</strong></p>
<ul>
<li><p><strong>Vantagens</strong>: Não requer pacotes adicionais, disponível em qualquer instalação do R</p></li>
<li><p><strong>Desvantagens</strong>:</p>
<ul>
<li>Código difícil de ler com funções aninhadas</li>
<li>Difícil de depurar quando há erros</li>
<li>Funções com sintaxes inconsistentes</li>
</ul></li>
</ul>
<p><strong>dplyr: Gramática da manipulação de dados</strong></p>
<ul>
<li><p><strong>Vantagens</strong>:</p>
<ul>
<li>Código mais legível e expressivo</li>
<li>Funções com nomes intuitivos e consistentes</li>
<li>Ideal para análises sequenciais com pipes</li>
</ul></li>
<li><p><strong>Desvantagens</strong>:</p>
<ul>
<li>Requer aprender uma nova sintaxe (para usuários experientes)</li>
<li>Dependência de pacotes externos</li>
<li>Algumas operações podem ser mais lentas que o R base em casos específicos</li>
</ul></li>
</ul>
</div>
</div>
</section>
<section id="fluxo-de-trabalho-com-tidyvese" class="level3" data-number="9.0.3">
<h3 data-number="9.0.3" class="anchored" data-anchor-id="fluxo-de-trabalho-com-tidyvese"><span class="header-section-number">9.0.3</span> Fluxo de trabalho com tidyvese</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Gramática da manipulação de dados
</div>
</div>
<div class="callout-body-container callout-body">
<p>O fluxo típico de uma análise de dados com tidyverse segue este padrão:</p>
<ol type="1">
<li><strong>Importar</strong> dados (com pacotes here, readr, readxl,…)</li>
<li><strong>Organizar</strong> dados para análise (pacote tidyr)</li>
<li><strong>Unir</strong> arquivos/tabelas se necessário (funções para <code>joins</code>)</li>
<li><strong>Filtrar</strong> observações (função <code>filter</code>)</li>
<li><strong>Selecionar</strong> variáveis (função <code>select</code>)</li>
<li><strong>Transformar</strong> dados (função <code>mutate</code>)</li>
<li><strong>Agrupar</strong> dados (função <code>group_by</code>)</li>
<li><strong>Resumir</strong> informações (função <code>summarize</code>)</li>
<li><strong>Ordenar</strong> resultados (função <code>arrange</code>)</li>
</ol>
</div>
</div>
</section>
<section id="um-pipeline-de-análise-com-dplyr" class="level3" data-number="9.0.4">
<h3 data-number="9.0.4" class="anchored" data-anchor-id="um-pipeline-de-análise-com-dplyr"><span class="header-section-number">9.0.4</span> Um Pipeline de Análise com dplyr</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Informações sobre expectativa de vida por continente
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb289"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Um pipeline de análise com dplyr</span></span>
<span id="cb289-2"><a href="#cb289-2" aria-hidden="true" tabindex="-1"></a>relatorio_expectativa <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb289-3"><a href="#cb289-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filtra apenas os dados de 2007</span></span>
<span id="cb289-4"><a href="#cb289-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span></span>
<span id="cb289-5"><a href="#cb289-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Agrupa por continente</span></span>
<span id="cb289-6"><a href="#cb289-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span></span>
<span id="cb289-7"><a href="#cb289-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calcula estatísticas resumidas</span></span>
<span id="cb289-8"><a href="#cb289-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb289-9"><a href="#cb289-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">expectativa_media =</span> <span class="fu">mean</span>(lifeExp),</span>
<span id="cb289-10"><a href="#cb289-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">expectativa_minima =</span> <span class="fu">min</span>(lifeExp),</span>
<span id="cb289-11"><a href="#cb289-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">expectativa_maxima =</span> <span class="fu">max</span>(lifeExp),</span>
<span id="cb289-12"><a href="#cb289-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">num_paises =</span> <span class="fu">n</span>()</span>
<span id="cb289-13"><a href="#cb289-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb289-14"><a href="#cb289-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ordena do maior para o menor</span></span>
<span id="cb289-15"><a href="#cb289-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(expectativa_media))</span>
<span id="cb289-16"><a href="#cb289-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-17"><a href="#cb289-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualiza o resultado final</span></span>
<span id="cb289-18"><a href="#cb289-18" aria-hidden="true" tabindex="-1"></a>relatorio_expectativa</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  continent expectativa_media expectativa_minima expectativa_maxima num_paises
  &lt;fct&gt;                 &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;      &lt;int&gt;
1 Oceania                80.7               80.2               81.2          2
2 Europe                 77.6               71.8               81.8         30
3 Americas               73.6               60.9               80.7         25
4 Asia                   70.7               43.8               82.6         33
5 Africa                 54.8               39.6               76.4         52</code></pre>
</div>
</div>
<p>Este exemplo demonstra como um conjunto de funções do dplyr pode ser combinado para transformar dados brutos <strong>organizados</strong> em um relatório informativo com apenas algumas linhas de código.</p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<strong>Pacote dplyr: Vantagens</strong>
</div>
</div>
<div class="callout-body-container callout-body">
<p>O pacote dplyr fornece uma série de funções muito úteis para manipular data frames de uma maneira que:</p>
<ul>
<li>reduz a probabilidade de cometer erros</li>
<li>economiza digitação</li>
<li>o código é mais legível e compreensível</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Objetivos de Aprendizagem
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vamos aprender 5 das funções mais usadas do pacote dplyr,</p>
<div style="font-size: 90%;">
<table class="caption-top table">
<colgroup>
<col style="width: 28%">
<col style="width: 71%">
</colgroup>
<thead>
<tr class="header">
<th>Função</th>
<th>Descrição</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>dplyr::filter()</code></td>
<td>para filtrar linhas (observações)</td>
</tr>
<tr class="even">
<td><code>dplyr::select()</code></td>
<td>para selecionar colunas (variáveis )</td>
</tr>
<tr class="odd">
<td><code>dplyr::mutate()</code></td>
<td>para criar novas variáveis</td>
</tr>
<tr class="even">
<td><code>dplyr::group_by()</code></td>
<td>para operações “por grupo”</td>
</tr>
<tr class="odd">
<td><code>dplyr::summarize()</code></td>
<td>para calcular estatísticas</td>
</tr>
<tr class="even">
<td><code>dplyr::arrange()</code></td>
<td>para ordenar resultados</td>
</tr>
</tbody>
</table>
</div>
<p>Além disso, veremos como como usar o operador pipe (<code>%&gt;%</code>) para combiná-las.</p>
</div>
</div>
</section>
<section id="boas-práticas-com-dplyr" class="level3" data-number="9.0.5">
<h3 data-number="9.0.5" class="anchored" data-anchor-id="boas-práticas-com-dplyr"><span class="header-section-number">9.0.5</span> Boas Práticas com dplyr</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Recomendações para código eficiente e legível
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Indentação consistente</strong>:</p>
<ul>
<li>Um nível de identação para cada função</li>
<li>Parâmetros adicionais alinhados</li>
</ul></li>
<li><p><strong>Nomeie seu código</strong>:</p>
<ul>
<li>Use nomes descritivos para variáveis intermediárias e finais</li>
<li>Ex: <code>dados_filtrados</code>, <code>relatorio_vendas_por_regiao</code></li>
</ul></li>
<li><p><strong>Comente seu código</strong>:</p>
<ul>
<li>Explique o “por quê”, não apenas o “o quê”</li>
<li>Útil para você mesmo no futuro e para colegas</li>
</ul></li>
<li><p><strong>Dividir análises complexas em etapas</strong>:</p>
<ul>
<li>Para análises muito complexas, divida em objetos intermediários</li>
<li>Facilita a depuração e compreensão</li>
</ul></li>
<li><p><strong>Consistência de estilo</strong>:</p>
<ul>
<li>Seja consistente com o estilo de nomeação (snake_case ou CamelCase)</li>
<li>Seja consistente com o uso de aspas (simples ou duplas)</li>
</ul></li>
</ol>
</div>
</div>
</section>
<section id="pacote-gapminder---dados" class="level3" data-number="9.0.6">
<h3 data-number="9.0.6" class="anchored" data-anchor-id="pacote-gapminder---dados"><span class="header-section-number">9.0.6</span> Pacote gapminder - Dados</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Descrição
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>O pacote gapminder da linguagem R contém uma data frame também chamada gapminder.</p></li>
<li><p>A df gapminder fornece informações detalhadas sobre indicadores socioeconômicos reais de vários países ao longo do tempo.</p></li>
<li><p>Este conjunto de dados é muito utilizado no ensino da linguagem R e de métodos estatísticos.</p></li>
<li><p>Vamos utilizar a df <code>gapminder</code> para ilustrar as funções do pacote dplyr.</p></li>
<li><p>Para acessar os dados gapminder, basta instalar e carregar o pacote gapminder:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb291"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb291-1"><a href="#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carrega os pacotes</span></span>
<span id="cb291-2"><a href="#cb291-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb291-3"><a href="#cb291-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="data-frame-gapminder" class="level3" data-number="9.0.7">
<h3 data-number="9.0.7" class="anchored" data-anchor-id="data-frame-gapminder"><span class="header-section-number">9.0.7</span> Data Frame gapminder</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Fase 1 (CRISP-DM): Entendimento dos Dados
</div>
</div>
<div class="callout-body-container callout-body">
<p>Para obter uma visão geral da estrutura da df gapminder, podemos usar a função glimpse do pacote dplyr:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb292"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb292-1"><a href="#cb292-1" aria-hidden="true" tabindex="-1"></a><span class="co"># visualizando a estrutura dos dados</span></span>
<span id="cb292-2"><a href="#cb292-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(gapminder)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,704
Columns: 6
$ country   &lt;fct&gt; "Afghanistan", "Afghanistan", "Afghanistan", "Afghanistan", …
$ continent &lt;fct&gt; Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, …
$ year      &lt;int&gt; 1952, 1957, 1962, 1967, 1972, 1977, 1982, 1987, 1992, 1997, …
$ lifeExp   &lt;dbl&gt; 28.801, 30.332, 31.997, 34.020, 36.088, 38.438, 39.854, 40.8…
$ pop       &lt;int&gt; 8425333, 9240934, 10267083, 11537966, 13079460, 14880372, 12…
$ gdpPercap &lt;dbl&gt; 779.4453, 820.8530, 853.1007, 836.1971, 739.9811, 786.1134, …</code></pre>
</div>
</div>
<p>Podemos também inspecionar as primeiras 6 linhas da data frame com a função head:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb294"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb294-1"><a href="#cb294-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gapminder)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  country     continent  year lifeExp      pop gdpPercap
  &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
1 Afghanistan Asia       1952    28.8  8425333      779.
2 Afghanistan Asia       1957    30.3  9240934      821.
3 Afghanistan Asia       1962    32.0 10267083      853.
4 Afghanistan Asia       1967    34.0 11537966      836.
5 Afghanistan Asia       1972    36.1 13079460      740.
6 Afghanistan Asia       1977    38.4 14880372      786.</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="boa-prática" class="level3" data-number="9.0.8">
<h3 data-number="9.0.8" class="anchored" data-anchor-id="boa-prática"><span class="header-section-number">9.0.8</span> Boa Prática</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Dicionário dos dados
</div>
</div>
<div class="callout-body-container callout-body">
<p>A data frame gapminder contida no pacote de mesmo nome, possui 1704 linhas (observações) e 6 colunas (variáveis).</p>
<table class="caption-top table">
<colgroup>
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 71%">
</colgroup>
<thead>
<tr class="header">
<th>Variável</th>
<th>Classe/Tipo</th>
<th>Descrição</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>country</code></td>
<td><code>factor</code></td>
<td>Nome do país (142 níveis/países)</td>
</tr>
<tr class="even">
<td><code>continent</code></td>
<td><code>factor</code></td>
<td>Continente ao qual o país pertence (5 níveis/continentes)</td>
</tr>
<tr class="odd">
<td><code>year</code></td>
<td><code>integer</code></td>
<td>Ano da observação (1952 a 2007 em incrementos de 5 anos)</td>
</tr>
<tr class="even">
<td><code>lifeExp</code></td>
<td><code>double</code></td>
<td>Expectativa de vida ao nascer, em anos</td>
</tr>
<tr class="odd">
<td><code>pop</code></td>
<td><code>integer</code></td>
<td>População total do país</td>
</tr>
<tr class="even">
<td><code>gdpPercap</code></td>
<td><code>double</code></td>
<td>PIB per capita em US$, ajustado pela inflação</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="função-select" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="função-select"><span class="header-section-number">9.1</span> Função select()</h2>
<section id="o-que-é-a-função-select" class="level3" data-number="9.1.1">
<h3 data-number="9.1.1" class="anchored" data-anchor-id="o-que-é-a-função-select"><span class="header-section-number">9.1.1</span> O que é a função select()?</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Selecionando variáveis (colunas) de uma data frame
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>A função <code>select()</code> permite escolher quais <strong>variáveis</strong> (colunas) você quer manter ou remover de uma data frame</p></li>
<li><p>Enquanto <code>select()</code> trabalha com <strong>colunas</strong> (variáveis), <code>filter()</code> trabalha com <strong>linhas</strong> (observações),</p></li>
<li><p>É essencial para simplificar seus dados, focando apenas nas variáveis relevantes para sua análise</p></li>
</ul>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/select.jpeg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
<section id="sintaxe-da-função-select" class="level3" data-number="9.1.2">
<h3 data-number="9.1.2" class="anchored" data-anchor-id="sintaxe-da-função-select"><span class="header-section-number">9.1.2</span> Sintaxe da função select()</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Sintaxe básica
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb296"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb296-1"><a href="#cb296-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estrutura básica</span></span>
<span id="cb296-2"><a href="#cb296-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(df, var1, var2, var3)</span>
<span id="cb296-3"><a href="#cb296-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb296-4"><a href="#cb296-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Com operador pipe</span></span>
<span id="cb296-5"><a href="#cb296-5" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">select</span>(var1, var2, var3)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>df</strong>: A data frame da qual você quer selecionar variáveis</li>
<li><strong>var1, var2, var3</strong>: Nomes das variáveis que você quer manter</li>
<li>Todas as variáveis não listadas serão removidas do resultado</li>
</ul>
</div>
</div>
</section>
<section id="exemplo-análise-financeira-simplificada" class="level3" data-number="9.1.3">
<h3 data-number="9.1.3" class="anchored" data-anchor-id="exemplo-análise-financeira-simplificada"><span class="header-section-number">9.1.3</span> Exemplo: Análise Financeira Simplificada</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Cenário: Análise financeira de países
</div>
</div>
<div class="callout-body-container callout-body">
<p>Imagine que você é um analista financeiro internacional e precisa preparar um relatório sobre PIB:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb297"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb297-1"><a href="#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleciona apenas as variáveis relevantes para análise financeira</span></span>
<span id="cb297-2"><a href="#cb297-2" aria-hidden="true" tabindex="-1"></a>dados_financeiros <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb297-3"><a href="#cb297-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, year, gdpPercap)</span>
<span id="cb297-4"><a href="#cb297-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb297-5"><a href="#cb297-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualiza as primeiras linhas do resultado</span></span>
<span id="cb297-6"><a href="#cb297-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dados_financeiros)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country      year gdpPercap
  &lt;fct&gt;       &lt;int&gt;     &lt;dbl&gt;
1 Afghanistan  1952      779.
2 Afghanistan  1957      821.
3 Afghanistan  1962      853.
4 Afghanistan  1967      836.
5 Afghanistan  1972      740.
6 Afghanistan  1977      786.</code></pre>
</div>
</div>
<p><strong>Interpretação:</strong> Este código seria equivalente a extrair apenas os dados financeiros relevantes (país, ano e PIB per capita) de uma grande base de dados para uma análise específica de desempenho econômico.</p>
</div>
</div>
</section>
<section id="técnicas-de-seleção-avançadas" class="level3" data-number="9.1.4">
<h3 data-number="9.1.4" class="anchored" data-anchor-id="técnicas-de-seleção-avançadas"><span class="header-section-number">9.1.4</span> Técnicas de Seleção Avançadas</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Diversas formas de selecionar variáveis
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb299"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb299-1"><a href="#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecionar variáveis por inclusão</span></span>
<span id="cb299-2"><a href="#cb299-2" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">select</span>(country, year, gdpPercap)</span>
<span id="cb299-3"><a href="#cb299-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb299-4"><a href="#cb299-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecionar variáveis por exclusão (com sinal de menos)</span></span>
<span id="cb299-5"><a href="#cb299-5" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>continent, <span class="sc">-</span>lifeExp)</span>
<span id="cb299-6"><a href="#cb299-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb299-7"><a href="#cb299-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecionar variáveis em sequência</span></span>
<span id="cb299-8"><a href="#cb299-8" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">select</span>(country<span class="sc">:</span>pop)</span>
<span id="cb299-9"><a href="#cb299-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb299-10"><a href="#cb299-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecionar variáveis que começam com determinado texto</span></span>
<span id="cb299-11"><a href="#cb299-11" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"c"</span>))</span>
<span id="cb299-12"><a href="#cb299-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb299-13"><a href="#cb299-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecionar variáveis que terminam com determinado texto</span></span>
<span id="cb299-14"><a href="#cb299-14" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"p"</span>))</span>
<span id="cb299-15"><a href="#cb299-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb299-16"><a href="#cb299-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecionar variáveis que contêm determinado texto</span></span>
<span id="cb299-17"><a href="#cb299-17" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"exp"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Aplicações práticas em negócios
</div>
</div>
<div class="callout-body-container callout-body">
<p>Estas técnicas são muito úteis quando você trabalha com:</p>
<ul>
<li>Grandes conjuntos de dados com dezenas ou centenas de variáveis</li>
<li>Planilhas de dados financeiros onde precisa focar em determinadas métricas</li>
<li>Relatórios onde precisa apresentar apenas informações específicas</li>
</ul>
</div>
</div>
</section>
<section id="erros-comuns-e-como-evitá-los" class="level3" data-number="9.1.5">
<h3 data-number="9.1.5" class="anchored" data-anchor-id="erros-comuns-e-como-evitá-los"><span class="header-section-number">9.1.5</span> Erros Comuns e Como Evitá-los</h3>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Os erros mais comuns com select()
</div>
</div>
<div class="callout-body-container callout-body">
<table class="caption-top table">
<colgroup>
<col style="width: 14%">
<col style="width: 45%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th>Erro</th>
<th>Errado</th>
<th>Correto</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Nomes de variáveis com aspas</td>
<td><code>select(gapminder, "country")</code></td>
<td><code>select(gapminder, country)</code></td>
</tr>
<tr class="even">
<td>Tentar condições como em filter</td>
<td><code>select(gapminder, gdpPercap &gt; 1000)</code></td>
<td>Use <code>filter()</code> para isso, não <code>select()</code></td>
</tr>
<tr class="odd">
<td>Não salvar o resultado</td>
<td><code>gapminder %&gt;% select(country, year)</code></td>
<td><code>dados_novos &lt;- gapminder %&gt;% select(country, year)</code></td>
</tr>
<tr class="even">
<td>Remover variáveis necessárias</td>
<td><code>select(country)</code> e depois tentar usar <code>continent</code></td>
<td>Verifique se manteve todas as variáveis necessárias</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Dica importante:
</div>
</div>
<div class="callout-body-container callout-body">
<p>Lembre-se: <code>select()</code> é para escolher <strong>colunas (variáveis)</strong> e <code>filter()</code> é para escolher <strong>linhas (observações)</strong>!</p>
</div>
</div>
</section>
<section id="exemplo-salvando-o-resultado" class="level3" data-number="9.1.6">
<h3 data-number="9.1.6" class="anchored" data-anchor-id="exemplo-salvando-o-resultado"><span class="header-section-number">9.1.6</span> Exemplo: Salvando o resultado</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Seleção por Exclusão
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Se quisermos remover apenas a variável <strong>continent</strong>, podemos usar a sintáxe abaixo e salvar o resultado em outro objeto:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb300"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb300-1"><a href="#cb300-1" aria-hidden="true" tabindex="-1"></a>variaveis_selecionadas <span class="ot">&lt;-</span> <span class="fu">select</span>(gapminder, <span class="sc">-</span>continent)</span>
<span id="cb300-2"><a href="#cb300-2" aria-hidden="true" tabindex="-1"></a>variaveis_selecionadas</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,704 × 5
   country      year lifeExp      pop gdpPercap
   &lt;fct&gt;       &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
 1 Afghanistan  1952    28.8  8425333      779.
 2 Afghanistan  1957    30.3  9240934      821.
 3 Afghanistan  1962    32.0 10267083      853.
 4 Afghanistan  1967    34.0 11537966      836.
 5 Afghanistan  1972    36.1 13079460      740.
 6 Afghanistan  1977    38.4 14880372      786.
 7 Afghanistan  1982    39.9 12881816      978.
 8 Afghanistan  1987    40.8 13867957      852.
 9 Afghanistan  1992    41.7 16317921      649.
10 Afghanistan  1997    41.8 22227415      635.
# ℹ 1,694 more rows</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="pacote-dplyr-e-o-operador-pipe-ou" class="level3" data-number="9.1.7">
<h3 data-number="9.1.7" class="anchored" data-anchor-id="pacote-dplyr-e-o-operador-pipe-ou"><span class="header-section-number">9.1.7</span> Pacote dplyr e o operador pipe ( <code>|&gt;</code> ou <code>%&gt;%</code>)</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Combinação de Operações com <code>|&gt;</code> ou <code>%&gt;%</code>
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Nos slides anteriores, usamos a sintáxe ‘normal’ da linguagem R.</p></li>
<li><p>Mas o ponto forte do dplyr está na <strong>combinação</strong> de várias funções usando o <strong>operador pipe</strong> <code>%&gt;%</code>.</p></li>
<li><p>Vamos analisar a gramática do uso de funções do dplyr combinadas com o operador <code>%&gt;%</code>.</p></li>
<li><p>Atalho para inserir o operador pipe: <strong>Ctrl + shift + M</strong></p></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Significado conceitual do pipe %&gt;%
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>O operador pipe pode ser lido como “então” ou “em seguida”</p></li>
<li><p>Fluxo da esquerda para a direita, similar à leitura natural</p></li>
<li><p>Transforma:</p></li>
</ul>
<p><code>funcao(dados, arg1, arg2)</code></p>
<p>em</p>
<p><code>dados %&gt;% funcao(arg1, arg2)</code></p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Analogia
</div>
</div>
<div class="callout-body-container callout-body">
<p>Uma linha de montagem onde cada função faz uma operação nos dados</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb302"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb302-1"><a href="#cb302-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="co"># Pegue os dados gapminder, então...</span></span>
<span id="cb302-2"><a href="#cb302-2"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> <span class="co"># Filtre para apenas o ano 2007, então...</span></span>
<span id="cb302-3"><a href="#cb302-3"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span> <span class="co"># Agrupe por continente, então...</span></span>
<span id="cb302-4"><a href="#cb302-4"></a>  <span class="fu">summarize</span>( <span class="co"># Calcule resumos:</span></span>
<span id="cb302-5"><a href="#cb302-5"></a>    <span class="fu">mean</span>(lifeExp), <span class="co"># expectativa de vida média</span></span>
<span id="cb302-6"><a href="#cb302-6"></a>    <span class="fu">sum</span>(pop) <span class="co"># população total </span></span>
<span id="cb302-7"><a href="#cb302-7"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  continent `mean(lifeExp)` `sum(pop)`
  &lt;fct&gt;               &lt;dbl&gt;      &lt;dbl&gt;
1 Africa               54.8  929539692
2 Americas             73.6  898871184
3 Asia                 70.7 3811953827
4 Europe               77.6  586098529
5 Oceania              80.7   24549947</code></pre>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Nomeie os resumos calculados com summarize
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb304"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb304-1"><a href="#cb304-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="co"># Pegue os dados gapminder, então...</span></span>
<span id="cb304-2"><a href="#cb304-2"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> <span class="co"># Filtre para apenas o ano 2007, então...</span></span>
<span id="cb304-3"><a href="#cb304-3"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span> <span class="co"># Agrupe por continente, então...</span></span>
<span id="cb304-4"><a href="#cb304-4"></a>  <span class="fu">summarize</span>( <span class="co"># Calcule resumos:</span></span>
<span id="cb304-5"><a href="#cb304-5"></a>    <span class="at">exp_vida_media =</span> <span class="fu">mean</span>(lifeExp), <span class="co"># expectativa de vida média</span></span>
<span id="cb304-6"><a href="#cb304-6"></a>    <span class="at">populacao_total =</span> <span class="fu">sum</span>(pop) <span class="co"># população total</span></span>
<span id="cb304-7"><a href="#cb304-7"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  continent exp_vida_media populacao_total
  &lt;fct&gt;              &lt;dbl&gt;           &lt;dbl&gt;
1 Africa              54.8       929539692
2 Americas            73.6       898871184
3 Asia                70.7      3811953827
4 Europe              77.6       586098529
5 Oceania             80.7        24549947</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="função-select-e-o-operador-pipe" class="level3" data-number="9.1.8">
<h3 data-number="9.1.8" class="anchored" data-anchor-id="função-select-e-o-operador-pipe"><span class="header-section-number">9.1.8</span> Função select() e o Operador Pipe</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Selecionando Variáveis com o Pipe
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb306"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb306-1"><a href="#cb306-1" aria-hidden="true" tabindex="-1"></a>variaveis_selecionadas <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb306-2"><a href="#cb306-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(year, country, gdpPercap)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Vamos entender o código:</p>
<ol type="1">
<li><p>Primeiro invocamos a df gapminder e a passamos, usando o operador pipe <code>%&gt;%</code>, para a próxima etapa, que é a função select().</p></li>
<li><p>Neste caso, não especificamos qual df usamos na função select(), porque que ela obtém essa informação do pipe anterior.</p></li>
<li><p>Salvamos o resultado no objeto <code>variaveis_selecionadas</code></p></li>
</ol>
</div>
</div>
</section>
<section id="resumo-função-select" class="level3" data-number="9.1.9">
<h3 data-number="9.1.9" class="anchored" data-anchor-id="resumo-função-select"><span class="header-section-number">9.1.9</span> Resumo: Função select()</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
O que você precisa lembrar
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Para que serve:</strong> Selecionar apenas as colunas (variáveis) que você deseja manter ou remover</p></li>
<li><p><strong>Sintaxe básica:</strong></p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb307"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb307-1"><a href="#cb307-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">select</span>(var1, var2, var3)  <span class="co"># Mantém apenas var1, var2 e var3</span></span>
<span id="cb307-2"><a href="#cb307-2" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>var4, <span class="sc">-</span>var5)      <span class="co"># Remove var4 e var5, mantém o resto</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li><strong>Técnicas úteis:</strong>
<ul>
<li>Seleção por inclusão: <code>select(país, ano, vendas)</code></li>
<li>Seleção po exclusão: <code>select(-observações, -notas)</code></li>
<li>Seleção por padrão de texto: <code>select(starts_with("venda"))</code></li>
</ul></li>
<li><strong>Lembre-se sempre:</strong>
<ul>
<li><code>select()</code> trabalha com COLUNAS</li>
<li><code>filter()</code> trabalha com LINHAS</li>
<li>Sempre salve o resultado em um novo objeto!</li>
</ul></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb308"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb308-1"><a href="#cb308-1" aria-hidden="true" tabindex="-1"></a>novo_df <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span> <span class="fu">select</span>(...)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="função-filter" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="função-filter"><span class="header-section-number">9.2</span> Função filter()</h2>
<section id="o-que-é-a-função-filter" class="level3" data-number="9.2.1">
<h3 data-number="9.2.1" class="anchored" data-anchor-id="o-que-é-a-função-filter"><span class="header-section-number">9.2.1</span> O que é a função filter()?</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Filtrando observações (linhas) de uma data frame
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>A função <code>filter()</code> permite <strong>filtrar subconjuntos de observações</strong> (linhas) que atendem determinadas condições ou critérios.</p></li>
<li><p>É uma das funções mais utilizadas na análise de dados para criar subconjuntos específicos dos dados</p></li>
<li><p>Pense nela como um “filtro” que deixa passar apenas as observações que atendem aos critérios que você definir</p></li>
</ul>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/filter.jpeg" class="img-fluid figure-img"></p>
<figcaption>Neste caso, duas linhas atendem às condições</figcaption>
</figure>
</div>
</section>
<section id="o-que-é-a-função-filter-1" class="level3" data-number="9.2.2">
<h3 data-number="9.2.2" class="anchored" data-anchor-id="o-que-é-a-função-filter-1"><span class="header-section-number">9.2.2</span> O que é a função filter()?</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Filtrando observações (linhas) de uma data frame
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Imagine que você tem uma planilha de vendas e quer analisar apenas as vendas:</p>
<ul>
<li>de um produto específico</li>
<li>acima de determinado valor</li>
<li>em uma região específica</li>
<li>em um período específico</li>
</ul></li>
<li><p>A função <code>filter()</code> permite fazer essa filtragem de forma rápida e precisa</p></li>
</ul>
</div>
</div>
</section>
<section id="sintaxe-da-função-filter" class="level3" data-number="9.2.3">
<h3 data-number="9.2.3" class="anchored" data-anchor-id="sintaxe-da-função-filter"><span class="header-section-number">9.2.3</span> Sintaxe da função filter()</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Sintaxe básica
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb309"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb309-1"><a href="#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estrutura básica</span></span>
<span id="cb309-2"><a href="#cb309-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df, condição)</span>
<span id="cb309-3"><a href="#cb309-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb309-4"><a href="#cb309-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Com operador pipe</span></span>
<span id="cb309-5"><a href="#cb309-5" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(condição)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>df</strong>: A data frame a ser filtrada</li>
<li><strong>condição</strong>: Expressão lógica que retorna TRUE/FALSE para cada linha</li>
<li>Somente as linhas que resultam em TRUE são mantidas no resultado</li>
</ul>
</div>
</div>
</section>
<section id="operadores-para-construir-condições" class="level3" data-number="9.2.4">
<h3 data-number="9.2.4" class="anchored" data-anchor-id="operadores-para-construir-condições"><span class="header-section-number">9.2.4</span> Operadores para construir condições</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Operadores na linguagem dos negócios
</div>
</div>
<div class="callout-body-container callout-body">
<table class="caption-top table">
<colgroup>
<col style="width: 21%">
<col style="width: 56%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th>Operador</th>
<th>Exemplo em Linguagem Natural</th>
<th>Código em R</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>==</td>
<td>Apenas os países europeus</td>
<td>continent == “Europe”</td>
</tr>
<tr class="even">
<td>!=</td>
<td>Todos, exceto os países europeus</td>
<td>continent != “Europe”</td>
</tr>
<tr class="odd">
<td>&gt;</td>
<td>Países com PIB per capita maior que 10.000</td>
<td>gdpPercap &gt; 10000</td>
</tr>
<tr class="even">
<td>&lt;</td>
<td>Países com menos de 1 milhão de habitantes</td>
<td>pop &lt; 1000000</td>
</tr>
<tr class="odd">
<td>&gt;=</td>
<td>Países a partir do ano 2000</td>
<td>year &gt;= 2000</td>
</tr>
<tr class="even">
<td>&amp;</td>
<td>Países europeus a partir de 2000</td>
<td>continent == “Europe” &amp; year &gt;= 2000</td>
</tr>
<tr class="odd">
<td><code>|</code></td>
<td>Países da Europa ou da Ásia</td>
<td>continent == “Europe” | continent == “Asia”</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Dicas
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Use <code>==</code> para igualdade (lembre-se: dois sinais de igual, não apenas um)</li>
<li>Use <code>&amp;</code> para “E” (quero este critério <strong>E</strong> aquele também)</li>
<li>Use <code>|</code> para “OU” (quero este critério <strong>OU</strong> aquele)</li>
</ul>
</div>
</div>
</section>
<section id="exemplo-básico" class="level3" data-number="9.2.5">
<h3 data-number="9.2.5" class="anchored" data-anchor-id="exemplo-básico"><span class="header-section-number">9.2.5</span> Exemplo básico</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Cenário: Análise de vendas por continente
</div>
</div>
<div class="callout-body-container callout-body">
<p>Imagine que a data frame <code>gapminder</code> representa dados de filiais de uma empresa multinacional:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb310"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb310-1"><a href="#cb310-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtra apenas países das Américas</span></span>
<span id="cb310-2"><a href="#cb310-2" aria-hidden="true" tabindex="-1"></a><span class="co"># como se fossem filiais da região Américas</span></span>
<span id="cb310-3"><a href="#cb310-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb310-4"><a href="#cb310-4" aria-hidden="true" tabindex="-1"></a>filiais_americas <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb310-5"><a href="#cb310-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(continent <span class="sc">==</span> <span class="st">"Americas"</span>)</span>
<span id="cb310-6"><a href="#cb310-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb310-7"><a href="#cb310-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualiza as primeiras 6 linhas do resultado</span></span>
<span id="cb310-8"><a href="#cb310-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(filiais_americas)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  country   continent  year lifeExp      pop gdpPercap
  &lt;fct&gt;     &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
1 Argentina Americas   1952    62.5 17876956     5911.
2 Argentina Americas   1957    64.4 19610538     6857.
3 Argentina Americas   1962    65.1 21283783     7133.
4 Argentina Americas   1967    65.6 22934225     8053.
5 Argentina Americas   1972    67.1 24779799     9443.
6 Argentina Americas   1977    68.5 26983828    10079.</code></pre>
</div>
</div>
<p><strong>Interpretação:</strong> Este filtro seria equivalente a selecionar apenas dados de filiais localizadas nas Américas para uma análise regional de desempenho.</p>
</div>
</div>
</section>
<section id="pensando-como-um-analista-de-negócios" class="level3" data-number="9.2.6">
<h3 data-number="9.2.6" class="anchored" data-anchor-id="pensando-como-um-analista-de-negócios"><span class="header-section-number">9.2.6</span> Pensando como um Analista de Negócios</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas de negócios traduzidas para filter()
</div>
</div>
<div class="callout-body-container callout-body">
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Pergunta de Negócio</th>
<th>Código com filter()</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Quais países tiveram PIB per capita acima de $20.000 em 2007?</td>
<td><code>filter(year == 2007 &amp; gdpPercap &gt; 20000)</code></td>
</tr>
<tr class="even">
<td>Quais países da Ásia tiveram expectativa de vida acima de 75 anos?</td>
<td><code>filter(continent == "Asia" &amp; lifeExp &gt; 75)</code></td>
</tr>
<tr class="odd">
<td>Quais países tiveram população superior a 100 milhões em 2007?</td>
<td><code>filter(year == 2007 &amp; pop &gt; 100000000)</code></td>
</tr>
<tr class="even">
<td>Quais países não são da Europa nem da América?</td>
<td><code>filter(continent != "Europe" &amp; continent != "Americas")</code></td>
</tr>
</tbody>
</table>
<p><strong>Dica:</strong> Comece sempre pensando na pergunta de negócio, depois traduza para o código</p>
</div>
</div>
</section>
<section id="múltiplas-condições-com-filter" class="level3" data-number="9.2.7">
<h3 data-number="9.2.7" class="anchored" data-anchor-id="múltiplas-condições-com-filter"><span class="header-section-number">9.2.7</span> Múltiplas condições com filter()</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Combinando condições
</div>
</div>
<div class="callout-body-container callout-body">
<p>Há duas maneiras principais de combinar condições:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb312"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb312-1"><a href="#cb312-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Método 1: Usando o operador &amp; (E lógico) - equivalente ao método 1</span></span>
<span id="cb312-2"><a href="#cb312-2" aria-hidden="true" tabindex="-1"></a>europeus_2007_alt <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb312-3"><a href="#cb312-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(continent <span class="sc">==</span> <span class="st">"Europe"</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">2007</span>)</span>
<span id="cb312-4"><a href="#cb312-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb312-5"><a href="#cb312-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Método 2: Usando o operador | (OU lógico)</span></span>
<span id="cb312-6"><a href="#cb312-6" aria-hidden="true" tabindex="-1"></a>europa_ou_asia <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb312-7"><a href="#cb312-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(continent <span class="sc">==</span> <span class="st">"Europe"</span> <span class="sc">|</span> continent <span class="sc">==</span> <span class="st">"Asia"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Dica importante:</p>
<ul>
<li><p>Com <code>&amp;</code> (“E”) ambas as condições precisam ser <code>TRUE</code> para que a linha seja mantida</p></li>
<li><p>Com <code>|</code> (“OU”), apenas uma das condições precisa ser <code>TRUE</code></p></li>
</ul>
</div>
</div>
</section>
<section id="filtrando-com-operadores-relacionais" class="level3" data-number="9.2.8">
<h3 data-number="9.2.8" class="anchored" data-anchor-id="filtrando-com-operadores-relacionais"><span class="header-section-number">9.2.8</span> Filtrando com operadores relacionais</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exemplos com diferentes operadores
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb313"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb313-1"><a href="#cb313-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Países com alta expectativa de vida (maior que 80 anos)</span></span>
<span id="cb313-2"><a href="#cb313-2" aria-hidden="true" tabindex="-1"></a>alta_exp_vida <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb313-3"><a href="#cb313-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(lifeExp <span class="sc">&gt;</span> <span class="dv">80</span>)</span>
<span id="cb313-4"><a href="#cb313-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb313-5"><a href="#cb313-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Países com PIB per capita abaixo de 500 dólares</span></span>
<span id="cb313-6"><a href="#cb313-6" aria-hidden="true" tabindex="-1"></a>baixo_pib <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb313-7"><a href="#cb313-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(gdpPercap <span class="sc">&lt;</span> <span class="dv">500</span>)</span>
<span id="cb313-8"><a href="#cb313-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb313-9"><a href="#cb313-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Anos diferentes de 2002</span></span>
<span id="cb313-10"><a href="#cb313-10" aria-hidden="true" tabindex="-1"></a>nao_2002 <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb313-11"><a href="#cb313-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">!=</span> <span class="dv">2002</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Utilize operadores relacionais para:</p>
<ul>
<li>Encontrar valores acima/abaixo de limites importantes</li>
<li>Excluir períodos ou categorias específicas</li>
<li>Identificar casos extremos ou outliers</li>
</ul>
</div>
</div>
</section>
<section id="combinando-filter-com-outras-funções" class="level3" data-number="9.2.9">
<h3 data-number="9.2.9" class="anchored" data-anchor-id="combinando-filter-com-outras-funções"><span class="header-section-number">9.2.9</span> Combinando filter() com outras funções</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
A importância da ordem das operações
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb314"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb314-1"><a href="#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Países europeus em 2007, mostrando apenas país e expectativa de vida</span></span>
<span id="cb314-2"><a href="#cb314-2" aria-hidden="true" tabindex="-1"></a>europeus_lifeExp_2007 <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb314-3"><a href="#cb314-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(continent <span class="sc">==</span> <span class="st">"Europe"</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span></span>
<span id="cb314-4"><a href="#cb314-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, lifeExp)</span>
<span id="cb314-5"><a href="#cb314-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-6"><a href="#cb314-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordenando o resultado por expectativa de vida (decrescente)</span></span>
<span id="cb314-7"><a href="#cb314-7" aria-hidden="true" tabindex="-1"></a>europeus_lifeExp_2007_ordenado <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb314-8"><a href="#cb314-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(continent <span class="sc">==</span> <span class="st">"Europe"</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span></span>
<span id="cb314-9"><a href="#cb314-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, lifeExp) <span class="sc">%&gt;%</span></span>
<span id="cb314-10"><a href="#cb314-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(lifeExp))</span>
<span id="cb314-11"><a href="#cb314-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-12"><a href="#cb314-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(europeus_lifeExp_2007_ordenado)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  country     lifeExp
  &lt;fct&gt;         &lt;dbl&gt;
1 Iceland        81.8
2 Switzerland    81.7
3 Spain          80.9
4 Sweden         80.9
5 France         80.7
6 Italy          80.5</code></pre>
</div>
</div>
<p><strong>Ordem correta</strong> das operações:</p>
<ol type="1">
<li>Comece com <strong>filter()</strong></li>
<li>Use <strong>select()</strong> depois de filter</li>
<li>Se inverter a ordem, a função filter() pode falhar se você removeu colunas necessárias</li>
</ol>
<p>Lembre-se: primeiro <strong>filter()</strong>, depois <strong>select()</strong>!</p>
</div>
</div>
</section>
<section id="erros-comuns-e-como-evitá-los-1" class="level3" data-number="9.2.10">
<h3 data-number="9.2.10" class="anchored" data-anchor-id="erros-comuns-e-como-evitá-los-1"><span class="header-section-number">9.2.10</span> Erros Comuns e Como Evitá-los</h3>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Os 4 erros mais comuns com filter()
</div>
</div>
<div class="callout-body-container callout-body">
<table class="caption-top table">
<colgroup>
<col style="width: 14%">
<col style="width: 45%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th>Erro</th>
<th>Errado</th>
<th>Correto</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Usar = em vez de ==</td>
<td><code>filter(continent = "Europe")</code></td>
<td><code>filter(continent == "Europe")</code></td>
</tr>
<tr class="even">
<td>Esquecer as aspas em nomes</td>
<td><code>filter(continent == Europe)</code></td>
<td><code>filter(continent == "Europe")</code></td>
</tr>
<tr class="odd">
<td>Não salvar o resultado</td>
<td><code>gapminder %&gt;% filter(year == 2007)</code></td>
<td><code>dados_2007 &lt;- gapminder %&gt;% filter(year == 2007)</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="exemplo-completo-comum" class="level3" data-number="9.2.11">
<h3 data-number="9.2.11" class="anchored" data-anchor-id="exemplo-completo-comum"><span class="header-section-number">9.2.11</span> Exemplo Completo Comum</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Países europeus com alta expectativa de vida em 2007?
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb316"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb316-1"><a href="#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Países europeus com expectativa de vida acima de 78 anos em 2007</span></span>
<span id="cb316-2"><a href="#cb316-2" aria-hidden="true" tabindex="-1"></a>resultado_final <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb316-3"><a href="#cb316-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filtrar por continente, ano e expectativa de vida</span></span>
<span id="cb316-4"><a href="#cb316-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(continent <span class="sc">==</span> <span class="st">"Europe"</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">2007</span> <span class="sc">&amp;</span> lifeExp <span class="sc">&gt;</span> <span class="dv">78</span>) <span class="sc">%&gt;%</span></span>
<span id="cb316-5"><a href="#cb316-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Selecionar variáveis de interesse</span></span>
<span id="cb316-6"><a href="#cb316-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, lifeExp, gdpPercap) <span class="sc">%&gt;%</span></span>
<span id="cb316-7"><a href="#cb316-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ordenar por expectativa de vida (decrescente)</span></span>
<span id="cb316-8"><a href="#cb316-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(lifeExp))</span>
<span id="cb316-9"><a href="#cb316-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb316-10"><a href="#cb316-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar resultados</span></span>
<span id="cb316-11"><a href="#cb316-11" aria-hidden="true" tabindex="-1"></a>resultado_final</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 17 × 3
   country        lifeExp gdpPercap
   &lt;fct&gt;            &lt;dbl&gt;     &lt;dbl&gt;
 1 Iceland           81.8    36181.
 2 Switzerland       81.7    37506.
 3 Spain             80.9    28821.
 4 Sweden            80.9    33860.
 5 France            80.7    30470.
 6 Italy             80.5    28570.
 7 Norway            80.2    49357.
 8 Austria           79.8    36126.
 9 Netherlands       79.8    36798.
10 Greece            79.5    27538.
11 Belgium           79.4    33693.
12 United Kingdom    79.4    33203.
13 Germany           79.4    32170.
14 Finland           79.3    33207.
15 Ireland           78.9    40676.
16 Denmark           78.3    35278.
17 Portugal          78.1    20510.</code></pre>
</div>
</div>
<p>Observe o fluxo de análise:</p>
<ol type="1">
<li>Filtramos os dados com critérios específicos</li>
<li>Selecionamos apenas as variáveis de interesse</li>
<li>Ordenamos os resultados para facilitar a interpretação</li>
<li>Todo o processo forma um “pipeline” de análise limpo e legível</li>
</ol>
</div>
</div>
</section>
<section id="resumo-função-filter" class="level3" data-number="9.2.12">
<h3 data-number="9.2.12" class="anchored" data-anchor-id="resumo-função-filter"><span class="header-section-number">9.2.12</span> Resumo: Função filter()</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
O que você precisa lembrar
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Para que serve:</strong> Selecionar apenas as linhas (observações) que atendem a determinadas condições</p></li>
<li><p><strong>Sintaxe básica:</strong></p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb318"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb318-1"><a href="#cb318-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">filter</span>(condição1, condição2, ...)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li><p><strong>Comparações mais usadas:</strong></p>
<ul>
<li>Igual: == (dois sinais de igual!)</li>
<li>Diferente: !=</li>
<li>Maior/Menor: &gt;, &lt;, &gt;=, &lt;=</li>
</ul></li>
<li><p><strong>Múltiplas condições:</strong></p>
<ul>
<li>Todas as condições (E): <code>filter(condição1 &amp; condição2)</code></li>
<li>Qualquer condição (OU): <code>filter(condição1 | condição2)</code></li>
</ul></li>
<li><p><strong>Lembre-se sempre de salvar o resultado:</strong></p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb319"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb319-1"><a href="#cb319-1" aria-hidden="true" tabindex="-1"></a>nova_df <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span> <span class="fu">filter</span>(...)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="função-mutate" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="função-mutate"><span class="header-section-number">9.3</span> Função mutate()</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
O que é a função mutate()?
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>A função <code>mutate()</code> permite <strong>criar novas variáveis</strong> ou <strong>modificar variáveis existentes</strong></p></li>
<li><p>Enquanto <code>filter()</code> seleciona linhas e <code>select()</code> seleciona colunas, <code>mutate()</code> <strong>adiciona ou modifica colunas</strong></p></li>
<li><p>É como ter uma “calculadora” que cria novas informações a partir dos dados existentes</p></li>
<li><p>Ideal para cálculos como: percentuais, totais, médias, categorias, etc.</p></li>
</ul>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/mutate.jpeg" class="img-fluid figure-img"></p>
<figcaption>Cria novas variáveis a partir das variáveis existentes</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Sintaxe da função mutate()
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell" style="font-size: 1em;">
<div class="sourceCode cell-code" id="cb320"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb320-1"><a href="#cb320-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Formato básico</span></span>
<span id="cb320-2"><a href="#cb320-2" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">nova_coluna =</span> expressão)</span>
<span id="cb320-3"><a href="#cb320-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb320-4"><a href="#cb320-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplos práticos</span></span>
<span id="cb320-5"><a href="#cb320-5" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">valor_total =</span> preco <span class="sc">*</span> quantidade)</span>
<span id="cb320-6"><a href="#cb320-6" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">valor_com_desconto =</span> preco <span class="sc">*</span> <span class="fl">0.9</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>O que cada parte significa:</strong></p>
<ul>
<li><strong>nova_coluna</strong>: Nome da nova variável que você está criando</li>
<li><strong>expressão</strong>: Fórmula que calcula os valores da nova variável</li>
<li>A expressão é aplicada a cada linha individualmente</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Aplicação: Análise de Vendas
</div>
</div>
<div class="callout-body-container callout-body">
<p>Imagine que a data frame <code>gapminder</code> contém dados de vendas globais da sua empresa:</p>
<div class="cell" style="font-size: 1em;">
<div class="sourceCode cell-code" id="cb321"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb321-1"><a href="#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando variáveis para análise de vendas</span></span>
<span id="cb321-2"><a href="#cb321-2" aria-hidden="true" tabindex="-1"></a>vendas_analise <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb321-3"><a href="#cb321-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span>  <span class="co"># Filtra dados somente de 2007</span></span>
<span id="cb321-4"><a href="#cb321-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb321-5"><a href="#cb321-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># PIB total representa a receita total da região</span></span>
<span id="cb321-6"><a href="#cb321-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">receita_total =</span> gdpPercap <span class="sc">*</span> pop,</span>
<span id="cb321-7"><a href="#cb321-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Receita em milhões (para facilitar a leitura)</span></span>
<span id="cb321-8"><a href="#cb321-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">receita_milhoes =</span> receita_total <span class="sc">/</span> <span class="dv">1000000</span>,</span>
<span id="cb321-9"><a href="#cb321-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Indicador de destaque (regiões com alta receita por pessoa)</span></span>
<span id="cb321-10"><a href="#cb321-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">destaque =</span> gdpPercap <span class="sc">&gt;</span> <span class="dv">20000</span></span>
<span id="cb321-11"><a href="#cb321-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb321-12"><a href="#cb321-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Vamos visualizar apenas algumas colunas e 5 linhas</span></span>
<span id="cb321-13"><a href="#cb321-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, receita_milhoes, gdpPercap, destaque) <span class="sc">%&gt;%</span></span>
<span id="cb321-14"><a href="#cb321-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span>
<span id="cb321-15"><a href="#cb321-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-16"><a href="#cb321-16" aria-hidden="true" tabindex="-1"></a>vendas_analise</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Interpretação administrativa:</strong> Este tipo de transformação é usado diariamente nas empresas para converter dados brutos em métricas de negócios úteis para tomada de decisão.</p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Transformações mais comuns: Operações aritméticas básicas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell" style="font-size: 1em;">
<div class="sourceCode cell-code" id="cb322"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb322-1"><a href="#cb322-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Operações aritméticas básicas com mutate()</span></span>
<span id="cb322-2"><a href="#cb322-2" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb322-3"><a href="#cb322-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Brazil"</span>, year <span class="sc">&gt;=</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb322-4"><a href="#cb322-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb322-5"><a href="#cb322-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Adição: adiciona um valor fixo</span></span>
<span id="cb322-6"><a href="#cb322-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">pop_ajustada =</span> pop <span class="sc">+</span> <span class="dv">1000000</span>,</span>
<span id="cb322-7"><a href="#cb322-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Multiplicação: multiplica por um fator</span></span>
<span id="cb322-8"><a href="#cb322-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">gdp_reais =</span> gdpPercap <span class="sc">*</span> <span class="fl">5.2</span>,  <span class="co"># Convertendo para reais</span></span>
<span id="cb322-9"><a href="#cb322-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Divisão: divide para mudar a escala </span></span>
<span id="cb322-10"><a href="#cb322-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">pop_milhoes =</span> pop <span class="sc">/</span> <span class="dv">1000000</span>   <span class="co"># População em milhões</span></span>
<span id="cb322-11"><a href="#cb322-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb322-12"><a href="#cb322-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, pop, pop_ajustada, pop_milhoes, gdpPercap, gdp_reais)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Dica:</strong> As operações mais utilizadas em análises de negócios são multiplicação (para fatores, taxas, conversões) e divisão (para mudar escalas e calcular proporções).</p>
</div>
</div>
<section id="criando-categorias-com-ifelse" class="level3" data-number="9.3.1">
<h3 data-number="9.3.1" class="anchored" data-anchor-id="criando-categorias-com-ifelse"><span class="header-section-number">9.3.1</span> Criando categorias com ifelse()</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
O que é a função ifelse()?
</div>
</div>
<div class="callout-body-container callout-body">
<p>A função <code>ifelse()</code> permite criar novas variáveis categóricas baseadas em condições:</p>
<p><strong>Como funciona:</strong> <code>ifelse(condição, valor_se_verdadeiro, valor_se_falso)</code></p>
<div class="cell" style="font-size: 1em;">
<div class="sourceCode cell-code" id="cb323"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb323-1"><a href="#cb323-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando categorias com ifelse</span></span>
<span id="cb323-2"><a href="#cb323-2" aria-hidden="true" tabindex="-1"></a>paises_categorizados <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb323-3"><a href="#cb323-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span></span>
<span id="cb323-4"><a href="#cb323-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb323-5"><a href="#cb323-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">nivel_desenvolvimento =</span> <span class="fu">ifelse</span>(gdpPercap <span class="sc">&gt;</span> <span class="dv">10000</span>, </span>
<span id="cb323-6"><a href="#cb323-6" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">"Desenvolvimento Alto"</span>, </span>
<span id="cb323-7"><a href="#cb323-7" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">"Desenvolvimento Baixo"</span>)</span>
<span id="cb323-8"><a href="#cb323-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb323-9"><a href="#cb323-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, gdpPercap, nivel_desenvolvimento) <span class="sc">%&gt;%</span></span>
<span id="cb323-10"><a href="#cb323-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">6</span>)</span>
<span id="cb323-11"><a href="#cb323-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb323-12"><a href="#cb323-12" aria-hidden="true" tabindex="-1"></a>paises_categorizados</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>É como dizer: “SE o PIB per capita for maior que 10.000, então classifique como ‘Desenvolvimento Alto’, SENÃO classifique como ‘Desenvolvimento Baixo’”</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Criando KPIs com mutate() e ifelse()
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell" style="font-size: 1em;">
<div class="sourceCode cell-code" id="cb324"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb324-1"><a href="#cb324-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb324-2"><a href="#cb324-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span></span>
<span id="cb324-3"><a href="#cb324-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(</span>
<span id="cb324-4"><a href="#cb324-4" aria-hidden="true" tabindex="-1"></a>   <span class="at">pib_total =</span> gdpPercap <span class="sc">*</span> pop,  <span class="co"># PIB total</span></span>
<span id="cb324-5"><a href="#cb324-5" aria-hidden="true" tabindex="-1"></a>   <span class="at">pib_percentual_global =</span> (pib_total<span class="sc">/</span><span class="fu">sum</span>(pib_total))<span class="sc">*</span><span class="dv">100</span>, <span class="co"># % do PIB global</span></span>
<span id="cb324-6"><a href="#cb324-6" aria-hidden="true" tabindex="-1"></a>   <span class="at">performance =</span> <span class="fu">ifelse</span>(gdpPercap <span class="sc">&gt;</span> <span class="fu">mean</span>(gdpPercap), </span>
<span id="cb324-7"><a href="#cb324-7" aria-hidden="true" tabindex="-1"></a>                       <span class="st">"Acima da média"</span>, </span>
<span id="cb324-8"><a href="#cb324-8" aria-hidden="true" tabindex="-1"></a>                       <span class="st">"Abaixo da média"</span>)</span>
<span id="cb324-9"><a href="#cb324-9" aria-hidden="true" tabindex="-1"></a> ) <span class="sc">%&gt;%</span> </span>
<span id="cb324-10"><a href="#cb324-10" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(country, pib_total, pib_percentual_global, performance)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Isso mostra como transformar dados brutos em informações gerenciais.</p>
</div>
</div>
</section>
<section id="criando-múltiplas-categorias-com-case_when" class="level3" data-number="9.3.2">
<h3 data-number="9.3.2" class="anchored" data-anchor-id="criando-múltiplas-categorias-com-case_when"><span class="header-section-number">9.3.2</span> Criando Múltiplas Categorias com case_when()</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Quando precisamos de mais de duas categorias
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>case_when()</code> é como um “sistema de classificação” para criar categorias mais complexas:</p>
<div class="cell" style="font-size: 1em;">
<div class="sourceCode cell-code" id="cb325"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb325-1"><a href="#cb325-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplo de múltiplas categorias</span></span>
<span id="cb325-2"><a href="#cb325-2" aria-hidden="true" tabindex="-1"></a>paises_classificados <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb325-3"><a href="#cb325-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span></span>
<span id="cb325-4"><a href="#cb325-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb325-5"><a href="#cb325-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">classe_desenvolvimento =</span> <span class="fu">case_when</span>(</span>
<span id="cb325-6"><a href="#cb325-6" aria-hidden="true" tabindex="-1"></a>      gdpPercap <span class="sc">&lt;</span> <span class="dv">2000</span> <span class="sc">~</span> <span class="st">"Baixo"</span>,</span>
<span id="cb325-7"><a href="#cb325-7" aria-hidden="true" tabindex="-1"></a>      gdpPercap <span class="sc">&lt;</span> <span class="dv">10000</span> <span class="sc">~</span> <span class="st">"Médio"</span>,</span>
<span id="cb325-8"><a href="#cb325-8" aria-hidden="true" tabindex="-1"></a>      gdpPercap <span class="sc">&gt;=</span> <span class="dv">10000</span> <span class="sc">~</span> <span class="st">"Alto"</span></span>
<span id="cb325-9"><a href="#cb325-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb325-10"><a href="#cb325-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb325-11"><a href="#cb325-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, gdpPercap, classe_desenvolvimento) <span class="sc">%&gt;%</span></span>
<span id="cb325-12"><a href="#cb325-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">6</span>)</span>
<span id="cb325-13"><a href="#cb325-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb325-14"><a href="#cb325-14" aria-hidden="true" tabindex="-1"></a>paises_classificados</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Como funciona:</strong></p>
<ul>
<li>Cada linha representa uma condição: <code>condição ~ "valor a atribuir"</code></li>
<li>As condições são verificadas em ordem (de cima para baixo)</li>
<li>Quando uma condição é verdadeira, o valor correspondente é atribuído</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Quando usar ifelse() vs.&nbsp;case_when()?
</div>
</div>
<div class="callout-body-container callout-body">
<table class="caption-top table">
<colgroup>
<col style="width: 26%">
<col style="width: 43%">
<col style="width: 30%">
</colgroup>
<thead>
<tr class="header">
<th>Função</th>
<th>Quando usar</th>
<th>Exemplo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>ifelse()</code></td>
<td>Para divisões simples em duas categorias</td>
<td><code>ifelse(vendas &gt; meta, "Meta atingida", "Meta não atingida")</code></td>
</tr>
<tr class="even">
<td><code>case_when()</code></td>
<td>Para múltiplas categorias ou condições complexas</td>
<td>Classificar clientes em “Bronze”, “Prata”, “Ouro” e “Platina” baseado em diferentes critérios</td>
</tr>
</tbody>
</table>
<p><strong>Analogia de negócios:</strong></p>
<ul>
<li><p><code>ifelse()</code> é como uma decisão “sim/não” (aprovação de crédito simples)</p></li>
<li><p><code>case_when()</code> é como um sistema de classificação de clientes com várias categorias</p></li>
</ul>
</div>
</div>
</section>
<section id="erros-comuns-e-como-evitá-los-2" class="level3" data-number="9.3.3">
<h3 data-number="9.3.3" class="anchored" data-anchor-id="erros-comuns-e-como-evitá-los-2"><span class="header-section-number">9.3.3</span> Erros Comuns e Como Evitá-los</h3>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Os erros que todos cometem no início
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Usar o operador de atribuição errado</strong></p>
<ul>
<li>ERRADO: <code>mutate(nova_var &lt;- expressão)</code> ❌</li>
<li>CORRETO: <code>mutate(nova_var = expressão)</code> ✅</li>
</ul></li>
<li><p><strong>Esquecer de salvar o resultado</strong></p>
<ul>
<li>ERRADO: <code>dados %&gt;% mutate(nova_var = x * 2)</code> ❌ (resultado não salvo)</li>
<li>CORRETO: <code>dados_novos &lt;- dados %&gt;% mutate(nova_var = x * 2)</code> ✅</li>
</ul></li>
<li><p><strong>Tentar usar variáveis que acabou de criar sem manter os resultados</strong></p></li>
</ol>
<p>ERRADO:</p>
<div class="cell" style="font-size: 1.2em;">
<div class="sourceCode cell-code" id="cb326"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb326-1"><a href="#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Executando dois comandos separados:</span></span>
<span id="cb326-2"><a href="#cb326-2" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">nova_var =</span> x <span class="sc">*</span> <span class="dv">2</span>)  <span class="co"># Resultado não salvo em lugar nenhum</span></span>
<span id="cb326-3"><a href="#cb326-3" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">filter</span>(nova_var <span class="sc">&gt;</span> <span class="dv">10</span>)     <span class="co"># ❌ Erro! nova_var não existe em 'dados'</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>CORRETO (Pipeline único):</p>
<div class="cell" style="font-size: 1.2em;">
<div class="sourceCode cell-code" id="cb327"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb327-1"><a href="#cb327-1" aria-hidden="true" tabindex="-1"></a>dados_novos <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span></span>
<span id="cb327-2"><a href="#cb327-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nova_var =</span> x <span class="sc">*</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb327-3"><a href="#cb327-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nova_var <span class="sc">&gt;</span> <span class="dv">10</span>) <span class="co"># ✅ Funciona porque tudo está no mesmo pipeline</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="resumo-função-mutate" class="level3" data-number="9.3.4">
<h3 data-number="9.3.4" class="anchored" data-anchor-id="resumo-função-mutate"><span class="header-section-number">9.3.4</span> Resumo: Função mutate()</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
O que você precisa lembrar
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>O que faz:</strong> <code>mutate()</code> cria novas variáveis ou modifica existentes</p></li>
<li><p><strong>Usos comuns no mundo dos negócios:</strong></p>
<ul>
<li>Calcular totais, médias, porcentagens</li>
<li>Converter unidades (dólares para reais, unidades para milhares)</li>
<li>Criar categorias e classificações</li>
</ul></li>
<li><p><strong>Como usar na prática:</strong></p></li>
</ol>
<div class="cell" style="font-size: 1em;">
<div class="sourceCode cell-code" id="cb328"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb328-1"><a href="#cb328-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">nova_variavel =</span> expressão)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li><p><strong>Ferramentas complementares:</strong></p>
<ul>
<li><code>ifelse()</code> para classificações simples (sim/não)</li>
<li><code>case_when()</code> para classificações múltiplas</li>
</ul></li>
<li><p><strong>Lembre-se de salvar o resultado em um novo objeto:</strong></p></li>
</ol>
<div class="cell" style="font-size: 1em;">
<div class="sourceCode cell-code" id="cb329"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb329-1"><a href="#cb329-1" aria-hidden="true" tabindex="-1"></a>novo_df <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(...)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="funções-group_by-summarize" class="level2" data-number="9.4">
<h2 data-number="9.4" class="anchored" data-anchor-id="funções-group_by-summarize"><span class="header-section-number">9.4</span> Funções group_by() + summarize()</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
O que são as funções group_by() e summarize()?
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>A função <code>group_by()</code> permite <strong>agrupar dados</strong> por uma ou mais variáveis categóricas</p></li>
<li><p>A função <code>summarize()</code> (ou <code>summarise()</code>) permite <strong>calcular estatísticas resumidas</strong> para cada grupo</p></li>
<li><p>Estas funções geralmente trabalham juntas como uma ferramenta poderosa para análise</p></li>
<li><p>É como criar “subtotais” ou “relatórios consolidados” por categorias (ex: vendas por região, despesas por departamento)</p></li>
</ul>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/groupby.jpeg" class="img-fluid figure-img" style="width:40.0%"></p>
<figcaption>Funções group_by() e summarize()?</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Sintaxe das funções group_by() e summarize()
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell" style="font-size: 1em;">
<div class="sourceCode cell-code" id="cb330"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb330-1"><a href="#cb330-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estrutura básica</span></span>
<span id="cb330-2"><a href="#cb330-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb330-3"><a href="#cb330-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(variavel_de_agrupamento) <span class="sc">%&gt;%</span></span>
<span id="cb330-4"><a href="#cb330-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">nome_do_resumo =</span> <span class="fu">funcao</span>(variavel))</span>
<span id="cb330-5"><a href="#cb330-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb330-6"><a href="#cb330-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplo prático</span></span>
<span id="cb330-7"><a href="#cb330-7" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb330-8"><a href="#cb330-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(departamento) <span class="sc">%&gt;%</span></span>
<span id="cb330-9"><a href="#cb330-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">media_vendas =</span> <span class="fu">mean</span>(vendas))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>df</strong>: A data frame que contém os dados</li>
<li><strong>variavel_de_agrupamento</strong>: Variável <strong>categórica</strong> pela qual agrupar (ex: região, produto)</li>
<li><strong>nome_do_resumo</strong>: Nome que você escolhe para o resultado calculado</li>
<li><strong>funcao</strong>: Função estatística (ex: mean, sum, max, min, sd, n)</li>
<li><strong>variavel</strong>: Variável para calcular a estatística</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exemplo: Análise Financeira por Continente
</div>
</div>
<div class="callout-body-container callout-body">
<p>Imagine que você é um analista financeiro e precisa preparar um relatório executivo comparando regiões:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb331"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb331-1"><a href="#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cria um relatório de PIB médio por continente</span></span>
<span id="cb331-2"><a href="#cb331-2" aria-hidden="true" tabindex="-1"></a>relatorio_continentes <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb331-3"><a href="#cb331-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span>  <span class="co"># Filtra para dados mais recentes</span></span>
<span id="cb331-4"><a href="#cb331-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span>   <span class="co"># Agrupa por continente</span></span>
<span id="cb331-5"><a href="#cb331-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb331-6"><a href="#cb331-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">PIB_medio =</span> <span class="fu">mean</span>(gdpPercap),         <span class="co"># Média do PIB per capita</span></span>
<span id="cb331-7"><a href="#cb331-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_populacao =</span> <span class="fu">sum</span>(pop),          <span class="co"># População total</span></span>
<span id="cb331-8"><a href="#cb331-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Paises_analisados =</span> <span class="fu">n</span>(),             <span class="co"># Número de países</span></span>
<span id="cb331-9"><a href="#cb331-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">PIB_minimo =</span> <span class="fu">min</span>(gdpPercap),         <span class="co"># PIB mínimo</span></span>
<span id="cb331-10"><a href="#cb331-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">PIB_maximo =</span> <span class="fu">max</span>(gdpPercap)          <span class="co"># PIB máximo</span></span>
<span id="cb331-11"><a href="#cb331-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb331-12"><a href="#cb331-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(PIB_medio))  <span class="co"># Ordena do maior para o menor PIB médio</span></span>
<span id="cb331-13"><a href="#cb331-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb331-14"><a href="#cb331-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualiza o resultado</span></span>
<span id="cb331-15"><a href="#cb331-15" aria-hidden="true" tabindex="-1"></a>relatorio_continentes</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
  continent PIB_medio Total_populacao Paises_analisados PIB_minimo PIB_maximo
  &lt;fct&gt;         &lt;dbl&gt;           &lt;dbl&gt;             &lt;int&gt;      &lt;dbl&gt;      &lt;dbl&gt;
1 Oceania      29810.        24549947                 2     25185.     34435.
2 Europe       25054.       586098529                30      5937.     49357.
3 Asia         12473.      3811953827                33       944      47307.
4 Americas     11003.       898871184                25      1202.     42952.
5 Africa        3089.       929539692                52       278.     13206.</code></pre>
</div>
</div>
<p><strong>Interpretação</strong> Este tipo de relatório consolidado por região é crítico para análises comparativas entre mercados e para apresentações executivas. Mostra claramente as estatísticas-chave para cada grupo (continente), facilitando comparações e decisões estratégicas.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Funções Estatísticas Mais Usadas com summarize()
</div>
</div>
<div class="callout-body-container callout-body">
<table class="caption-top table">
<colgroup>
<col style="width: 15%">
<col style="width: 28%">
<col style="width: 24%">
<col style="width: 32%">
</colgroup>
<thead>
<tr class="header">
<th>Função</th>
<th>O que calcula</th>
<th>Exemplo em R</th>
<th>Uso em Negócios</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>mean()</code></td>
<td>Média</td>
<td><code>mean(vendas)</code></td>
<td>Valor médio de vendas por região</td>
</tr>
<tr class="even">
<td><code>sum()</code></td>
<td>Soma total</td>
<td><code>sum(receita)</code></td>
<td>Receita total por categoria</td>
</tr>
<tr class="odd">
<td><code>min()</code></td>
<td>Valor mínimo</td>
<td><code>min(preco)</code></td>
<td>Menor preço praticado</td>
</tr>
<tr class="even">
<td><code>max()</code></td>
<td>Valor máximo</td>
<td><code>max(despesa)</code></td>
<td>Maior despesa do período</td>
</tr>
<tr class="odd">
<td><code>sd()</code></td>
<td>Desvio padrão</td>
<td><code>sd(producao)</code></td>
<td>Variabilidade da produção</td>
</tr>
<tr class="even">
<td><code>n()</code></td>
<td>Contagem de linhas</td>
<td><code>n()</code></td>
<td>Número de transações</td>
</tr>
<tr class="odd">
<td><code>n_distinct()</code></td>
<td>Contagem de valores únicos</td>
<td><code>n_distinct(cliente)</code></td>
<td>Número de clientes únicos</td>
</tr>
<tr class="even">
<td><code>median()</code></td>
<td>Mediana</td>
<td><code>median(vendas)</code></td>
<td>Valor típico de vendas</td>
</tr>
</tbody>
</table>
<p><strong>Dica para gestores:</strong> Sempre inclua tanto medidas de “tendência central” (média, mediana) quanto de “variação” (desvio padrão) para ter uma visão mais completa dos dados.</p>
</div>
</div>
<section id="agrupando-por-múltiplas-variáveis" class="level3" data-number="9.4.1">
<h3 data-number="9.4.1" class="anchored" data-anchor-id="agrupando-por-múltiplas-variáveis"><span class="header-section-number">9.4.1</span> Agrupando por Múltiplas Variáveis</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Análises mais detalhadas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell" style="font-size: 1em;">
<div class="sourceCode cell-code" id="cb333"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb333-1"><a href="#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Análise de expectativa de vida por continente e ano</span></span>
<span id="cb333-2"><a href="#cb333-2" aria-hidden="true" tabindex="-1"></a>tendencias_por_continente <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb333-3"><a href="#cb333-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent, year) <span class="sc">%&gt;%</span>  <span class="co"># Agrupa por DUAS variáveis</span></span>
<span id="cb333-4"><a href="#cb333-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb333-5"><a href="#cb333-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">expectativa_vida_media =</span> <span class="fu">mean</span>(lifeExp),</span>
<span id="cb333-6"><a href="#cb333-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">paises_analisados =</span> <span class="fu">n</span>()</span>
<span id="cb333-7"><a href="#cb333-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb333-8"><a href="#cb333-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(continent, year)</span>
<span id="cb333-9"><a href="#cb333-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb333-10"><a href="#cb333-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostra resultados parciais</span></span>
<span id="cb333-11"><a href="#cb333-11" aria-hidden="true" tabindex="-1"></a>tendencias_por_continente <span class="sc">%&gt;%</span> </span>
<span id="cb333-12"><a href="#cb333-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(continent <span class="sc">==</span> <span class="st">"Americas"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb333-13"><a href="#cb333-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">3</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
# Groups:   continent [1]
  continent  year expectativa_vida_media paises_analisados
  &lt;fct&gt;     &lt;int&gt;                  &lt;dbl&gt;             &lt;int&gt;
1 Americas   1952                   53.3                25
2 Americas   1957                   56.0                25
3 Americas   1962                   58.4                25</code></pre>
</div>
</div>
<p><strong>Contexto empresarial:</strong> Este tipo de análise é comum em:</p>
<ul>
<li>Relatórios de vendas por região e trimestre</li>
<li>Análise de desempenho por departamento e mês</li>
<li>Monitoramento de métricas por produto e canal de vendas</li>
</ul>
</div>
</div>
</section>
<section id="erros-comuns-e-como-evitá-los-3" class="level3" data-number="9.4.2">
<h3 data-number="9.4.2" class="anchored" data-anchor-id="erros-comuns-e-como-evitá-los-3"><span class="header-section-number">9.4.2</span> Erros Comuns e Como Evitá-los</h3>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Os erros que todos cometem no início
</div>
</div>
<div class="callout-body-container callout-body">
<table class="caption-top table">
<colgroup>
<col style="width: 14%">
<col style="width: 45%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th>Erro</th>
<th>Errado</th>
<th>Correto</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Não usar summarize após group_by</td>
<td><code>dados %&gt;% group_by(regiao)</code></td>
<td><code>dados %&gt;% group_by(regiao) %&gt;% summarize(...)</code></td>
</tr>
<tr class="even">
<td>Tentar agrupar antes de filtrar</td>
<td><code>group_by(regiao) %&gt;% filter(mean(vendas) &gt; 1000)</code></td>
<td>Usar <code>filter()</code> ANTES de <code>group_by()</code></td>
</tr>
<tr class="odd">
<td>Esquecer de desagrupar</td>
<td>Continuar usando dados agrupados</td>
<td>Usar <code>ungroup()</code> quando terminar com análises agrupadas</td>
</tr>
</tbody>
</table>
<p><strong>Dica:</strong> <code>group_by</code> por si não produz nenhum resultado.</p>
</div>
</div>
</section>
<section id="resumo-funções-group_by-e-summarize" class="level3" data-number="9.4.3">
<h3 data-number="9.4.3" class="anchored" data-anchor-id="resumo-funções-group_by-e-summarize"><span class="header-section-number">9.4.3</span> Resumo: Funções group_by() e summarize()</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
O que você precisa lembrar
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Para que servem:</strong></p>
<ul>
<li><p><code>group_by()</code>: Agrupa dados por categorias (como agrupar linhas em uma planilha)</p></li>
<li><p><code>summarize()</code>: Calcula estatísticas para cada grupo (como criar subtotais)</p></li>
</ul></li>
<li><p><strong>Sintaxe básica:</strong></p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb335"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb335-1"><a href="#cb335-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> </span>
<span id="cb335-2"><a href="#cb335-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(categoria) <span class="sc">%&gt;%</span></span>
<span id="cb335-3"><a href="#cb335-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">resumo =</span> <span class="fu">funcao</span>(variavel))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li><p><strong>Funções estatísticas básicas:</strong></p>
<ul>
<li>Para totais: <code>sum()</code></li>
<li>Para médias: <code>mean()</code></li>
<li>Para contagens: <code>n()</code></li>
<li>Para mínimos/máximos: <code>min()</code>, <code>max()</code></li>
</ul></li>
<li><p><strong>Fluxo de trabalho típico:</strong></p>
<ul>
<li>Primeiro filtre os dados (<code>filter()</code>)</li>
<li>Depois agrupe (<code>group_by()</code>)</li>
<li>Em seguida calcule estatísticas (<code>summarize()</code>)</li>
<li>Por fim, ordene os resultados (<code>arrange()</code>)</li>
</ul></li>
<li><p><strong>Lembre-se sempre de salvar o resultado:</strong></p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb336"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb336-1"><a href="#cb336-1" aria-hidden="true" tabindex="-1"></a>relatorio_final <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(...) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(...)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="função-arrange" class="level2" data-number="9.5">
<h2 data-number="9.5" class="anchored" data-anchor-id="função-arrange"><span class="header-section-number">9.5</span> Função arrange()</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Descrição
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>A função <code>arrange()</code> ordena as linhas (observações) de uma data frame com base nos valores de uma ou mais colunas (variáveis)</p></li>
<li><p>Por padrão, organiza em ordem <strong>crescente</strong> (do menor para o maior)</p></li>
<li><p>Use <code>desc()</code> para ordenar em ordem decrescente (do maior para o menor)</p></li>
</ul>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/arrange.jpeg" class="img-fluid figure-img"></p>
<figcaption>Reordena as linhas de uma data frame segundo uma variável, por padrão em ordem crescente, com desc() em ordem decrescente</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Sintaxe da função arrange()
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb337"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb337-1"><a href="#cb337-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Formato básico</span></span>
<span id="cb337-2"><a href="#cb337-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(variavel)         <span class="co"># ordem crescente</span></span>
<span id="cb337-3"><a href="#cb337-3" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(variavel))   <span class="co"># ordem decrescente</span></span>
<span id="cb337-4"><a href="#cb337-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb337-5"><a href="#cb337-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordenar por múltiplas variáveis</span></span>
<span id="cb337-6"><a href="#cb337-6" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(var1, var2)       <span class="co"># Ordenar primeiro por var1, depois var2</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>df</strong>: A data frame que contém os dados</li>
<li><strong>variavel</strong>: Nome da coluna pela qual você quer ordenar as observações</li>
<li>Use <code>desc()</code> para ordem descrescente (do maior para o menor)</li>
<li>Quando ordenando por múltiplas variáveis, a primeira tem prioridade</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Aplicação: Análise de Desempenho
</div>
</div>
<div class="callout-body-container callout-body">
<p>Imagine que você é um analista de mercado e precisa identificar rapidamente os países mais promissores para expansão:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb338"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb338-1"><a href="#cb338-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando um ranking de países por PIB per capita em 2007</span></span>
<span id="cb338-2"><a href="#cb338-2" aria-hidden="true" tabindex="-1"></a>ranking_paises <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb338-3"><a href="#cb338-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span>                <span class="co"># Filtra dados apenas de 2007</span></span>
<span id="cb338-4"><a href="#cb338-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, continent, gdpPercap) <span class="sc">%&gt;%</span> <span class="co"># Seleciona colunas relevantes</span></span>
<span id="cb338-5"><a href="#cb338-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(gdpPercap)) <span class="sc">%&gt;%</span>            <span class="co"># Ordena do maior para o menor PIB</span></span>
<span id="cb338-6"><a href="#cb338-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">6</span>)                                <span class="co"># Mostra os 10 primeiros resultados</span></span>
<span id="cb338-7"><a href="#cb338-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb338-8"><a href="#cb338-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualiza o resultado</span></span>
<span id="cb338-9"><a href="#cb338-9" aria-hidden="true" tabindex="-1"></a>ranking_paises</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country          continent gdpPercap
  &lt;fct&gt;            &lt;fct&gt;         &lt;dbl&gt;
1 Norway           Europe       49357.
2 Kuwait           Asia         47307.
3 Singapore        Asia         47143.
4 United States    Americas     42952.
5 Ireland          Europe       40676.
6 Hong Kong, China Asia         39725.</code></pre>
</div>
</div>
<p><strong>Interpretação</strong> Este tipo de ordenação é relevante em análises de mercado para identificar rapidamente os países mais ricos (potenciais mercados premium) ou para encontrar as regiões que precisam de mais atenção (ordenando do menor para o maior).</p>
</div>
</div>
<section id="erros-comuns-e-como-evitá-los-4" class="level3" data-number="9.5.1">
<h3 data-number="9.5.1" class="anchored" data-anchor-id="erros-comuns-e-como-evitá-los-4"><span class="header-section-number">9.5.1</span> Erros Comuns e Como Evitá-los</h3>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Cuidados ao usar arrange()
</div>
</div>
<div class="callout-body-container callout-body">
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 40%">
<col style="width: 36%">
</colgroup>
<thead>
<tr class="header">
<th>Erro</th>
<th>Problema</th>
<th>Solução</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Ordem incorreta</td>
<td><code>arrange(dados, desc())</code> sem especificar a variável</td>
<td><code>arrange(dados, desc(variavel))</code></td>
</tr>
<tr class="even">
<td>Tentar ordenar por variável não existente</td>
<td><code>arrange(vendas_por_regiao)</code> quando a coluna não existe</td>
<td>Verificar primeiro os nomes das colunas com <code>names()</code></td>
</tr>
<tr class="odd">
<td>Não salvar o resultado ordenado</td>
<td>Ordenar mas não atribuir a um objeto</td>
<td><code>dados_ordenados &lt;- dados %&gt;% arrange(...)</code></td>
</tr>
</tbody>
</table>
<p><strong>Lembre-se:</strong> A ordenação é temporária se você não salvar o resultado em um novo objeto!</p>
</div>
</div>
</section>
<section id="resumo-função-arrange" class="level3" data-number="9.5.2">
<h3 data-number="9.5.2" class="anchored" data-anchor-id="resumo-função-arrange"><span class="header-section-number">9.5.2</span> Resumo: Função arrange()</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
O que você precisa lembrar
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Para que serve:</strong> Ordenar as linhas (observações) com base nos valores de uma ou mais colunas</p></li>
<li><p><strong>Sintaxe básica:</strong></p></li>
</ol>
<div class="cell" style="font-size: 1em;">
<div class="sourceCode cell-code" id="cb340"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb340-1"><a href="#cb340-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(variavel)         <span class="co"># ordem crescente </span></span>
<span id="cb340-2"><a href="#cb340-2" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(variavel))   <span class="co"># ordem decrescente </span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li><p><strong>Usos comuns em negócios:</strong></p>
<ul>
<li>Criar rankings de vendedores, produtos ou regiões</li>
<li>Identificar os maiores clientes (Top 10)</li>
<li>Encontrar problemas (itens com menor desempenho)</li>
<li>Preparar dados para relatórios e apresentações</li>
</ul></li>
<li><p><strong>Lembre-se sempre:</strong></p>
<ul>
<li>Use <code>desc()</code> para ordem decrescente</li>
<li>Para ordenar por múltiplas colunas: <code>arrange(var1, var2)</code></li>
<li>Salve o resultado em um novo objeto!</li>
</ul></li>
</ol>
<div class="cell" style="font-size: 1em;">
<div class="sourceCode cell-code" id="cb341"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb341-1"><a href="#cb341-1" aria-hidden="true" tabindex="-1"></a>dados_ordenados <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(...)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="resumo-das-funções-dplyr" class="level2" data-number="9.6">
<h2 data-number="9.6" class="anchored" data-anchor-id="resumo-das-funções-dplyr"><span class="header-section-number">9.6</span> Resumo das Funções dplyr</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resumo das seis funções principais
</div>
</div>
<div class="callout-body-container callout-body">
<table class="caption-top table">
<thead>
<tr class="header">
<th>Função</th>
<th>Propósito</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>dplyr::filter()</code></td>
<td>Seleciona linhas baseadas em condições</td>
</tr>
<tr class="even">
<td><code>dplyr::select()</code></td>
<td>Seleciona colunas específicas</td>
</tr>
<tr class="odd">
<td><code>dplyr::mutate()</code></td>
<td>Cria ou modifica colunas</td>
</tr>
<tr class="even">
<td><code>dplyr::group_by()</code></td>
<td>Agrupa dados por categorias</td>
</tr>
<tr class="odd">
<td><code>dplyr::summarize()</code></td>
<td>Calcula estatísticas resumidas</td>
</tr>
<tr class="even">
<td><code>dplyr::arrange()</code></td>
<td>Ordena linhas</td>
</tr>
</tbody>
</table>
<p><strong>Lembre-se</strong>: O poder do dplyr está em combinar estas funções com o operador pipe <code>%&gt;%</code></p>
</div>
</div>
</section>
<section id="pacote-dplyr-bibliografia-recomendada" class="level2" data-number="9.7">
<h2 data-number="9.7" class="anchored" data-anchor-id="pacote-dplyr-bibliografia-recomendada"><span class="header-section-number">9.7</span> Pacote dplyr: Bibliografia Recomendada</h2>
<ul>
<li><p><a href="http://pt.r4ds.hadley.nz/data-transform.html" target="_blank">R para Ciência de Dados - Cap. 3</a></p></li>
<li><p><a href="https://pedropark99.github.io/Introducao_R/Capítulos/04-transformacao.html" target="_blank">Introdução à Linguagem R - Cap. 5</a></p></li>
<li><p><a href="https://rstudio.github.io/cheatsheets/translations/portuguese/data-transformation_pt_br.pdf" target="_blank">Resumo</a></p></li>
</ul>
</section>
</section>
<section id="dplyr-tipos-básicos-de-joins" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> dplyr: Tipos Básicos de <em>joins</em></h1>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
O Problema da Fragmentação de Dados
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Dados financeiros raramente estão concentrados em uma única base ou sistema:</p>
<ul>
<li><strong>Dados de Mercado</strong>: Preços de ativos, volumes, volatilidade em sistemas como Bloomberg ou Economática</li>
<li><strong>Demonstrações Financeiras</strong>: Balanços patrimoniais, DREs e fluxos de caixa em bases como CVM ou Capital IQ</li>
<li><strong>Informações de Governança</strong>: Composição de conselhos, estrutura de propriedade em formulários de referência</li>
<li><strong>Dados Macroeconômicos</strong>: Indicadores como juros, inflação e PIB em bases do Banco Central ou IBGE</li>
</ul></li>
<li><p>Análises de dados muitas vezes exigem a <strong>integração</strong> dessas múltiplas fontes</p></li>
<li><p><strong>Exemplo:</strong> Para estudar a relação entre governança e retorno ajustado ao risco, precisamos combinar:</p>
<ul>
<li>Histórico de preços das ações (base de mercado)</li>
<li>Indicadores contábeis como ROE e alavancagem (demonstrações financeiras)</li>
<li>Estrutura de propriedade e composição do conselho (dados de governança)</li>
<li>Fatores de risco sistemático (dados macroeconômicos)</li>
</ul></li>
<li><p><strong>Joins</strong> (<strong>Uniões</strong>) são operações fundamentais para esta integração em pesquisas financeiras empíricas</p></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Joins na Pesquisa Empírica em Finanças
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><strong>Dados Multidimensionais</strong>: Pesquisas financeiras tipicamente requerem a integração de:</p>
<ul>
<li>Dados de mercado (preços, retornos, volume)</li>
<li>Informações contábeis (balanços, DREs)</li>
<li>Indicadores macroeconômicos (PIB, taxas de juros, inflação)</li>
<li>Dados de governança corporativa</li>
</ul></li>
<li><p><strong>Estudos de Evento</strong>: Análises que combinam séries temporais de preços de ativos com datas específicas de eventos corporativos (fusões, aquisições, distribuição de dividendos)</p></li>
<li><p><strong>Análises de Dados em Painel</strong>: Pesquisas que acompanham múltiplas empresas ao longo do tempo, exigindo combinação de dados transversais e longitudinais</p></li>
<li><p><strong>Reprodutibilidade Científica</strong>: Joins documentados garantem que outros pesquisadores possam reproduzir exatamente o mesmo conjunto de dados da análise</p></li>
</ul>
</div>
</div>
<section id="desafios-específicos-de-dados-em-finanças" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="desafios-específicos-de-dados-em-finanças"><span class="header-section-number">10.1</span> Desafios Específicos de Dados em Finanças</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Problemas Comuns em Bases Financeiras
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Códigos de Identificação Inconsistentes</strong>:
<ul>
<li>Empresas podem ter múltiplos identificadores (ticker, CNPJ, código CVM)</li>
<li>Mesma empresa pode aparecer com nomes diferentes em bases distintas</li>
<li>Subsidiárias e controladoras podem ter tratamentos diferentes</li>
</ul></li>
<li><strong>Periodicidades Divergentes</strong>:
<ul>
<li>Dados de mercado (geralmente diários ou intradiários)</li>
<li>Dados contábeis (trimestrais ou anuais)</li>
<li>Dados macroeconômicos (mensais, trimestrais)</li>
</ul></li>
<li><strong>Sobrevivência das Empresas</strong>:
<ul>
<li>Empresas que entram/saem da bolsa (IPOs, delisting)</li>
<li>Processos de fusão e aquisição alterando a estrutura dos dados</li>
<li>Viés de sobrevivência em estudos longitudinais</li>
</ul></li>
<li><strong>Tratamento Especial para Eventos Financeiros</strong>:
<ul>
<li>Splits, bonificações e outros eventos corporativos</li>
<li>Reorganizações societárias</li>
<li>Mudanças em práticas contábeis (IFRS)</li>
</ul></li>
</ul>
</div>
</div>
</section>
<section id="aplicações-práticas-de-joins-na-pesquisa-em-finanças" class="level2" data-number="10.2">
<h2 data-number="10.2" class="anchored" data-anchor-id="aplicações-práticas-de-joins-na-pesquisa-em-finanças"><span class="header-section-number">10.2</span> Aplicações Práticas de Joins na Pesquisa em Finanças</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exemplos de Estudos que podem Aplicar Joins
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><strong>Estudos de Retornos Anormais</strong>:</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb342-1"><a href="#cb342-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combinar dados de mercado com anúncios de eventos</span></span>
<span id="cb342-2"><a href="#cb342-2" aria-hidden="true" tabindex="-1"></a>estudo_evento <span class="ot">&lt;-</span> dados_retornos <span class="sc">%&gt;%</span></span>
<span id="cb342-3"><a href="#cb342-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(anuncios_dividendos, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"codigo_empresa"</span>, <span class="st">"data"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><strong>Estudos sobre Governança e Valor</strong>:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb343-1"><a href="#cb343-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Integrar dados de governança corporativa com desempenho contábil</span></span>
<span id="cb343-2"><a href="#cb343-2" aria-hidden="true" tabindex="-1"></a>analise_governanca <span class="ot">&lt;-</span> empresas_dados_contabeis <span class="sc">%&gt;%</span></span>
<span id="cb343-3"><a href="#cb343-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(indices_governanca, <span class="at">by =</span> <span class="st">"codigo_cvm"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb343-4"><a href="#cb343-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(composicao_conselhos, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"codigo_cvm"</span>, <span class="st">"ano_fiscal"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><strong>Modelos de Precificação de Ativos</strong>:</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb344-1"><a href="#cb344-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combinar fatores de risco com características das empresas</span></span>
<span id="cb344-2"><a href="#cb344-2" aria-hidden="true" tabindex="-1"></a>modelo_multifatorial <span class="ot">&lt;-</span> retornos_ativos <span class="sc">%&gt;%</span></span>
<span id="cb344-3"><a href="#cb344-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(fatores_mercado, <span class="at">by =</span> <span class="st">"data"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb344-4"><a href="#cb344-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(caracteristicas_empresas, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"codigo_empresa"</span>, <span class="st">"ano"</span>, <span class="st">"trimestre"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><strong>Mercado de Crédito e Ratings</strong>:</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb345-1"><a href="#cb345-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Analisar impacto de mudanças de rating no custo de capital</span></span>
<span id="cb345-2"><a href="#cb345-2" aria-hidden="true" tabindex="-1"></a>analise_credito <span class="ot">&lt;-</span> custos_captacao <span class="sc">%&gt;%</span></span>
<span id="cb345-3"><a href="#cb345-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(historico_ratings, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"codigo_empresa"</span>, <span class="st">"data_emissao"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
</div>
</div>
</section>
<section id="crisp-dm-e-joins" class="level2" data-number="10.3">
<h2 data-number="10.3" class="anchored" data-anchor-id="crisp-dm-e-joins"><span class="header-section-number">10.3</span> CRISP-DM e Joins</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Joins na Fase 3 (Preparação dos Dados) do CRISP-DM
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Joins são operações fundamentais na <strong>Fase 3 (Preparação dos Dados)</strong> de CRISP-DM, permitindo:</p></li>
<li><p><strong>Integrar dados fragmentados</strong> que estão distribuídos em múltiplas tabelas relacionadas entre si</p></li>
<li><p><strong>Consolidar informações</strong> de diferentes fontes ou sistemas para análise (vendas + produtos + clientes)</p></li>
<li><p><strong>Enriquecer dados principais</strong> com informações contextuais adicionais (ex: adicionar categoria de produto aos dados de vendas)</p></li>
<li><p><strong>Completar o ciclo de preparação</strong> iniciado com:</p>
<ul>
<li>Importação de dados (<code>read_csv()</code>, <code>read_xlsx()</code>)</li>
<li>Organização de dados (<code>pivot_longer()</code>) para análise</li>
<li>Limpeza de dados (<code>rename()``,</code>as.___()`)</li>
<li>Filtragem (<code>filter()</code>) e seleção (<code>select()</code>) de dados relevantes</li>
<li>Transformação de dados (<code>mutate()</code>) para criar novas variáveis</li>
<li>Manipulação de dados ( <code>group_by()</code>, <code>summarize()</code> e <code>arrange()</code>)</li>
<li><strong>Joins</strong>: integrando múltiplas fontes em um arquivo de dados coeso</li>
</ul></li>
<li><p>Dados bem integrados facilitam as <strong>Fases 4 e 5</strong> (Modelagem e Avaliação) por fornecerem uma visão completa do problema</p></li>
</ul>
</div>
</div>
</section>
<section id="joins-no-dplyr" class="level2" data-number="10.4">
<h2 data-number="10.4" class="anchored" data-anchor-id="joins-no-dplyr"><span class="header-section-number">10.4</span> Joins no dplyr</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
O que são joins?
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><strong>Joins</strong> são operações que combinam duas tabelas de dados</p></li>
<li><p>Em termos simples, joins são como “colar” duas tabelas lado a lado, combinando linhas que têm valores em comum, como um “código de cliente” ou “código de produto”</p></li>
<li><p>No pacote dplyr, temos funções específicas para cada tipo de join:</p>
<ul>
<li><code>left_join()</code>: Mantém todas as linhas da tabela da esquerda</li>
<li><code>inner_join()</code>: Mantém apenas correspondências entre as tabelas</li>
<li><code>full_join()</code>: Mantém todas as linhas de ambas as tabelas</li>
<li><code>right_join()</code>: Mantém todas as linhas da tabela da direita</li>
</ul></li>
<li><p>São essenciais quando precisamos combinar informações que estão separadas</p></li>
</ul>
</div>
</div>
</section>
<section id="criando-tabelas-de-exemplo" class="level2" data-number="10.5">
<h2 data-number="10.5" class="anchored" data-anchor-id="criando-tabelas-de-exemplo"><span class="header-section-number">10.5</span> Criando Tabelas de Exemplo</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tabela produtos
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb346"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb346-1"><a href="#cb346-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cria a tabela de produtos</span></span>
<span id="cb346-2"><a href="#cb346-2" aria-hidden="true" tabindex="-1"></a>produtos <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb346-3"><a href="#cb346-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>codigo_produto, <span class="sc">~</span>nome_produto,      <span class="sc">~</span>preco_unitario, <span class="sc">~</span>categoria,</span>
<span id="cb346-4"><a href="#cb346-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"P001"</span>,         <span class="st">"Notebook Pro"</span>,      <span class="dv">4500</span>,           <span class="st">"Eletrônicos"</span>,</span>
<span id="cb346-5"><a href="#cb346-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"P002"</span>,         <span class="st">"Smartphone X"</span>,      <span class="dv">2800</span>,           <span class="st">"Eletrônicos"</span>,</span>
<span id="cb346-6"><a href="#cb346-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"P003"</span>,         <span class="st">"Monitor 24pol"</span>,     <span class="dv">1200</span>,           <span class="st">"Informática"</span>,</span>
<span id="cb346-7"><a href="#cb346-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"P004"</span>,         <span class="st">"Mouse Gamer"</span>,       <span class="dv">250</span>,            <span class="st">"Informática"</span>,</span>
<span id="cb346-8"><a href="#cb346-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"P005"</span>,         <span class="st">"Cadeira Ergonômica"</span>, <span class="dv">950</span>,           <span class="st">"Mobiliário"</span></span>
<span id="cb346-9"><a href="#cb346-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb346-10"><a href="#cb346-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb346-11"><a href="#cb346-11" aria-hidden="true" tabindex="-1"></a><span class="co"># exibe a tabela</span></span>
<span id="cb346-12"><a href="#cb346-12" aria-hidden="true" tabindex="-1"></a>produtos</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  codigo_produto nome_produto       preco_unitario categoria  
  &lt;chr&gt;          &lt;chr&gt;                       &lt;dbl&gt; &lt;chr&gt;      
1 P001           Notebook Pro                 4500 Eletrônicos
2 P002           Smartphone X                 2800 Eletrônicos
3 P003           Monitor 24pol                1200 Informática
4 P004           Mouse Gamer                   250 Informática
5 P005           Cadeira Ergonômica            950 Mobiliário </code></pre>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tabela vendas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb348"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb348-1"><a href="#cb348-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cria a tabela de vendas</span></span>
<span id="cb348-2"><a href="#cb348-2" aria-hidden="true" tabindex="-1"></a>vendas <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb348-3"><a href="#cb348-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>id_venda, <span class="sc">~</span>codigo_produto, <span class="sc">~</span>id_cliente, <span class="sc">~</span>data_venda,  <span class="sc">~</span>quantidade,</span>
<span id="cb348-4"><a href="#cb348-4" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>,         <span class="st">"P001"</span>,          <span class="st">"C001"</span>,      <span class="st">"2025-04-15"</span>, <span class="dv">1</span>,</span>
<span id="cb348-5"><a href="#cb348-5" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>,         <span class="st">"P002"</span>,          <span class="st">"C002"</span>,      <span class="st">"2025-04-16"</span>, <span class="dv">2</span>,</span>
<span id="cb348-6"><a href="#cb348-6" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>,         <span class="st">"P003"</span>,          <span class="st">"C001"</span>,      <span class="st">"2025-04-18"</span>, <span class="dv">2</span>,</span>
<span id="cb348-7"><a href="#cb348-7" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>,         <span class="st">"P002"</span>,          <span class="st">"C003"</span>,      <span class="st">"2025-04-20"</span>, <span class="dv">1</span>,</span>
<span id="cb348-8"><a href="#cb348-8" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>,         <span class="st">"P006"</span>,          <span class="st">"C002"</span>,      <span class="st">"2025-04-22"</span>, <span class="dv">3</span>,</span>
<span id="cb348-9"><a href="#cb348-9" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>,         <span class="st">"P004"</span>,          <span class="st">"C004"</span>,      <span class="st">"2025-04-23"</span>, <span class="dv">4</span></span>
<span id="cb348-10"><a href="#cb348-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb348-11"><a href="#cb348-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-12"><a href="#cb348-12" aria-hidden="true" tabindex="-1"></a><span class="co"># exibe a tabela</span></span>
<span id="cb348-13"><a href="#cb348-13" aria-hidden="true" tabindex="-1"></a>vendas</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  id_venda codigo_produto id_cliente data_venda quantidade
     &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;      &lt;chr&gt;           &lt;dbl&gt;
1        1 P001           C001       2025-04-15          1
2        2 P002           C002       2025-04-16          2
3        3 P003           C001       2025-04-18          2
4        4 P002           C003       2025-04-20          1
5        5 P006           C002       2025-04-22          3
6        6 P004           C004       2025-04-23          4</code></pre>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tabela Clientes
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell" style="font-size: 1em;">
<div class="sourceCode cell-code" id="cb350"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb350-1"><a href="#cb350-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crian a tabela de clientes </span></span>
<span id="cb350-2"><a href="#cb350-2" aria-hidden="true" tabindex="-1"></a>clientes <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb350-3"><a href="#cb350-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>id_cliente, <span class="sc">~</span>nome_cliente,     <span class="sc">~</span>cidade,</span>
<span id="cb350-4"><a href="#cb350-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"C001"</span>,      <span class="st">"Empresa Alpha"</span>,   <span class="st">"São Paulo"</span>,</span>
<span id="cb350-5"><a href="#cb350-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"C002"</span>,      <span class="st">"Empresa Beta"</span>,    <span class="st">"Rio de Janeiro"</span>,</span>
<span id="cb350-6"><a href="#cb350-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"C003"</span>,      <span class="st">"João Silva"</span>,      <span class="st">"Belo Horizonte"</span>,</span>
<span id="cb350-7"><a href="#cb350-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"C005"</span>,      <span class="st">"Maria Oliveira"</span>,  <span class="st">"Recife"</span></span>
<span id="cb350-8"><a href="#cb350-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb350-9"><a href="#cb350-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb350-10"><a href="#cb350-10" aria-hidden="true" tabindex="-1"></a><span class="co"># exibe a tabela</span></span>
<span id="cb350-11"><a href="#cb350-11" aria-hidden="true" tabindex="-1"></a>clientes</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  id_cliente nome_cliente   cidade        
  &lt;chr&gt;      &lt;chr&gt;          &lt;chr&gt;         
1 C001       Empresa Alpha  São Paulo     
2 C002       Empresa Beta   Rio de Janeiro
3 C003       João Silva     Belo Horizonte
4 C005       Maria Oliveira Recife        </code></pre>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Dados dos Exemlos
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell" style="font-size: 1em;">
<div class="sourceCode cell-code" id="cb352"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb352-1"><a href="#cb352-1" aria-hidden="true" tabindex="-1"></a>produtos</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  codigo_produto nome_produto       preco_unitario categoria  
  &lt;chr&gt;          &lt;chr&gt;                       &lt;dbl&gt; &lt;chr&gt;      
1 P001           Notebook Pro                 4500 Eletrônicos
2 P002           Smartphone X                 2800 Eletrônicos
3 P003           Monitor 24pol                1200 Informática
4 P004           Mouse Gamer                   250 Informática
5 P005           Cadeira Ergonômica            950 Mobiliário </code></pre>
</div>
<div class="sourceCode cell-code" id="cb354"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb354-1"><a href="#cb354-1" aria-hidden="true" tabindex="-1"></a>vendas</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  id_venda codigo_produto id_cliente data_venda quantidade
     &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;      &lt;chr&gt;           &lt;dbl&gt;
1        1 P001           C001       2025-04-15          1
2        2 P002           C002       2025-04-16          2
3        3 P003           C001       2025-04-18          2
4        4 P002           C003       2025-04-20          1
5        5 P006           C002       2025-04-22          3
6        6 P004           C004       2025-04-23          4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb356"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb356-1"><a href="#cb356-1" aria-hidden="true" tabindex="-1"></a>clientes</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  id_cliente nome_cliente   cidade        
  &lt;chr&gt;      &lt;chr&gt;          &lt;chr&gt;         
1 C001       Empresa Alpha  São Paulo     
2 C002       Empresa Beta   Rio de Janeiro
3 C003       João Silva     Belo Horizonte
4 C005       Maria Oliveira Recife        </code></pre>
</div>
</div>
<p><strong>Observe que há dados “imperfeitos”</strong>:</p>
<ul>
<li>Produto “P006” está nas vendas, mas não na tabela de produtos</li>
<li>Cliente “C004” está nas vendas, mas não na tabela de clientes</li>
<li>Cliente “C005” está na tabela de clientes, mas não tem vendas</li>
</ul>
</div>
</div>
</section>
<section id="chaves-em-joins" class="level2" data-number="10.6">
<h2 data-number="10.6" class="anchored" data-anchor-id="chaves-em-joins"><span class="header-section-number">10.6</span> Chaves em Joins</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Como tabelas se relacionam
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><strong>Chaves</strong> são as colunas usadas para combinar as tabelas</p></li>
<li><p>Na prática:</p>
<ul>
<li><p>A tabela de clientes tem um “codigo_cliente” único para cada cliente</p></li>
<li><p>A tabela de vendas usa esse mesmo “codigo_cliente” para indicar qual cliente fez cada compra</p></li>
<li><p>O “codigo_cliente” é a “chave” que permite combinar as informações das duas tabelas</p></li>
</ul></li>
<li><p>Nas funções de join do dplyr, as chaves são especificadas pelo argumento <code>by</code></p></li>
</ul>
</div>
</div>
</section>
<section id="tipos-de-chaves-em-bancos-de-dados-relacionais" class="level2" data-number="10.7">
<h2 data-number="10.7" class="anchored" data-anchor-id="tipos-de-chaves-em-bancos-de-dados-relacionais"><span class="header-section-number">10.7</span> Tipos de Chaves em Bancos de Dados Relacionais</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Chaves Primárias e Estrangeiras
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><strong>Chave primária</strong>: Identificador único para cada registro em uma tabela</p>
<ul>
<li>Ex: <code>codigo_cliente</code> na tabela de clientes identifica unicamente cada cliente</li>
<li>Não pode conter valores duplicados ou nulos</li>
</ul></li>
<li><p><strong>Chave estrangeira</strong>: Coluna que referencia a chave primária de outra tabela</p>
<ul>
<li>Ex: <code>codigo_cliente</code> na tabela de vendas é uma chave estrangeira</li>
<li>Estabelece relações entre tabelas e mantém a integridade referencial</li>
</ul></li>
<li><p><strong>Analogia</strong>: Pense em chaves como um sistema de CPF</p>
<ul>
<li>A chave primária é como o CPF único de cada pessoa</li>
<li>A chave estrangeira é como mencionar o CPF de alguém em um documento</li>
<li>Os joins são como reunir documentos diferentes sobre a mesma pessoa usando seu CPF</li>
</ul></li>
</ul>
</div>
</div>
</section>
<section id="diagrama-de-relações-com-chaves" class="level2" data-number="10.8">
<h2 data-number="10.8" class="anchored" data-anchor-id="diagrama-de-relações-com-chaves"><span class="header-section-number">10.8</span> Diagrama de Relações com Chaves</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Visualizando a relação entre tabelas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb358"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb358-1"><a href="#cb358-1" aria-hidden="true" tabindex="-1"></a>Tabela CLIENTES                 Tabela VENDAS</span>
<span id="cb358-2"><a href="#cb358-2" aria-hidden="true" tabindex="-1"></a>+--------------+            +---------------+</span>
<span id="cb358-3"><a href="#cb358-3" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> codigo_cliente<span class="pp">|</span> &lt;--------- <span class="pp">|</span>codigo_cliente <span class="pp">|</span>  </span>
<span id="cb358-4"><a href="#cb358-4" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> nome_cliente  <span class="pp">|</span>            <span class="pp">|</span> id_venda      <span class="pp">|</span></span>
<span id="cb358-5"><a href="#cb358-5" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> cidade        <span class="pp">|</span>            <span class="pp">|</span> data_venda    <span class="pp">|</span></span>
<span id="cb358-6"><a href="#cb358-6" aria-hidden="true" tabindex="-1"></a>+--------------+            +---------------+</span>
<span id="cb358-7"><a href="#cb358-7" aria-hidden="true" tabindex="-1"></a>   Chave Primária             Chave Estrangeira</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong>Integridade referencial</strong>: Garante que relações entre tabelas permaneçam válidas
<ul>
<li>Impede a criação de vendas para clientes inexistentes</li>
<li>Fundamental para a confiabilidade dos dados em sistemas empresariais</li>
</ul></li>
</ul>
</div>
</div>
</section>
<section id="exemplos-comuns-de-chaves" class="level2" data-number="10.9">
<h2 data-number="10.9" class="anchored" data-anchor-id="exemplos-comuns-de-chaves"><span class="header-section-number">10.9</span> Exemplos Comuns de Chaves</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Chaves em sistemas empresariais
</div>
</div>
<div class="callout-body-container callout-body">
<p>Exemplos comuns de chaves em sistemas de informação empresariais:</p>
<ul>
<li><strong>“codigo_produto”</strong> para relacionar produtos e vendas</li>
<li><strong>“codigo_funcionario”</strong> para relacionar funcionários e departamentos</li>
<li><strong>“numero_pedido”</strong> para relacionar pedidos e itens de pedido</li>
<li><strong>“codigo_fiscal”</strong> para relacionar notas fiscais e itens fiscais</li>
<li><strong>“matricula_aluno”</strong> em sistemas educacionais</li>
<li><strong>“numero_prontuario”</strong> em sistemas de saúde</li>
</ul>
<p>A identificação correta das chaves é fundamental para o sucesso de joins e para garantir a integridade das análises de dados.</p>
</div>
</div>
</section>
<section id="desafios-com-chaves-em-joins" class="level2" data-number="10.10">
<h2 data-number="10.10" class="anchored" data-anchor-id="desafios-com-chaves-em-joins"><span class="header-section-number">10.10</span> Desafios com Chaves em Joins</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Problemas comuns ao trabalhar com chaves
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><strong>Chaves duplicadas</strong>:</p>
<ul>
<li>Podem gerar múltiplas linhas no resultado (multiplicação de dados)</li>
<li>Exemplo: Um cliente vinculado a várias vendas resulta em múltiplas linhas</li>
</ul></li>
<li><p><strong>Chaves ausentes</strong>:</p>
<ul>
<li>Resultam em valores NA quando usando left, right ou full joins</li>
<li>Exemplo: Vendas sem cliente cadastrado ou produtos sem vendas</li>
</ul></li>
<li><p><strong>Inconsistência de tipos</strong>:</p>
<ul>
<li>Problemas quando a mesma chave tem tipos diferentes em tabelas distintas</li>
<li>Exemplo: código armazenado como texto em uma tabela e número em outra</li>
</ul></li>
<li><p><strong>Diferenças de nomenclatura</strong>:</p>
<ul>
<li>Quando a mesma informação tem nomes diferentes em sistemas distintos</li>
<li>Requer especificação explícita: <code>by = c("codigo_produto" = "codigo")</code></li>
</ul></li>
</ul>
</div>
</div>
</section>
<section id="sintaxe-básica-de-joins-no-dplyr" class="level2" data-number="10.11">
<h2 data-number="10.11" class="anchored" data-anchor-id="sintaxe-básica-de-joins-no-dplyr"><span class="header-section-number">10.11</span> Sintaxe Básica de Joins no dplyr</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Como usar joins no dplyr (simplificado)
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb359"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb359-1"><a href="#cb359-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Formato básico (simples)</span></span>
<span id="cb359-2"><a href="#cb359-2" aria-hidden="true" tabindex="-1"></a>resultado <span class="ot">&lt;-</span> x <span class="sc">%&gt;%</span> </span>
<span id="cb359-3"><a href="#cb359-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tipo_join</span>(y, <span class="at">by =</span> <span class="st">"coluna_comum"</span>)</span>
<span id="cb359-4"><a href="#cb359-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb359-5"><a href="#cb359-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplo com nossas tabelas</span></span>
<span id="cb359-6"><a href="#cb359-6" aria-hidden="true" tabindex="-1"></a>vendas_com_produtos <span class="ot">&lt;-</span> vendas <span class="sc">%&gt;%</span></span>
<span id="cb359-7"><a href="#cb359-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(produtos, <span class="at">by =</span> <span class="st">"codigo_produto"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>O que cada parte significa:</strong></p>
<ul>
<li><code>vendas</code>: A primeira tabela (tabela da esquerda)</li>
<li><code>produtos</code>: A segunda tabela (tabela da direita)</li>
<li><code>by = "codigo_produto"</code>: A coluna comum que existe em ambas as tabelas</li>
<li><code>left_join</code>: O tipo de join que queremos usar</li>
<li><code>vendas_com_produtos</code>: O resultado da combinação que salvaremos</li>
</ul>
</div>
</div>
</section>
<section id="visão-geral-dos-joins" class="level2" data-number="10.12">
<h2 data-number="10.12" class="anchored" data-anchor-id="visão-geral-dos-joins"><span class="header-section-number">10.12</span> Visão Geral dos Joins</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Em resumo:
</div>
</div>
<div class="callout-body-container callout-body">
<table class="caption-top table">
<colgroup>
<col style="width: 17%">
<col style="width: 23%">
<col style="width: 58%">
</colgroup>
<thead>
<tr class="header">
<th>Tipo de Join</th>
<th>Função no dplyr</th>
<th>Quando usar</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Left join</td>
<td><code>left_join()</code></td>
<td>Quando você precisa manter todos os registros da tabela principal (à esquerda)</td>
</tr>
<tr class="even">
<td>Inner join</td>
<td><code>inner_join()</code></td>
<td>Quando você precisa apenas dos registros que existem em ambas as tabelas</td>
</tr>
<tr class="odd">
<td>Full join</td>
<td><code>full_join()</code></td>
<td>Quando você precisa de todos os dados, independentemente de correspondências</td>
</tr>
<tr class="even">
<td>Right join</td>
<td><code>right_join()</code></td>
<td>Quando você precisa manter todos os registros da tabela secundária (à direita)</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="left-join" class="level2" data-number="10.13">
<h2 data-number="10.13" class="anchored" data-anchor-id="left-join"><span class="header-section-number">10.13</span> Left Join</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Função left_join()
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb360"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb360-1"><a href="#cb360-1" aria-hidden="true" tabindex="-1"></a>resultado <span class="ot">&lt;-</span> x <span class="sc">%&gt;%</span> </span>
<span id="cb360-2"><a href="#cb360-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(y, <span class="at">by =</span> <span class="st">"chave"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/left-join.gif" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Características do Left Join
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Mantém <strong>todos</strong> os registros da tabela da esquerda (primeira tabela)</p></li>
<li><p>Para registros sem correspondência na tabela da direita, preenche com NA</p></li>
<li><p><strong>Quando usar</strong>:</p>
<ul>
<li>Quando a primeira tabela é sua tabela principal</li>
<li>Quando você precisa preservar todos os registros da primeira tabela</li>
<li>Quando você quer adicionar informações extras à sua tabela principal</li>
</ul></li>
<li><p><strong>Exemplo</strong>: Manter todas as vendas e adicionar dados dos produtos</p></li>
</ul>
</div>
</div>
</section>
<section id="exemplo-left-join-em-pesquisa" class="level2" data-number="10.14">
<h2 data-number="10.14" class="anchored" data-anchor-id="exemplo-left-join-em-pesquisa"><span class="header-section-number">10.14</span> Exemplo: Left Join em Pesquisa</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Left Join: Análise de Empresas e seus Indicadores Contábeis
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb361"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb361-1"><a href="#cb361-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabela de empresas listadas</span></span>
<span id="cb361-2"><a href="#cb361-2" aria-hidden="true" tabindex="-1"></a>empresas_listadas <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb361-3"><a href="#cb361-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>codigo_cvm, <span class="sc">~</span>empresa,            <span class="sc">~</span>setor,              <span class="sc">~</span>segmento_listagem,</span>
<span id="cb361-4"><a href="#cb361-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"11592"</span>,     <span class="st">"Petrobras"</span>,         <span class="st">"Petróleo e Gás"</span>,    <span class="st">"Nível 2"</span>,</span>
<span id="cb361-5"><a href="#cb361-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"19615"</span>,     <span class="st">"Vale"</span>,              <span class="st">"Mineração"</span>,         <span class="st">"Novo Mercado"</span>,</span>
<span id="cb361-6"><a href="#cb361-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"14311"</span>,     <span class="st">"Itaú Unibanco"</span>,     <span class="st">"Financeiro"</span>,        <span class="st">"Nível 1"</span>,</span>
<span id="cb361-7"><a href="#cb361-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"18112"</span>,     <span class="st">"Natura"</span>,            <span class="st">"Bens de Consumo"</span>,   <span class="st">"Novo Mercado"</span>,</span>
<span id="cb361-8"><a href="#cb361-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"22691"</span>,     <span class="st">"Magazine Luiza"</span>,    <span class="st">"Varejo"</span>,            <span class="st">"Novo Mercado"</span></span>
<span id="cb361-9"><a href="#cb361-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb361-10"><a href="#cb361-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb361-11"><a href="#cb361-11" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiza o resultado</span></span>
<span id="cb361-12"><a href="#cb361-12" aria-hidden="true" tabindex="-1"></a>empresas_listadas </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  codigo_cvm empresa        setor           segmento_listagem
  &lt;chr&gt;      &lt;chr&gt;          &lt;chr&gt;           &lt;chr&gt;            
1 11592      Petrobras      Petróleo e Gás  Nível 2          
2 19615      Vale           Mineração       Novo Mercado     
3 14311      Itaú Unibanco  Financeiro      Nível 1          
4 18112      Natura         Bens de Consumo Novo Mercado     
5 22691      Magazine Luiza Varejo          Novo Mercado     </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb363"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb363-1"><a href="#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabela de indicadores contábeis</span></span>
<span id="cb363-2"><a href="#cb363-2" aria-hidden="true" tabindex="-1"></a>indicadores_contabeis <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb363-3"><a href="#cb363-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>codigo_cvm, <span class="sc">~</span>ano_fiscal, <span class="sc">~</span>roa,    <span class="sc">~</span>roe,    <span class="sc">~</span>ebitda_margem,  <span class="sc">~</span>divida_liquida,</span>
<span id="cb363-4"><a href="#cb363-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"11592"</span>,     <span class="dv">2023</span>,         <span class="fl">0.089</span>,   <span class="fl">0.235</span>,   <span class="fl">0.392</span>,           <span class="dv">315780000</span>,</span>
<span id="cb363-5"><a href="#cb363-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"19615"</span>,     <span class="dv">2023</span>,         <span class="fl">0.112</span>,   <span class="fl">0.268</span>,   <span class="fl">0.468</span>,           <span class="dv">185230000</span>,</span>
<span id="cb363-6"><a href="#cb363-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"14311"</span>,     <span class="dv">2023</span>,         <span class="fl">0.064</span>,   <span class="fl">0.195</span>,   <span class="fl">0.412</span>,           <span class="cn">NULL</span>,</span>
<span id="cb363-7"><a href="#cb363-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"22691"</span>,     <span class="dv">2023</span>,         <span class="fl">0.052</span>,   <span class="fl">0.148</span>,   <span class="fl">0.185</span>,           <span class="dv">12450000</span></span>
<span id="cb363-8"><a href="#cb363-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb363-9"><a href="#cb363-9" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiza o resultado</span></span>
<span id="cb363-10"><a href="#cb363-10" aria-hidden="true" tabindex="-1"></a>indicadores_contabeis </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 6
  codigo_cvm ano_fiscal   roa   roe ebitda_margem divida_liquida
  &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt; &lt;list&gt;        
1 11592            2023 0.089 0.235         0.392 &lt;dbl [1]&gt;     
2 19615            2023 0.112 0.268         0.468 &lt;dbl [1]&gt;     
3 14311            2023 0.064 0.195         0.412 &lt;NULL&gt;        
4 22691            2023 0.052 0.148         0.185 &lt;dbl [1]&gt;     </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb365"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb365-1"><a href="#cb365-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Left join: todas as empresas, mesmo sem indicadores contábeis disponíveis</span></span>
<span id="cb365-2"><a href="#cb365-2" aria-hidden="true" tabindex="-1"></a>analise_empresas <span class="ot">&lt;-</span> empresas_listadas <span class="sc">%&gt;%</span></span>
<span id="cb365-3"><a href="#cb365-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(indicadores_contabeis, <span class="at">by =</span> <span class="st">"codigo_cvm"</span>)</span>
<span id="cb365-4"><a href="#cb365-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb365-5"><a href="#cb365-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizando o resultado</span></span>
<span id="cb365-6"><a href="#cb365-6" aria-hidden="true" tabindex="-1"></a>analise_empresas</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 9
  codigo_cvm empresa        setor     segmento_listagem ano_fiscal    roa    roe
  &lt;chr&gt;      &lt;chr&gt;          &lt;chr&gt;     &lt;chr&gt;                  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1 11592      Petrobras      Petróleo… Nível 2                 2023  0.089  0.235
2 19615      Vale           Mineração Novo Mercado            2023  0.112  0.268
3 14311      Itaú Unibanco  Financei… Nível 1                 2023  0.064  0.195
4 18112      Natura         Bens de … Novo Mercado              NA NA     NA    
5 22691      Magazine Luiza Varejo    Novo Mercado            2023  0.052  0.148
# ℹ 2 more variables: ebitda_margem &lt;dbl&gt;, divida_liquida &lt;list&gt;</code></pre>
</div>
</div>
<p><strong>Observe que</strong>:</p>
<ul>
<li><p>A empresa “Natura” (código CVM “18112”) <strong>aparece</strong> no resultado</p></li>
<li><p>Como não há dados contábeis disponíveis para esta empresa, as colunas de indicadores aparecem com NA</p></li>
<li><p>O left_join é muito utilizado em pesquisas quando queremos manter todas as empresas da amostra, mesmo aquelas com dados incompletos - decisão metodológica comum em estudos com amostras pequenas</p></li>
</ul>
</div>
</div>
</section>
<section id="inner-join" class="level2 smaller" data-number="10.15">
<h2 class="smaller anchored" data-number="10.15" data-anchor-id="inner-join"><span class="header-section-number">10.15</span> Inner Join</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Função inner_join()
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb367"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb367-1"><a href="#cb367-1" aria-hidden="true" tabindex="-1"></a>resultado <span class="ot">&lt;-</span> x <span class="sc">%&gt;%</span> </span>
<span id="cb367-2"><a href="#cb367-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(y, <span class="at">by =</span> <span class="st">"chave"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/inner-join.gif" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Características do Inner Join
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Mantém <strong>apenas</strong> os registros que possuem correspondência em <strong>ambas</strong> as tabelas</p></li>
<li><p>Descarta linhas que não têm correspondência</p></li>
<li><p><strong>Quando usar</strong>:</p>
<ul>
<li><p>Quando você precisa garantir que todos os registros tenham informações completas</p></li>
<li><p>Quando registros sem correspondência não são relevantes para sua análise</p></li>
</ul></li>
<li><p><strong>Exemplo</strong>: Relatório de vendas que precisa mostrar dados do produto</p></li>
</ul>
</div>
</div>
</section>
<section id="exemplo-inner-join-em-pesquisa" class="level2" data-number="10.16">
<h2 data-number="10.16" class="anchored" data-anchor-id="exemplo-inner-join-em-pesquisa"><span class="header-section-number">10.16</span> Exemplo: Inner Join em Pesquisa</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Inner Join: Analisando Eventos de Rating e Performance de Bonds
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb368"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb368-1"><a href="#cb368-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabela de títulos de dívida corporativa (bonds)</span></span>
<span id="cb368-2"><a href="#cb368-2" aria-hidden="true" tabindex="-1"></a>titulos_divida <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb368-3"><a href="#cb368-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>isin,          <span class="sc">~</span>emissor,        <span class="sc">~</span>valor_emissao, <span class="sc">~</span>yield_to_maturity, <span class="sc">~</span>vencimento,</span>
<span id="cb368-4"><a href="#cb368-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BRPETRDBS036"</span>, <span class="st">"Petrobras"</span>,     <span class="dv">1000000000</span>,     <span class="fl">0.0785</span>,             <span class="st">"2030-03-15"</span>,</span>
<span id="cb368-5"><a href="#cb368-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BRVALEDBF009"</span>, <span class="st">"Vale"</span>,           <span class="dv">750000000</span>,     <span class="fl">0.0652</span>,             <span class="st">"2032-10-08"</span>,</span>
<span id="cb368-6"><a href="#cb368-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BRITAUDB0025"</span>, <span class="st">"Itaú Unibanco"</span>,  <span class="dv">500000000</span>,     <span class="fl">0.0723</span>,             <span class="st">"2028-05-22"</span>,</span>
<span id="cb368-7"><a href="#cb368-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BRBTGPDB0017"</span>, <span class="st">"BTG Pactual"</span>,    <span class="dv">650000000</span>,     <span class="fl">0.0798</span>,             <span class="st">"2029-08-30"</span>,</span>
<span id="cb368-8"><a href="#cb368-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BRCVCODB0032"</span>, <span class="st">"Cielo"</span>,          <span class="dv">350000000</span>,     <span class="fl">0.0815</span>,             <span class="st">"2027-11-12"</span></span>
<span id="cb368-9"><a href="#cb368-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb368-10"><a href="#cb368-10" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiza o resultado</span></span>
<span id="cb368-11"><a href="#cb368-11" aria-hidden="true" tabindex="-1"></a>titulos_divida</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  isin         emissor       valor_emissao yield_to_maturity vencimento
  &lt;chr&gt;        &lt;chr&gt;                 &lt;dbl&gt;             &lt;dbl&gt; &lt;chr&gt;     
1 BRPETRDBS036 Petrobras        1000000000            0.0785 2030-03-15
2 BRVALEDBF009 Vale              750000000            0.0652 2032-10-08
3 BRITAUDB0025 Itaú Unibanco     500000000            0.0723 2028-05-22
4 BRBTGPDB0017 BTG Pactual       650000000            0.0798 2029-08-30
5 BRCVCODB0032 Cielo             350000000            0.0815 2027-11-12</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb370"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb370-1"><a href="#cb370-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabela de mudanças de rating</span></span>
<span id="cb370-2"><a href="#cb370-2" aria-hidden="true" tabindex="-1"></a>mudancas_rating <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb370-3"><a href="#cb370-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>isin,          <span class="sc">~</span>data_evento,  <span class="sc">~</span>agencia,   <span class="sc">~</span>rating_anterior, <span class="sc">~</span>novo_rating, <span class="sc">~</span>perspectiva,</span>
<span id="cb370-4"><a href="#cb370-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BRPETRDBS036"</span>, <span class="st">"2023-05-10"</span>,  <span class="st">"Moody's"</span>,  <span class="st">"Ba2"</span>,            <span class="st">"Ba1"</span>,        <span class="st">"Positiva"</span>,</span>
<span id="cb370-5"><a href="#cb370-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BRVALEDBF009"</span>, <span class="st">"2023-06-22"</span>,  <span class="st">"S&amp;P"</span>,      <span class="st">"BBB"</span>,            <span class="st">"BBB+"</span>,       <span class="st">"Estável"</span>,</span>
<span id="cb370-6"><a href="#cb370-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BRVALEDBF009"</span>, <span class="st">"2023-08-15"</span>,  <span class="st">"Fitch"</span>,    <span class="st">"BBB"</span>,            <span class="st">"BBB+"</span>,       <span class="st">"Estável"</span>,</span>
<span id="cb370-7"><a href="#cb370-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BRITAUDB0025"</span>, <span class="st">"2023-07-08"</span>,  <span class="st">"Moody's"</span>,  <span class="st">"Ba1"</span>,            <span class="st">"Baa3"</span>,       <span class="st">"Estável"</span>,</span>
<span id="cb370-8"><a href="#cb370-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BRECOPDB0016"</span>, <span class="st">"2023-09-14"</span>,  <span class="st">"S&amp;P"</span>,      <span class="st">"BB-"</span>,            <span class="st">"BB"</span>,         <span class="st">"Positiva"</span></span>
<span id="cb370-9"><a href="#cb370-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb370-10"><a href="#cb370-10" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiza o resultado</span></span>
<span id="cb370-11"><a href="#cb370-11" aria-hidden="true" tabindex="-1"></a>mudancas_rating</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
  isin         data_evento agencia rating_anterior novo_rating perspectiva
  &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;           &lt;chr&gt;       &lt;chr&gt;      
1 BRPETRDBS036 2023-05-10  Moody's Ba2             Ba1         Positiva   
2 BRVALEDBF009 2023-06-22  S&amp;P     BBB             BBB+        Estável    
3 BRVALEDBF009 2023-08-15  Fitch   BBB             BBB+        Estável    
4 BRITAUDB0025 2023-07-08  Moody's Ba1             Baa3        Estável    
5 BRECOPDB0016 2023-09-14  S&amp;P     BB-             BB          Positiva   </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb372"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb372-1"><a href="#cb372-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Inner join: apenas títulos de dívida que tiveram mudanças de rating</span></span>
<span id="cb372-2"><a href="#cb372-2" aria-hidden="true" tabindex="-1"></a>analise_rating_impacto <span class="ot">&lt;-</span> titulos_divida <span class="sc">%&gt;%</span></span>
<span id="cb372-3"><a href="#cb372-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(mudancas_rating, <span class="at">by =</span> <span class="st">"isin"</span>)</span>
<span id="cb372-4"><a href="#cb372-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb372-5"><a href="#cb372-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizando o resultado</span></span>
<span id="cb372-6"><a href="#cb372-6" aria-hidden="true" tabindex="-1"></a>analise_rating_impacto</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 10
  isin    emissor valor_emissao yield_to_maturity vencimento data_evento agencia
  &lt;chr&gt;   &lt;chr&gt;           &lt;dbl&gt;             &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;  
1 BRPETR… Petrob…    1000000000            0.0785 2030-03-15 2023-05-10  Moody's
2 BRVALE… Vale        750000000            0.0652 2032-10-08 2023-06-22  S&amp;P    
3 BRVALE… Vale        750000000            0.0652 2032-10-08 2023-08-15  Fitch  
4 BRITAU… Itaú U…     500000000            0.0723 2028-05-22 2023-07-08  Moody's
# ℹ 3 more variables: rating_anterior &lt;chr&gt;, novo_rating &lt;chr&gt;,
#   perspectiva &lt;chr&gt;</code></pre>
</div>
</div>
<p><strong>Observe que</strong>:</p>
<ul>
<li><p>O título da “Cielo” (ISIN “BRCVCODB0032”) <strong>não aparece</strong> no resultado pois não teve mudança de rating no período analisado</p></li>
<li><p>A mudança de rating do título “BRECOPDB0016” também <strong>não aparece</strong> no resultado pois este título não está na nossa base de títulos monitorados</p></li>
<li><p>O inner_join é apropriado para estudos de evento onde queremos analisar apenas os casos onde ocorreu o evento específico (neste caso, mudança de rating)</p></li>
</ul>
</div>
</div>
</section>
<section id="full-join" class="level2" data-number="10.17">
<h2 data-number="10.17" class="anchored" data-anchor-id="full-join"><span class="header-section-number">10.17</span> Full Join</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Função full_join()
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb374"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb374-1"><a href="#cb374-1" aria-hidden="true" tabindex="-1"></a>resultado <span class="ot">&lt;-</span> x <span class="sc">%&gt;%</span> </span>
<span id="cb374-2"><a href="#cb374-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(y, <span class="at">by =</span> <span class="st">"chave"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/full-join.gif" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Características do Full Join
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Mantém <strong>todos</strong> os registros de <strong>ambas</strong> as tabelas</p></li>
<li><p>Para registros sem correspondência em qualquer tabela, preenche com NA</p></li>
<li><p><strong>Quando usar</strong>:</p>
<ul>
<li>Quando você precisa de uma visão completa de todos os dados</li>
<li>Quando quer identificar inconsistências entre tabelas</li>
<li>Quando é importante não perder nenhum registro de nenhuma tabela</li>
</ul></li>
<li><p><strong>Exemplo</strong>: Relatório completo de produtos e vendas</p></li>
</ul>
</div>
</div>
</section>
<section id="exemplo-full-join" class="level2" data-number="10.18">
<h2 data-number="10.18" class="anchored" data-anchor-id="exemplo-full-join"><span class="header-section-number">10.18</span> Exemplo: Full Join</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Full Join entre Vendas e Produtos
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb375"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb375-1"><a href="#cb375-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Full join: todas as vendas e todos os produtos</span></span>
<span id="cb375-2"><a href="#cb375-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Passo 1: Pegamos a tabela 'vendas'</span></span>
<span id="cb375-3"><a href="#cb375-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Passo 2: Combinamos com produtos mantendo TUDO de ambas as tabelas</span></span>
<span id="cb375-4"><a href="#cb375-4" aria-hidden="true" tabindex="-1"></a>completo_vendas_produtos <span class="ot">&lt;-</span> vendas <span class="sc">%&gt;%</span></span>
<span id="cb375-5"><a href="#cb375-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(produtos, <span class="at">by =</span> <span class="st">"codigo_produto"</span>)</span>
<span id="cb375-6"><a href="#cb375-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb375-7"><a href="#cb375-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizando o resultado</span></span>
<span id="cb375-8"><a href="#cb375-8" aria-hidden="true" tabindex="-1"></a>completo_vendas_produtos</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 8
  id_venda codigo_produto id_cliente data_venda quantidade nome_produto      
     &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;      &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;             
1        1 P001           C001       2025-04-15          1 Notebook Pro      
2        2 P002           C002       2025-04-16          2 Smartphone X      
3        3 P003           C001       2025-04-18          2 Monitor 24pol     
4        4 P002           C003       2025-04-20          1 Smartphone X      
5        5 P006           C002       2025-04-22          3 &lt;NA&gt;              
6        6 P004           C004       2025-04-23          4 Mouse Gamer       
7       NA P005           &lt;NA&gt;       &lt;NA&gt;               NA Cadeira Ergonômica
# ℹ 2 more variables: preco_unitario &lt;dbl&gt;, categoria &lt;chr&gt;</code></pre>
</div>
</div>
<p><strong>Observe que</strong>:</p>
<ul>
<li><p>A venda do produto “P006” que não existe na tabela de produtos aparece com NAs</p></li>
<li><p>O produto “P005” que não tem vendas também aparece com NAs</p></li>
<li><p>O full_join é útil para ver “tudo junto” e identificar inconsistências</p></li>
</ul>
</div>
</div>
</section>
<section id="right-join" class="level2" data-number="10.19">
<h2 data-number="10.19" class="anchored" data-anchor-id="right-join"><span class="header-section-number">10.19</span> Right Join</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Função right_join()
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb377"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb377-1"><a href="#cb377-1" aria-hidden="true" tabindex="-1"></a>resultado <span class="ot">&lt;-</span> x <span class="sc">%&gt;%</span> </span>
<span id="cb377-2"><a href="#cb377-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(y, <span class="at">by =</span> <span class="st">"chave"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/right-join.gif" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Características do Right Join
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Mantém <strong>todos</strong> os registros da tabela da direita (segunda tabela)</p></li>
<li><p>Para registros sem correspondência na tabela da esquerda, preenche com NA</p></li>
<li><p><strong>Quando usar</strong>:</p>
<ul>
<li><p>Quando a segunda tabela é sua tabela principal</p></li>
<li><p>Quando você precisa garantir que todos os registros da segunda tabela estejam presentes</p></li>
<li><p>Na prática, muitas vezes é mais fácil usar left_join invertendo a ordem das tabelas</p></li>
</ul></li>
<li><p><strong>Exemplo</strong>: Ver todos os produtos, mesmo os que não foram vendidos</p></li>
</ul>
</div>
</div>
</section>
<section id="exemplo-right-join" class="level2" data-number="10.20">
<h2 data-number="10.20" class="anchored" data-anchor-id="exemplo-right-join"><span class="header-section-number">10.20</span> Exemplo: Right Join</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Right Join entre Vendas e Produtos
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb378"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb378-1"><a href="#cb378-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Right join: todos os produtos, mesmo sem vendas</span></span>
<span id="cb378-2"><a href="#cb378-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Passo 1: Pegamos a tabela 'vendas'</span></span>
<span id="cb378-3"><a href="#cb378-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Passo 2: Combinamos com TODOS os produtos, mesmo os sem vendas</span></span>
<span id="cb378-4"><a href="#cb378-4" aria-hidden="true" tabindex="-1"></a>produtos_vendas_right <span class="ot">&lt;-</span> vendas <span class="sc">%&gt;%</span></span>
<span id="cb378-5"><a href="#cb378-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(produtos, <span class="at">by =</span> <span class="st">"codigo_produto"</span>)</span>
<span id="cb378-6"><a href="#cb378-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb378-7"><a href="#cb378-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizando o resultado</span></span>
<span id="cb378-8"><a href="#cb378-8" aria-hidden="true" tabindex="-1"></a>produtos_vendas_right</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
  id_venda codigo_produto id_cliente data_venda quantidade nome_produto      
     &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;      &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;             
1        1 P001           C001       2025-04-15          1 Notebook Pro      
2        2 P002           C002       2025-04-16          2 Smartphone X      
3        3 P003           C001       2025-04-18          2 Monitor 24pol     
4        4 P002           C003       2025-04-20          1 Smartphone X      
5        6 P004           C004       2025-04-23          4 Mouse Gamer       
6       NA P005           &lt;NA&gt;       &lt;NA&gt;               NA Cadeira Ergonômica
# ℹ 2 more variables: preco_unitario &lt;dbl&gt;, categoria &lt;chr&gt;</code></pre>
</div>
</div>
<p><strong>Observe que</strong>:</p>
<ul>
<li>Agora o produto “P005” (Cadeira Ergonômica) <strong>aparece</strong> no resultado</li>
<li>Como esse produto não tem vendas, as colunas de vendas aparecem com NA</li>
<li>O right_join é útil para identificar produtos sem movimento</li>
</ul>
</div>
</div>
</section>
<section id="exemplo-combinando-múltiplas-tabelas" class="level2" data-number="10.21">
<h2 data-number="10.21" class="anchored" data-anchor-id="exemplo-combinando-múltiplas-tabelas"><span class="header-section-number">10.21</span> Exemplo: Combinando Múltiplas Tabelas</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Estudo integrado de Governança, Retorno e Risco Sistêmico
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb380"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb380-1"><a href="#cb380-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabela de empresas e características de governança</span></span>
<span id="cb380-2"><a href="#cb380-2" aria-hidden="true" tabindex="-1"></a>governanca <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb380-3"><a href="#cb380-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>codigo_negociacao, <span class="sc">~</span>empresa,         <span class="sc">~</span>indice_governanca, <span class="sc">~</span>tipo_controlador, <span class="sc">~</span>comite_auditoria,</span>
<span id="cb380-4"><a href="#cb380-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PETR4"</span>,            <span class="st">"Petrobras"</span>,      <span class="fl">6.8</span>,                <span class="st">"Estatal"</span>,         <span class="cn">TRUE</span>,</span>
<span id="cb380-5"><a href="#cb380-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"VALE3"</span>,            <span class="st">"Vale"</span>,           <span class="fl">8.2</span>,                <span class="st">"Pulverizado"</span>,     <span class="cn">TRUE</span>,</span>
<span id="cb380-6"><a href="#cb380-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ITUB4"</span>,            <span class="st">"Itaú Unibanco"</span>,  <span class="fl">7.9</span>,                <span class="st">"Familiar"</span>,        <span class="cn">TRUE</span>,</span>
<span id="cb380-7"><a href="#cb380-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BBDC4"</span>,            <span class="st">"Bradesco"</span>,       <span class="fl">7.6</span>,                <span class="st">"Familiar"</span>,        <span class="cn">TRUE</span>,</span>
<span id="cb380-8"><a href="#cb380-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"MGLU3"</span>,            <span class="st">"Magazine Luiza"</span>, <span class="fl">7.1</span>,                <span class="st">"Familiar"</span>,        <span class="cn">FALSE</span></span>
<span id="cb380-9"><a href="#cb380-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb380-10"><a href="#cb380-10" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiza o resultado</span></span>
<span id="cb380-11"><a href="#cb380-11" aria-hidden="true" tabindex="-1"></a>governanca</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  codigo_negociacao empresa  indice_governanca tipo_controlador comite_auditoria
  &lt;chr&gt;             &lt;chr&gt;                &lt;dbl&gt; &lt;chr&gt;            &lt;lgl&gt;           
1 PETR4             Petrobr…               6.8 Estatal          TRUE            
2 VALE3             Vale                   8.2 Pulverizado      TRUE            
3 ITUB4             Itaú Un…               7.9 Familiar         TRUE            
4 BBDC4             Bradesco               7.6 Familiar         TRUE            
5 MGLU3             Magazin…               7.1 Familiar         FALSE           </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb382"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb382-1"><a href="#cb382-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabela de retornos anuais ajustados</span></span>
<span id="cb382-2"><a href="#cb382-2" aria-hidden="true" tabindex="-1"></a>retornos <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb382-3"><a href="#cb382-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>codigo_negociacao, <span class="sc">~</span>ano,  <span class="sc">~</span>retorno_anual, <span class="sc">~</span>volatilidade, <span class="sc">~</span>beta,</span>
<span id="cb382-4"><a href="#cb382-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PETR4"</span>,            <span class="dv">2023</span>,   <span class="fl">0.125</span>,          <span class="fl">0.285</span>,        <span class="fl">1.32</span>,</span>
<span id="cb382-5"><a href="#cb382-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"VALE3"</span>,            <span class="dv">2023</span>,   <span class="fl">0.084</span>,          <span class="fl">0.215</span>,        <span class="fl">1.18</span>,</span>
<span id="cb382-6"><a href="#cb382-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ITUB4"</span>,            <span class="dv">2023</span>,   <span class="fl">0.152</span>,          <span class="fl">0.195</span>,        <span class="fl">0.87</span>,</span>
<span id="cb382-7"><a href="#cb382-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BBDC4"</span>,            <span class="dv">2023</span>,   <span class="fl">0.138</span>,          <span class="fl">0.205</span>,        <span class="fl">0.92</span>,</span>
<span id="cb382-8"><a href="#cb382-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ABEV3"</span>,            <span class="dv">2023</span>,   <span class="fl">0.062</span>,          <span class="fl">0.165</span>,        <span class="fl">0.72</span></span>
<span id="cb382-9"><a href="#cb382-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb382-10"><a href="#cb382-10" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiza o resultado</span></span>
<span id="cb382-11"><a href="#cb382-11" aria-hidden="true" tabindex="-1"></a>retornos</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  codigo_negociacao   ano retorno_anual volatilidade  beta
  &lt;chr&gt;             &lt;dbl&gt;         &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt;
1 PETR4              2023         0.125        0.285  1.32
2 VALE3              2023         0.084        0.215  1.18
3 ITUB4              2023         0.152        0.195  0.87
4 BBDC4              2023         0.138        0.205  0.92
5 ABEV3              2023         0.062        0.165  0.72</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb384"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb384-1"><a href="#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabela de indicadores contábeis</span></span>
<span id="cb384-2"><a href="#cb384-2" aria-hidden="true" tabindex="-1"></a>indicadores <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb384-3"><a href="#cb384-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>codigo_negociacao, <span class="sc">~</span>ano,  <span class="sc">~</span>roa,    <span class="sc">~</span>alavancagem, <span class="sc">~</span>tamanho_ativo,</span>
<span id="cb384-4"><a href="#cb384-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PETR4"</span>,            <span class="dv">2023</span>,   <span class="fl">0.089</span>,   <span class="fl">0.325</span>,        <span class="dv">395120000</span>,</span>
<span id="cb384-5"><a href="#cb384-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"VALE3"</span>,            <span class="dv">2023</span>,   <span class="fl">0.112</span>,   <span class="fl">0.285</span>,        <span class="dv">312450000</span>,</span>
<span id="cb384-6"><a href="#cb384-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ITUB4"</span>,            <span class="dv">2023</span>,   <span class="fl">0.064</span>,   <span class="fl">0.852</span>,        <span class="dv">2185620000</span>,</span>
<span id="cb384-7"><a href="#cb384-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BBDC4"</span>,            <span class="dv">2023</span>,   <span class="fl">0.058</span>,   <span class="fl">0.815</span>,        <span class="dv">1924380000</span>,</span>
<span id="cb384-8"><a href="#cb384-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"MGLU3"</span>,            <span class="dv">2023</span>,   <span class="fl">0.052</span>,   <span class="fl">0.368</span>,         <span class="dv">28540000</span></span>
<span id="cb384-9"><a href="#cb384-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb384-10"><a href="#cb384-10" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiza o resultado</span></span>
<span id="cb384-11"><a href="#cb384-11" aria-hidden="true" tabindex="-1"></a>indicadores</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  codigo_negociacao   ano   roa alavancagem tamanho_ativo
  &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;         &lt;dbl&gt;
1 PETR4              2023 0.089       0.325     395120000
2 VALE3              2023 0.112       0.285     312450000
3 ITUB4              2023 0.064       0.852    2185620000
4 BBDC4              2023 0.058       0.815    1924380000
5 MGLU3              2023 0.052       0.368      28540000</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb386"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb386-1"><a href="#cb386-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pipeline de análise integrada</span></span>
<span id="cb386-2"><a href="#cb386-2" aria-hidden="true" tabindex="-1"></a>analise_integrada <span class="ot">&lt;-</span> governanca <span class="sc">%&gt;%</span></span>
<span id="cb386-3"><a href="#cb386-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Primeiro, adicionamos dados de retorno e risco</span></span>
<span id="cb386-4"><a href="#cb386-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(retornos, <span class="at">by =</span> <span class="st">"codigo_negociacao"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb386-5"><a href="#cb386-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Depois, adicionamos indicadores contábeis</span></span>
<span id="cb386-6"><a href="#cb386-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(indicadores, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"codigo_negociacao"</span>, <span class="st">"ano"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb386-7"><a href="#cb386-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Selecionamos apenas as variáveis relevantes para o estudo</span></span>
<span id="cb386-8"><a href="#cb386-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb386-9"><a href="#cb386-9" aria-hidden="true" tabindex="-1"></a>    empresa, codigo_negociacao, ano, indice_governanca, tipo_controlador,</span>
<span id="cb386-10"><a href="#cb386-10" aria-hidden="true" tabindex="-1"></a>    retorno_anual, volatilidade, beta, </span>
<span id="cb386-11"><a href="#cb386-11" aria-hidden="true" tabindex="-1"></a>    roa, alavancagem, tamanho_ativo</span>
<span id="cb386-12"><a href="#cb386-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb386-13"><a href="#cb386-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb386-14"><a href="#cb386-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizando o resultado</span></span>
<span id="cb386-15"><a href="#cb386-15" aria-hidden="true" tabindex="-1"></a>analise_integrada</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 11
  empresa        codigo_negociacao   ano indice_governanca tipo_controlador
  &lt;chr&gt;          &lt;chr&gt;             &lt;dbl&gt;             &lt;dbl&gt; &lt;chr&gt;           
1 Petrobras      PETR4              2023               6.8 Estatal         
2 Vale           VALE3              2023               8.2 Pulverizado     
3 Itaú Unibanco  ITUB4              2023               7.9 Familiar        
4 Bradesco       BBDC4              2023               7.6 Familiar        
5 Magazine Luiza MGLU3                NA               7.1 Familiar        
# ℹ 6 more variables: retorno_anual &lt;dbl&gt;, volatilidade &lt;dbl&gt;, beta &lt;dbl&gt;,
#   roa &lt;dbl&gt;, alavancagem &lt;dbl&gt;, tamanho_ativo &lt;dbl&gt;</code></pre>
</div>
</div>
<p><strong>Observe como</strong>:</p>
<ul>
<li>Este pipeline combina três conjuntos de dados distintos (governança, mercado e contábil)</li>
<li>Empresas como “Magazine Luiza” (MGLU3) aparecem sem dados de retorno (NA)</li>
<li>“ABEV3” aparece nos dados de retorno, mas não nas outras tabelas</li>
</ul>
<p><strong>Implicações metodológicas</strong>:</p>
<ul>
<li>O uso de left_join manteve todas as empresas com dados de governança, revelando lacunas nos dados</li>
<li>A definição desta amostra de estudo (firmas com dados de governança) é uma escolha metodológica explícita</li>
<li>Este tipo de construção de amostra é muito útil em estudos empíricos que analisam relações entre diferentes conjuntos de observações e variáveis.</li>
</ul>
</div>
</div>
</section>
<section id="exemplo-análise-de-demonstrações-financeiras" class="level2" data-number="10.22">
<h2 data-number="10.22" class="anchored" data-anchor-id="exemplo-análise-de-demonstrações-financeiras"><span class="header-section-number">10.22</span> Exemplo: Análise de Demonstrações Financeiras</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Cenário: Pesquisa em Desempenho Financeiro Setorial
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb388"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb388-1"><a href="#cb388-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabela com informações básicas das empresas</span></span>
<span id="cb388-2"><a href="#cb388-2" aria-hidden="true" tabindex="-1"></a>empresas <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb388-3"><a href="#cb388-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>codigo_cvm, <span class="sc">~</span>nome_empresa,      <span class="sc">~</span>setor,              <span class="sc">~</span>tamanho,  <span class="sc">~</span>governanca,</span>
<span id="cb388-4"><a href="#cb388-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"11592"</span>,    <span class="st">"Petrobras S.A."</span>,    <span class="st">"Petróleo e Gás"</span>,    <span class="st">"Grande"</span>,  <span class="st">"Nível 2"</span>,</span>
<span id="cb388-5"><a href="#cb388-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"19615"</span>,    <span class="st">"Vale S.A."</span>,         <span class="st">"Mineração"</span>,         <span class="st">"Grande"</span>,  <span class="st">"Novo Mercado"</span>,</span>
<span id="cb388-6"><a href="#cb388-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"14311"</span>,    <span class="st">"Itaú Unibanco S.A."</span>, <span class="st">"Financeiro"</span>,       <span class="st">"Grande"</span>,  <span class="st">"Nível 1"</span>,</span>
<span id="cb388-7"><a href="#cb388-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"18112"</span>,    <span class="st">"Natura Cosméticos"</span>, <span class="st">"Bens de Consumo"</span>,   <span class="st">"Médio"</span>,   <span class="st">"Novo Mercado"</span>,</span>
<span id="cb388-8"><a href="#cb388-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"22691"</span>,    <span class="st">"Magazine Luiza"</span>,    <span class="st">"Varejo"</span>,            <span class="st">"Médio"</span>,   <span class="st">"Novo Mercado"</span></span>
<span id="cb388-9"><a href="#cb388-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb388-10"><a href="#cb388-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb388-11"><a href="#cb388-11" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiza o resultado</span></span>
<span id="cb388-12"><a href="#cb388-12" aria-hidden="true" tabindex="-1"></a>empresas</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  codigo_cvm nome_empresa       setor           tamanho governanca  
  &lt;chr&gt;      &lt;chr&gt;              &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;       
1 11592      Petrobras S.A.     Petróleo e Gás  Grande  Nível 2     
2 19615      Vale S.A.          Mineração       Grande  Novo Mercado
3 14311      Itaú Unibanco S.A. Financeiro      Grande  Nível 1     
4 18112      Natura Cosméticos  Bens de Consumo Médio   Novo Mercado
5 22691      Magazine Luiza     Varejo          Médio   Novo Mercado</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb390"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb390-1"><a href="#cb390-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabela de indicadores financeiros trimestrais</span></span>
<span id="cb390-2"><a href="#cb390-2" aria-hidden="true" tabindex="-1"></a>indicadores_financeiros <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb390-3"><a href="#cb390-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>codigo_cvm, <span class="sc">~</span>ano, <span class="sc">~</span>trimestre, <span class="sc">~</span>roa,  <span class="sc">~</span>alavancagem, <span class="sc">~</span>liquidez_corrente, <span class="sc">~</span>margem_ebitda,</span>
<span id="cb390-4"><a href="#cb390-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"11592"</span>,     <span class="dv">2024</span>,  <span class="dv">1</span>,          <span class="fl">0.032</span>,  <span class="fl">0.58</span>,         <span class="fl">1.45</span>,              <span class="fl">0.28</span>,</span>
<span id="cb390-5"><a href="#cb390-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"11592"</span>,     <span class="dv">2024</span>,  <span class="dv">2</span>,          <span class="fl">0.041</span>,  <span class="fl">0.56</span>,         <span class="fl">1.52</span>,              <span class="fl">0.31</span>,</span>
<span id="cb390-6"><a href="#cb390-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"19615"</span>,     <span class="dv">2024</span>,  <span class="dv">1</span>,          <span class="fl">0.045</span>,  <span class="fl">0.32</span>,         <span class="fl">2.10</span>,              <span class="fl">0.34</span>,</span>
<span id="cb390-7"><a href="#cb390-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"19615"</span>,     <span class="dv">2024</span>,  <span class="dv">2</span>,          <span class="fl">0.048</span>,  <span class="fl">0.31</span>,         <span class="fl">2.15</span>,              <span class="fl">0.36</span>,</span>
<span id="cb390-8"><a href="#cb390-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"14311"</span>,     <span class="dv">2024</span>,  <span class="dv">1</span>,          <span class="fl">0.018</span>,  <span class="fl">0.82</span>,         <span class="fl">1.28</span>,              <span class="fl">0.42</span>,</span>
<span id="cb390-9"><a href="#cb390-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"14311"</span>,     <span class="dv">2024</span>,  <span class="dv">2</span>,          <span class="fl">0.019</span>,  <span class="fl">0.81</span>,         <span class="fl">1.31</span>,              <span class="fl">0.41</span>,</span>
<span id="cb390-10"><a href="#cb390-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"22691"</span>,     <span class="dv">2024</span>,  <span class="dv">1</span>,          <span class="fl">0.028</span>,  <span class="fl">0.62</span>,         <span class="fl">1.18</span>,              <span class="fl">0.12</span>,</span>
<span id="cb390-11"><a href="#cb390-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"22691"</span>,     <span class="dv">2024</span>,  <span class="dv">2</span>,          <span class="fl">0.025</span>,  <span class="fl">0.68</span>,         <span class="fl">1.12</span>,              <span class="fl">0.10</span></span>
<span id="cb390-12"><a href="#cb390-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb390-13"><a href="#cb390-13" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiza o resultado</span></span>
<span id="cb390-14"><a href="#cb390-14" aria-hidden="true" tabindex="-1"></a>indicadores_financeiros</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 7
  codigo_cvm   ano trimestre   roa alavancagem liquidez_corrente margem_ebitda
  &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;             &lt;dbl&gt;         &lt;dbl&gt;
1 11592       2024         1 0.032        0.58              1.45          0.28
2 11592       2024         2 0.041        0.56              1.52          0.31
3 19615       2024         1 0.045        0.32              2.1           0.34
4 19615       2024         2 0.048        0.31              2.15          0.36
5 14311       2024         1 0.018        0.82              1.28          0.42
6 14311       2024         2 0.019        0.81              1.31          0.41
7 22691       2024         1 0.028        0.62              1.18          0.12
8 22691       2024         2 0.025        0.68              1.12          0.1 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb392"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb392-1"><a href="#cb392-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combinando dados para análise de desempenho por setor</span></span>
<span id="cb392-2"><a href="#cb392-2" aria-hidden="true" tabindex="-1"></a>analise_setorial <span class="ot">&lt;-</span> empresas <span class="sc">%&gt;%</span></span>
<span id="cb392-3"><a href="#cb392-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(indicadores_financeiros, <span class="at">by =</span> <span class="st">"codigo_cvm"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb392-4"><a href="#cb392-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(nome_empresa, setor, ano, trimestre, roa, alavancagem, margem_ebitda)</span>
<span id="cb392-5"><a href="#cb392-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb392-6"><a href="#cb392-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizando o resultado</span></span>
<span id="cb392-7"><a href="#cb392-7" aria-hidden="true" tabindex="-1"></a>analise_setorial</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 7
  nome_empresa       setor        ano trimestre    roa alavancagem margem_ebitda
  &lt;chr&gt;              &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;         &lt;dbl&gt;
1 Petrobras S.A.     Petróleo …  2024         1  0.032        0.58          0.28
2 Petrobras S.A.     Petróleo …  2024         2  0.041        0.56          0.31
3 Vale S.A.          Mineração   2024         1  0.045        0.32          0.34
4 Vale S.A.          Mineração   2024         2  0.048        0.31          0.36
5 Itaú Unibanco S.A. Financeiro  2024         1  0.018        0.82          0.42
6 Itaú Unibanco S.A. Financeiro  2024         2  0.019        0.81          0.41
7 Natura Cosméticos  Bens de C…    NA        NA NA           NA            NA   
8 Magazine Luiza     Varejo      2024         1  0.028        0.62          0.12
9 Magazine Luiza     Varejo      2024         2  0.025        0.68          0.1 </code></pre>
</div>
</div>
<p><strong>Aplicação em Pesquisa</strong>:</p>
<ul>
<li><p>Este tipo de join permite analisar desempenho financeiro controlando por características específicas das empresas</p></li>
<li><p>Útil para estudos que investigam:</p>
<ul>
<li>Impacto de governança corporativa nos indicadores contábeis</li>
<li>Diferenças de desempenho entre setores</li>
<li>Efeito do tamanho da empresa na performance financeira</li>
</ul></li>
<li><p><strong>Nota</strong>: Observem que “Natura Cosméticos” (código 18112) não aparece nos resultados porque não há dados financeiros correspondentes - situação comum em pesquisas empíricas</p></li>
</ul>
</div>
</div>
</section>
<section id="exemplo-análise-de-retornos-anormais" class="level2" data-number="10.23">
<h2 data-number="10.23" class="anchored" data-anchor-id="exemplo-análise-de-retornos-anormais"><span class="header-section-number">10.23</span> Exemplo: Análise de Retornos Anormais</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Cenário: Estudo de Evento sobre Anúncios de Dividendos
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell" style="font-size: 1em;">
<div class="sourceCode cell-code" id="cb394"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb394-1"><a href="#cb394-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabela de preços diários de ações</span></span>
<span id="cb394-2"><a href="#cb394-2" aria-hidden="true" tabindex="-1"></a>precos_acoes <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb394-3"><a href="#cb394-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>ticker,   <span class="sc">~</span>data,          <span class="sc">~</span>preco_fechamento, <span class="sc">~</span>retorno_diario, <span class="sc">~</span>volume,</span>
<span id="cb394-4"><a href="#cb394-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PETR4"</span>,   <span class="st">"2024-04-01"</span>,   <span class="fl">36.75</span>,             <span class="fl">0.0125</span>,          <span class="dv">15200000</span>,</span>
<span id="cb394-5"><a href="#cb394-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PETR4"</span>,   <span class="st">"2024-04-02"</span>,   <span class="fl">37.30</span>,             <span class="fl">0.0150</span>,          <span class="dv">18500000</span>,</span>
<span id="cb394-6"><a href="#cb394-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PETR4"</span>,   <span class="st">"2024-04-03"</span>,   <span class="fl">37.05</span>,            <span class="sc">-</span><span class="fl">0.0067</span>,          <span class="dv">14800000</span>,</span>
<span id="cb394-7"><a href="#cb394-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PETR4"</span>,   <span class="st">"2024-04-04"</span>,   <span class="fl">37.82</span>,             <span class="fl">0.0208</span>,          <span class="dv">21300000</span>,</span>
<span id="cb394-8"><a href="#cb394-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PETR4"</span>,   <span class="st">"2024-04-05"</span>,   <span class="fl">37.60</span>,            <span class="sc">-</span><span class="fl">0.0058</span>,          <span class="dv">16900000</span>,</span>
<span id="cb394-9"><a href="#cb394-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"VALE3"</span>,   <span class="st">"2024-04-01"</span>,   <span class="fl">68.45</span>,             <span class="fl">0.0087</span>,          <span class="dv">22400000</span>,</span>
<span id="cb394-10"><a href="#cb394-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"VALE3"</span>,   <span class="st">"2024-04-02"</span>,   <span class="fl">68.92</span>,             <span class="fl">0.0069</span>,          <span class="dv">19800000</span>,</span>
<span id="cb394-11"><a href="#cb394-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"VALE3"</span>,   <span class="st">"2024-04-03"</span>,   <span class="fl">70.15</span>,             <span class="fl">0.0178</span>,          <span class="dv">25600000</span>,</span>
<span id="cb394-12"><a href="#cb394-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"VALE3"</span>,   <span class="st">"2024-04-04"</span>,   <span class="fl">71.20</span>,             <span class="fl">0.0150</span>,          <span class="dv">28300000</span>,</span>
<span id="cb394-13"><a href="#cb394-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"VALE3"</span>,   <span class="st">"2024-04-05"</span>,   <span class="fl">70.85</span>,            <span class="sc">-</span><span class="fl">0.0049</span>,          <span class="dv">23100000</span></span>
<span id="cb394-14"><a href="#cb394-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb394-15"><a href="#cb394-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb394-16"><a href="#cb394-16" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiza o resultado</span></span>
<span id="cb394-17"><a href="#cb394-17" aria-hidden="true" tabindex="-1"></a>precos_acoes</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 5
   ticker data       preco_fechamento retorno_diario   volume
   &lt;chr&gt;  &lt;chr&gt;                 &lt;dbl&gt;          &lt;dbl&gt;    &lt;dbl&gt;
 1 PETR4  2024-04-01             36.8         0.0125 15200000
 2 PETR4  2024-04-02             37.3         0.015  18500000
 3 PETR4  2024-04-03             37.0        -0.0067 14800000
 4 PETR4  2024-04-04             37.8         0.0208 21300000
 5 PETR4  2024-04-05             37.6        -0.0058 16900000
 6 VALE3  2024-04-01             68.4         0.0087 22400000
 7 VALE3  2024-04-02             68.9         0.0069 19800000
 8 VALE3  2024-04-03             70.2         0.0178 25600000
 9 VALE3  2024-04-04             71.2         0.015  28300000
10 VALE3  2024-04-05             70.8        -0.0049 23100000</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb396"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb396-1"><a href="#cb396-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabela de anúncios de eventos corporativos</span></span>
<span id="cb396-2"><a href="#cb396-2" aria-hidden="true" tabindex="-1"></a>eventos_corporativos <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb396-3"><a href="#cb396-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>ticker,   <span class="sc">~</span>data_anuncio,   <span class="sc">~</span>tipo_evento,        <span class="sc">~</span>valor,</span>
<span id="cb396-4"><a href="#cb396-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PETR4"</span>,   <span class="st">"2024-04-03"</span>,    <span class="st">"Dividendo Extra"</span>,   <span class="fl">2.85</span>,</span>
<span id="cb396-5"><a href="#cb396-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"VALE3"</span>,   <span class="st">"2024-04-04"</span>,    <span class="st">"JCP"</span>,               <span class="fl">1.75</span></span>
<span id="cb396-6"><a href="#cb396-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb396-7"><a href="#cb396-7" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiza o resultado</span></span>
<span id="cb396-8"><a href="#cb396-8" aria-hidden="true" tabindex="-1"></a>eventos_corporativos</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  ticker data_anuncio tipo_evento     valor
  &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;           &lt;dbl&gt;
1 PETR4  2024-04-03   Dividendo Extra  2.85
2 VALE3  2024-04-04   JCP              1.75</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb398"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb398-1"><a href="#cb398-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Realizando análise de retornos nos dias de evento</span></span>
<span id="cb398-2"><a href="#cb398-2" aria-hidden="true" tabindex="-1"></a>estudo_evento <span class="ot">&lt;-</span> precos_acoes <span class="sc">%&gt;%</span></span>
<span id="cb398-3"><a href="#cb398-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(eventos_corporativos, </span>
<span id="cb398-4"><a href="#cb398-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ticker"</span>, <span class="st">"data"</span> <span class="ot">=</span> <span class="st">"data_anuncio"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb398-5"><a href="#cb398-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ticker, data, tipo_evento, valor, retorno_diario, volume)</span>
<span id="cb398-6"><a href="#cb398-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb398-7"><a href="#cb398-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizando o resultado</span></span>
<span id="cb398-8"><a href="#cb398-8" aria-hidden="true" tabindex="-1"></a>estudo_evento</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 6
  ticker data       tipo_evento     valor retorno_diario   volume
  &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;           &lt;dbl&gt;          &lt;dbl&gt;    &lt;dbl&gt;
1 PETR4  2024-04-03 Dividendo Extra  2.85        -0.0067 14800000
2 VALE3  2024-04-04 JCP              1.75         0.015  28300000</code></pre>
</div>
</div>
<p><strong>Aplicação em Pesquisa</strong>:</p>
<ul>
<li><p>Este tipo de join é relevante para estudos de evento que analisam o impacto de anúncios corporativos sobre o preço das ações</p></li>
<li><p>Aplicações em pesquisas financeiras incluem:</p>
<ul>
<li>Reação do mercado a anúncios de distribuição de proventos</li>
<li>Avaliação da eficiência informacional em mercados emergentes</li>
<li>Impacto de divulgações contábeis e eventos não-recorrentes</li>
</ul></li>
<li><p>O <code>inner_join</code> utilizado garante que apenas os dias com eventos são considerados para a análise de retornos anormais</p></li>
</ul>
</div>
</div>
</section>
<section id="fontes-comuns-de-dados-em-pesquisa-financeira" class="level2" data-number="10.24">
<h2 data-number="10.24" class="anchored" data-anchor-id="fontes-comuns-de-dados-em-pesquisa-financeira"><span class="header-section-number">10.24</span> Fontes Comuns de Dados em Pesquisa Financeira</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Bases que Frequentemente Requerem Joins
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Bases Estruturadas para Pesquisa Acadêmica</strong>:
<ul>
<li><strong>Economática</strong>: Dados contábeis e de mercado de empresas brasileiras</li>
<li><strong>Bloomberg</strong>: Dados financeiros globais de alta frequência</li>
</ul></li>
<li><strong>Fontes Públicas no Brasil</strong>:
<ul>
<li><strong>B3</strong>: Dados de negociação, índices e eventos corporativos</li>
<li><strong>CVM</strong>: Demonstrações financeiras padronizadas (DFPs) e formulários de referência</li>
<li><strong>Banco Central</strong>: Indicadores macroeconômicos e financeiros</li>
<li><strong>IBGE</strong>: Dados econômicos setoriais e regionais</li>
</ul></li>
<li><strong>Desafios na Integração</strong>:
<ul>
<li>Identificadores divergentes entre bases (códigos CVM vs.&nbsp;tickers vs.&nbsp;CNPJ)</li>
<li>Periodicidades diferentes (diária, mensal, trimestral, anual)</li>
<li>Diferenças metodológicas na compilação dos dados</li>
<li>Tratamento de eventos corporativos (fusões, aquisições, cisões)</li>
</ul></li>
<li><strong>Estratégias para Joins Eficientes</strong>:
<ul>
<li>Criar tabelas de correspondência entre diferentes identificadores</li>
<li>Padronizar datas para permitir joins temporais precisos</li>
<li>Documentar critérios de exclusão e tratamento de valores ausentes</li>
</ul></li>
</ul>
</div>
</div>
</section>
<section id="dicas-para-uso-eficiente-de-joins" class="level2" data-number="10.25">
<h2 data-number="10.25" class="anchored" data-anchor-id="dicas-para-uso-eficiente-de-joins"><span class="header-section-number">10.25</span> Dicas para Uso Eficiente de Joins</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Dicas práticas para iniciantes
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Conheça seus dados antes de combinar</strong>:</p>
<ul>
<li>Verifique se as tabelas têm as “chaves” correspondentes</li>
<li>Entenda o que significam valores ausentes (NAs)</li>
</ul></li>
<li><p><strong>Filtre antes de combinar</strong>:</p>
<ul>
<li>Se você só precisa de alguns dados, filtre-os antes de fazer joins</li>
<li>Isso torna a análise mais rápida e clara</li>
</ul></li>
<li><p><strong>Verifique o resultado</strong>:</p>
<ul>
<li>O número de linhas faz sentido?</li>
<li>Há valores NA inesperados?</li>
<li>Os totais parecem corretos?</li>
</ul></li>
<li><p><strong>Na dúvida, use left_join</strong>:</p>
<ul>
<li>É o mais comum e seguro para iniciantes</li>
<li>Mantém todos os registros da tabela principal</li>
</ul></li>
</ol>
</div>
</div>
</section>
<section id="o-desafio-dos-sistemas-reais" class="level2" data-number="10.26">
<h2 data-number="10.26" class="anchored" data-anchor-id="o-desafio-dos-sistemas-reais"><span class="header-section-number">10.26</span> O Desafio dos Sistemas Reais</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Situação Comum em Ambientes Empresariais
</div>
</div>
<div class="callout-body-container callout-body">
<p>No mundo ideal, todos os sistemas usariam os mesmos nomes para as mesmas informações…</p>
<p>Mas na prática:</p>
<ul>
<li>O sistema de Vendas pode usar <code>codigo_produto</code></li>
<li>O Cadastro de Produtos pode usar <code>codigo</code></li>
<li>O ERP pode usar <code>cod_prod</code></li>
<li>O sistema legado pode usar <code>id_produto</code></li>
</ul>
<p><strong>Resultado</strong>: Tentar unir estas tabelas com a sintaxe básica falha:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb400"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb400-1"><a href="#cb400-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Esta tentativa falha:</span></span>
<span id="cb400-2"><a href="#cb400-2" aria-hidden="true" tabindex="-1"></a>vendas <span class="sc">%&gt;%</span> </span>
<span id="cb400-3"><a href="#cb400-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(produtos, <span class="at">by =</span> <span class="st">"codigo_produto"</span>) </span>
<span id="cb400-4"><a href="#cb400-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb400-5"><a href="#cb400-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ERRO: 'codigo_produto' não encontrado em 'produtos'</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Como resolver este problema comum?</p>
</div>
</div>
</section>
<section id="a-solução" class="level2" data-number="10.27">
<h2 data-number="10.27" class="anchored" data-anchor-id="a-solução"><span class="header-section-number">10.27</span> A Solução</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Sintaxe para Colunas com Nomes Diferentes
</div>
</div>
<div class="callout-body-container callout-body">
<p>O dplyr permite especificar explicitamente quais colunas devem ser correspondidas:</p>
<div class="cell" style="font-size: 1em;">
<div class="sourceCode cell-code" id="cb401"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb401-1"><a href="#cb401-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sintaxe para colunas com nomes diferentes</span></span>
<span id="cb401-2"><a href="#cb401-2" aria-hidden="true" tabindex="-1"></a>tabela1 <span class="sc">%&gt;%</span></span>
<span id="cb401-3"><a href="#cb401-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(tabela2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"nome_na_tabela1"</span> <span class="ot">=</span> <span class="st">"nome_na_tabela2"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Como interpretar:</strong></p>
<ul>
<li><code>"nome_na_tabela1"</code>: Nome da coluna na primeira tabela (esquerda)</li>
<li><code>"nome_na_tabela2"</code>: Nome da coluna na segunda tabela (direita)</li>
<li>O operador <code>=</code> estabelece a correspondência entre as colunas</li>
</ul>
<p><strong>Analogia</strong>: Você está criando um “dicionário de tradução” entre os sistemas:</p>
<ul>
<li>“Quando eu digo <code>codigo_produto</code>, você entende <code>codigo</code>”</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Cenário: Relatório de Vendas Integrado
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb402"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb402-1"><a href="#cb402-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sistema de Cadastro de Produtos (departamento de Compras)</span></span>
<span id="cb402-2"><a href="#cb402-2" aria-hidden="true" tabindex="-1"></a>produtos_cadastro <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb402-3"><a href="#cb402-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>codigo,       <span class="sc">~</span>descricao,        <span class="sc">~</span>valor_unitario, <span class="sc">~</span>categoria,</span>
<span id="cb402-4"><a href="#cb402-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"P001"</span>,        <span class="st">"Notebook Pro"</span>,     <span class="dv">4500</span>,           <span class="st">"Eletrônicos"</span>,</span>
<span id="cb402-5"><a href="#cb402-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"P002"</span>,        <span class="st">"Smartphone X"</span>,     <span class="dv">2800</span>,           <span class="st">"Eletrônicos"</span>,</span>
<span id="cb402-6"><a href="#cb402-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"P003"</span>,        <span class="st">"Monitor 24pol"</span>,    <span class="dv">1200</span>,           <span class="st">"Informática"</span></span>
<span id="cb402-7"><a href="#cb402-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb402-8"><a href="#cb402-8" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiza o resultado</span></span>
<span id="cb402-9"><a href="#cb402-9" aria-hidden="true" tabindex="-1"></a>produtos_cadastro</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  codigo descricao     valor_unitario categoria  
  &lt;chr&gt;  &lt;chr&gt;                  &lt;dbl&gt; &lt;chr&gt;      
1 P001   Notebook Pro            4500 Eletrônicos
2 P002   Smartphone X            2800 Eletrônicos
3 P003   Monitor 24pol           1200 Informática</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb404"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb404-1"><a href="#cb404-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sistema de Vendas (departamento Comercial)</span></span>
<span id="cb404-2"><a href="#cb404-2" aria-hidden="true" tabindex="-1"></a>vendas_sistema <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb404-3"><a href="#cb404-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>id_venda, <span class="sc">~</span>cod_produto, <span class="sc">~</span>data_venda,  <span class="sc">~</span>qtd,</span>
<span id="cb404-4"><a href="#cb404-4" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>,         <span class="st">"P001"</span>,       <span class="st">"2025-04-15"</span>, <span class="dv">1</span>,</span>
<span id="cb404-5"><a href="#cb404-5" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>,         <span class="st">"P002"</span>,       <span class="st">"2025-04-16"</span>, <span class="dv">2</span>,</span>
<span id="cb404-6"><a href="#cb404-6" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>,         <span class="st">"P003"</span>,       <span class="st">"2025-04-18"</span>, <span class="dv">2</span></span>
<span id="cb404-7"><a href="#cb404-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb404-8"><a href="#cb404-8" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiza o resultado</span></span>
<span id="cb404-9"><a href="#cb404-9" aria-hidden="true" tabindex="-1"></a>vendas_sistema</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  id_venda cod_produto data_venda   qtd
     &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt;
1        1 P001        2025-04-15     1
2        2 P002        2025-04-16     2
3        3 P003        2025-04-18     2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb406"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb406-1"><a href="#cb406-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Integrando os sistemas com diferentes nomenclaturas</span></span>
<span id="cb406-2"><a href="#cb406-2" aria-hidden="true" tabindex="-1"></a>relatorio_vendas <span class="ot">&lt;-</span> vendas_sistema <span class="sc">%&gt;%</span></span>
<span id="cb406-3"><a href="#cb406-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(produtos_cadastro, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"cod_produto"</span> <span class="ot">=</span> <span class="st">"codigo"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb406-4"><a href="#cb406-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_venda, data_venda, cod_produto, descricao, qtd, valor_unitario) <span class="sc">%&gt;%</span></span>
<span id="cb406-5"><a href="#cb406-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">valor_total =</span> qtd <span class="sc">*</span> valor_unitario) <span class="sc">%&gt;%</span></span>
<span id="cb406-6"><a href="#cb406-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(data_venda)</span>
<span id="cb406-7"><a href="#cb406-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb406-8"><a href="#cb406-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Resultado: um relatório integrado</span></span>
<span id="cb406-9"><a href="#cb406-9" aria-hidden="true" tabindex="-1"></a>relatorio_vendas</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 7
  id_venda data_venda cod_produto descricao       qtd valor_unitario valor_total
     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;         &lt;dbl&gt;          &lt;dbl&gt;       &lt;dbl&gt;
1        1 2025-04-15 P001        Notebook Pro      1           4500        4500
2        2 2025-04-16 P002        Smartphone X      2           2800        5600
3        3 2025-04-18 P003        Monitor 24pol     2           1200        2400</code></pre>
</div>
</div>
<p><strong>Observação</strong>: Esta situação é extremamente comum.</p>
</div>
</div>
</section>
<section id="resumo-joins" class="level2" data-number="10.28">
<h2 data-number="10.28" class="anchored" data-anchor-id="resumo-joins"><span class="header-section-number">10.28</span> Resumo: Joins</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pontos-chave para lembrar
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Joins unem tabelas que estão separadas</strong></p>
<ul>
<li>Combinam dados de clientes, produtos, vendas, etc.</li>
<li>Permitem análises mais completas e informativas</li>
</ul></li>
<li><p><strong>Os tipos mais importantes são</strong>:</p>
<ul>
<li><code>left_join()</code>: Mantém todos os registros da tabela principal (o mais usado)</li>
<li><code>inner_join()</code>: Mantém apenas registros com correspondência em ambas tabelas</li>
<li><code>full_join()</code>: Mantém todos os registros de ambas as tabelas</li>
</ul></li>
<li><p><strong>Na prática, left_join é o mais comum</strong>:</p>
<ul>
<li>Mantém todos os registros da tabela principal</li>
<li>Adiciona informações complementares quando disponíveis</li>
<li>Evita a perda de registros importantes</li>
</ul></li>
<li><p><strong>Comece simples e avance gradualmente</strong>:</p>
<ul>
<li>Primeiro faça joins entre duas tabelas</li>
<li>Depois adicione mais tabelas conforme necessário</li>
<li>Verifique os resultados a cada passo</li>
</ul></li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Guia Rápido de Joins no dplyr
</div>
</div>
<div class="callout-body-container callout-body">
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 11%">
<col style="width: 16%">
<col style="width: 19%">
<col style="width: 32%">
</colgroup>
<thead>
<tr class="header">
<th>Tipo de Join</th>
<th>Função</th>
<th>Resultado</th>
<th>Quando Usar</th>
<th>Analogia de Negócios</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Inner Join</strong></td>
<td><code>inner_join()</code></td>
<td>Apenas registros com correspondência</td>
<td>Análises que exigem dados completos</td>
<td>Relatório com apenas vendas confirmadas</td>
</tr>
<tr class="even">
<td><strong>Left Join</strong></td>
<td><code>left_join()</code></td>
<td>Todos os registros da tabela esquerda</td>
<td>Manter a tabela principal intacta</td>
<td>Relatório de todas as vendas (com ou sem produto cadastrado)</td>
</tr>
<tr class="odd">
<td><strong>Right Join</strong></td>
<td><code>right_join()</code></td>
<td>Todos os registros da tabela direita</td>
<td>Quando a 2ª tabela é a principal</td>
<td>Catálogo com todos os produtos (vendidos ou não)</td>
</tr>
<tr class="even">
<td><strong>Full Join</strong></td>
<td><code>full_join()</code></td>
<td>Todos os registros de ambas as tabelas</td>
<td>Análises completas e auditorias</td>
<td>Verificação de inconsistências no sistema</td>
</tr>
</tbody>
</table>
<p><strong>Dica para lembrar</strong>: Pense no “lado” que você quer preservar:</p>
<ul>
<li><strong>Left</strong> = Tudo do <strong>lado esquerdo</strong> (1ª tabela)</li>
<li><strong>Inner</strong> = Só o que está nos <strong>dois lados</strong></li>
<li><strong>Full</strong> = <strong>Tudo</strong> de <strong>ambos os lados</strong></li>
<li><strong>Right</strong> = Tudo do <strong>lado direito</strong> (2ª tabela)</li>
</ul>
</div>
</div>
</section>
<section id="sintaxe-comparativa" class="level2" data-number="10.29">
<h2 data-number="10.29" class="anchored" data-anchor-id="sintaxe-comparativa"><span class="header-section-number">10.29</span> Sintaxe Comparativa</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Estrutura comum dos diferentes tipos de joins
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb408"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb408-1"><a href="#cb408-1" aria-hidden="true" tabindex="-1"></a><span class="co"># LEFT JOIN: todos os registros da tabela1</span></span>
<span id="cb408-2"><a href="#cb408-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb408-3"><a href="#cb408-3" aria-hidden="true" tabindex="-1"></a>tabela1 <span class="sc">%&gt;%</span> </span>
<span id="cb408-4"><a href="#cb408-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(tabela2, <span class="at">by =</span> <span class="st">"coluna_comum"</span>)</span>
<span id="cb408-5"><a href="#cb408-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb408-6"><a href="#cb408-6" aria-hidden="true" tabindex="-1"></a><span class="co"># INNER JOIN: apenas registros com correspondência</span></span>
<span id="cb408-7"><a href="#cb408-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb408-8"><a href="#cb408-8" aria-hidden="true" tabindex="-1"></a>tabela1 <span class="sc">%&gt;%</span> </span>
<span id="cb408-9"><a href="#cb408-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(tabela2, <span class="at">by =</span> <span class="st">"coluna_comum"</span>)</span>
<span id="cb408-10"><a href="#cb408-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb408-11"><a href="#cb408-11" aria-hidden="true" tabindex="-1"></a><span class="co"># FULL JOIN: todos os registros de ambas as tabelas</span></span>
<span id="cb408-12"><a href="#cb408-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb408-13"><a href="#cb408-13" aria-hidden="true" tabindex="-1"></a>tabela1 <span class="sc">%&gt;%</span> </span>
<span id="cb408-14"><a href="#cb408-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(tabela2, <span class="at">by =</span> <span class="st">"coluna_comum"</span>)</span>
<span id="cb408-15"><a href="#cb408-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb408-16"><a href="#cb408-16" aria-hidden="true" tabindex="-1"></a><span class="co"># RIGHT JOIN: todos os registros da tabela2</span></span>
<span id="cb408-17"><a href="#cb408-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb408-18"><a href="#cb408-18" aria-hidden="true" tabindex="-1"></a>tabela1 <span class="sc">%&gt;%</span> </span>
<span id="cb408-19"><a href="#cb408-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(tabela2, <span class="at">by =</span> <span class="st">"coluna_comum"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Observe que:</strong></p>
<ol type="1">
<li><p><strong>A estrutura básica é idêntica</strong> para todos os joins:</p>
<ul>
<li>Comece com a primeira tabela</li>
<li>Use o operador pipe <code>%&gt;%</code></li>
<li>Aplique a função de join</li>
<li>Adicione a segunda tabela e a coluna comum</li>
</ul></li>
<li><p><strong>Só muda o nome da função</strong>, que indica qual tipo de join realizar:</p>
<ul>
<li><code>inner_join</code>, <code>left_join</code>, <code>right_join</code> ou <code>full_join</code></li>
</ul></li>
<li><p><strong>Quando as colunas têm nomes diferentes</strong>, use esta sintaxe:</p></li>
</ol>
<div class="cell" style="font-size: 1em;">
<div class="sourceCode cell-code" id="cb409"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb409-1"><a href="#cb409-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Quando colunas têm nomes diferentes nas tabelas</span></span>
<span id="cb409-2"><a href="#cb409-2" aria-hidden="true" tabindex="-1"></a>vendas <span class="sc">%&gt;%</span> </span>
<span id="cb409-3"><a href="#cb409-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(produtos, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"codigo_produto"</span> <span class="ot">=</span> <span class="st">"codigo"</span>))</span>
<span id="cb409-4"><a href="#cb409-4" aria-hidden="true" tabindex="-1"></a><span class="co">#            ^ coluna na tabela vendas   ^ coluna na tabela produtos</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="onde-aplicar-joins-em-pesquisa-financeira" class="level2" data-number="10.30">
<h2 data-number="10.30" class="anchored" data-anchor-id="onde-aplicar-joins-em-pesquisa-financeira"><span class="header-section-number">10.30</span> Onde Aplicar Joins em Pesquisa Financeira</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Aplicações práticas em Pesquisa e Análise Financeira
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><strong>Finanças Corporativas</strong>:</p>
<ul>
<li>Combinar dados de estrutura de capital com métricas de desempenho para análise de trade-offs</li>
<li>Unir séries históricas de dividendos com indicadores de estrutura de propriedade</li>
<li>Integrar dados de fusões e aquisições com características específicas das empresas</li>
<li>Analisar relações entre estrutura de governança corporativa e custo de capital</li>
</ul></li>
<li><p><strong>Mercado de Capitais</strong>:</p>
<ul>
<li>Relacionar retornos anormais a eventos corporativos específicos (estudos de evento)</li>
<li>Combinar fatores de risco sistemático com características específicas das empresas</li>
<li>Unir dados de negociação de alta frequência com anúncios macroeconômicos</li>
<li>Integrar preços de ativos com métricas de liquidez e volatilidade implícita</li>
</ul></li>
<li><p><strong>Finanças Comportamentais</strong>:</p>
<ul>
<li>Integrar dados de transações de investidores individuais com características socioeconômicas</li>
<li>Combinar sentiment analysis de notícias financeiras com movimentos de preços</li>
<li>Unir dados de pesquisas de percepção de risco com comportamento real de investimento</li>
<li>Relacionar características psicométricas com decisões de portfólio</li>
</ul></li>
<li><p><strong>Econometria Financeira</strong>:</p>
<ul>
<li>Construir painéis de dados balanceados para estimação de modelos longitudinais</li>
<li>Combinar séries temporais financeiras com variáveis instrumentais para análises causais</li>
<li>Integrar dados de diferentes frequências (diários, mensais, trimestrais) para modelos misto-frequência</li>
<li>Unir dados micro e macroeconômicos para análises multiníveis</li>
</ul></li>
</ul>
</div>
</div>
</section>
<section id="joins-bibliografia-recomendada" class="level2" data-number="10.31">
<h2 data-number="10.31" class="anchored" data-anchor-id="joins-bibliografia-recomendada"><span class="header-section-number">10.31</span> Joins: Bibliografia Recomendada</h2>
<ul>
<li><p><a href="http://pt.r4ds.hadley.nz/joins.html" target="_blank">R para Ciência de Dados - Cap. 19</a></p></li>
<li><p><a href="https://pedropark99.github.io/Introducao_R/Capítulos/06-dados-relacionais.html#introduzindo-joins" target="_blank">Introdução à Linguagem R - Cap. 6</a></p></li>
</ul>
</section>
</section>
<section id="dados-organizados-potencializando-análises-de-dados" class="level1" data-number="11">
<h1 data-number="11"><span class="header-section-number">11</span> Dados Organizados: Potencializando Análises de Dados</h1>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Dados Longos = Dados Organizados
</div>
</div>
<div class="callout-body-container callout-body">
<p>Com os dados organizados (formato longo), podemos facilmente, por exemplo:</p>
<ul>
<li>Calcular indicadores de desempenho por categoria e período</li>
<li>Calcular indicadores de desempenho por produto e período</li>
<li>Analisar tendências mensais para decisões de estoque e marketing</li>
<li>etc.</li>
</ul>
</div>
</div>
<section id="aplicações" class="level2" data-number="11.1">
<h2 data-number="11.1" class="anchored" data-anchor-id="aplicações"><span class="header-section-number">11.1</span> Aplicações</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Dados organizados permitem:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><strong>Finanças e Controladoria</strong>: Análise de tendências financeiras entre períodos, detecção de anomalias em despesas, comparação de desempenho entre unidades de negócio</p></li>
<li><p><strong>Marketing</strong>: Avaliação de ROI por canal e campanha, análise de comportamento do consumidor, segmentação de clientes baseada em múltiplas variáveis</p></li>
<li><p><strong>Operações e Cadeia de Suprimentos</strong>: Otimização de estoques baseada em tendências sazonais, previsão de demanda, monitoramento da cadeia de suprimentos</p></li>
<li><p><strong>Recursos Humanos</strong>: Análise de desempenho ao longo do tempo, identificação de fatores de turnover, planejamento de capacitação</p></li>
<li><p><strong>Estratégia de Negócios</strong>: Consolidação de KPIs de diversas áreas para tomada de decisão, identificação de correlações entre variáveis de negócio</p></li>
<li><p><strong>Na prática</strong>: Administradores frequentemente recebem dados em formatos inadequados para análise (relatórios estáticos, planilhas “bonitas”). A capacidade de reorganizar esses dados rapidamente para análise representa uma vantagem competitiva significativa.</p></li>
</ul>
</div>
</div>
</section>
<section id="um-pipeline-completo-com-dplyr" class="level2" data-number="11.2">
<h2 data-number="11.2" class="anchored" data-anchor-id="um-pipeline-completo-com-dplyr"><span class="header-section-number">11.2</span> Um Pipeline Completo com dplyr</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb410"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb410-1"><a href="#cb410-1" aria-hidden="true" tabindex="-1"></a><span class="co"># inicia com a df (gapminder) e salva o resultado final</span></span>
<span id="cb410-2"><a href="#cb410-2" aria-hidden="true" tabindex="-1"></a>relatorio_expectativa <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb410-3"><a href="#cb410-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filtra apenas os dados de 2007</span></span>
<span id="cb410-4"><a href="#cb410-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span></span>
<span id="cb410-5"><a href="#cb410-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Agrupa por continente</span></span>
<span id="cb410-6"><a href="#cb410-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span></span>
<span id="cb410-7"><a href="#cb410-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calcula estatísticas por continente</span></span>
<span id="cb410-8"><a href="#cb410-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb410-9"><a href="#cb410-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">expectativa_media =</span> <span class="fu">mean</span>(lifeExp),</span>
<span id="cb410-10"><a href="#cb410-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">expectativa_minima =</span> <span class="fu">min</span>(lifeExp),</span>
<span id="cb410-11"><a href="#cb410-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">expectativa_maxima =</span> <span class="fu">max</span>(lifeExp),</span>
<span id="cb410-12"><a href="#cb410-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb410-13"><a href="#cb410-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ordena do maior para o menor</span></span>
<span id="cb410-14"><a href="#cb410-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(expectativa_media))</span>
<span id="cb410-15"><a href="#cb410-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb410-16"><a href="#cb410-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualiza o resultado final</span></span>
<span id="cb410-17"><a href="#cb410-17" aria-hidden="true" tabindex="-1"></a>relatorio_expectativa</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  continent expectativa_media expectativa_minima expectativa_maxima
  &lt;fct&gt;                 &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;
1 Oceania                80.7               80.2               81.2
2 Europe                 77.6               71.8               81.8
3 Americas               73.6               60.9               80.7
4 Asia                   70.7               43.8               82.6
5 Africa                 54.8               39.6               76.4</code></pre>
</div>
</div>
</section>
<section id="tabelas-profissionais" class="level2" data-number="11.3">
<h2 data-number="11.3" class="anchored" data-anchor-id="tabelas-profissionais"><span class="header-section-number">11.3</span> Tabelas Profissionais</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Limitações das Data Frames Brutas em Relatórios Profissionais
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>As data frames produzidas pelos pipelines do dplyr são excelentes para <strong>análise</strong>, mas não são adequadas para <strong>apresentação</strong> em relatórios profissionais.</p></li>
<li><p>A linguagem R oferece várias soluções para esta limitação:</p>
<ul>
<li>O pacote <strong>kableExtra</strong> (que veremos a seguir) para relatórios HTML e PDF</li>
<li>O pacote <strong>gt</strong> para tabelas altamente personalizáveis</li>
</ul></li>
<li><p>Estes pacotes permitem transformar dados analíticos em tabelas com qualidade profissional, incluindo:</p>
<ul>
<li>título, nomes das colunas e notas formatadas</li>
<li>destaque visual para informações importantes<br>
</li>
<li>personalização de cores, bordas e estilos de texto</li>
<li>entre outras.</li>
</ul></li>
</ul>
</div>
</div>
</section>
<section id="o-pacote-kableextra" class="level2" data-number="11.4">
<h2 data-number="11.4" class="anchored" data-anchor-id="o-pacote-kableextra"><span class="header-section-number">11.4</span> O Pacote kableExtra</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Transformando tabelas básicas em apresentações profissionais
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>O pacote <code>kableExtra</code> estende as funcionalidades da função básica <code>kable</code> do R, permitindo a criação de tabelas com qualidade de publicação.</p></li>
<li><p>Foi desenvolvido para trabalhar com tabelas em documentos HTML e PDF (LaTeX).</p></li>
<li><p>Permite formatar tabelas para relatórios profissionais, artigos acadêmicos e apresentações.</p></li>
<li><p>É extremamente útil na Fase 6 do CRISP-DM (Implantação), quando precisamos comunicar resultados de forma clara e atrativa.</p></li>
</ul>
</div>
</div>
</section>
<section id="sintaxe-básica-do-kableextra" class="level2" data-number="11.5">
<h2 data-number="11.5" class="anchored" data-anchor-id="sintaxe-básica-do-kableextra"><span class="header-section-number">11.5</span> Sintaxe Básica do kableExtra</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Fluxo básico com kableExtra
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb412"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb412-1"><a href="#cb412-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  inicie com uma data frame</span></span>
<span id="cb412-2"><a href="#cb412-2" aria-hidden="true" tabindex="-1"></a>tabela_formatada <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span></span>
<span id="cb412-3"><a href="#cb412-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Transforme a data frame em tabela básica</span></span>
<span id="cb412-4"><a href="#cb412-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(</span>
<span id="cb412-5"><a href="#cb412-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Título da Tabela"</span>,</span>
<span id="cb412-6"><a href="#cb412-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Nome1"</span>, <span class="st">"Nome2"</span>), <span class="co"># Renomear colunas</span></span>
<span id="cb412-7"><a href="#cb412-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span>,                      <span class="co"># Casas decimais</span></span>
<span id="cb412-8"><a href="#cb412-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">format.args =</span> <span class="fu">list</span>(<span class="at">decimal.mark =</span> <span class="st">","</span>, <span class="at">big.mark =</span> <span class="st">"."</span>) <span class="co"># Define vírgula como separador decimal e ponto como separador de milhares</span></span>
<span id="cb412-9"><a href="#cb412-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb412-10"><a href="#cb412-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Adicionar estilos</span></span>
<span id="cb412-11"><a href="#cb412-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(</span>
<span id="cb412-12"><a href="#cb412-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>),</span>
<span id="cb412-13"><a href="#cb412-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">full_width =</span> <span class="cn">FALSE</span>,</span>
<span id="cb412-14"><a href="#cb412-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="st">"center"</span></span>
<span id="cb412-15"><a href="#cb412-15" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>kable()</strong>: Converte a data frame em tabela básica</li>
<li><strong>kable_styling()</strong>: Aplica estilos visuais à tabela</li>
<li>Outros elementos podem ser adicionados em sequência com o pipe (<code>%&gt;%</code>)</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pipeline para relatórios profissionais
</div>
</div>
<div class="callout-body-container callout-body">
<p>Em projetos de análise de dados completos, o fluxo geralmente é:</p>
<ol type="1">
<li><strong>Preparar dados</strong> com <code>tidyr</code> e <code>dplyr</code></li>
<li><strong>Analisar dados</strong> com <code>dplyr</code> (filter, select, group_by, etc.)</li>
<li><strong>Visualizar resultados</strong> com <code>ggplot2</code> (gráficos) e <code>kableExtra</code> (tabelas)</li>
</ol>
<p>Um pipeline completo pode é similar com:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb413"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb413-1"><a href="#cb413-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pipeline completo de análise até apresentação</span></span>
<span id="cb413-2"><a href="#cb413-2" aria-hidden="true" tabindex="-1"></a>dados_brutos <span class="sc">%&gt;%</span></span>
<span id="cb413-3"><a href="#cb413-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fase de limpeza e preparação</span></span>
<span id="cb413-4"><a href="#cb413-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(...) <span class="sc">%&gt;%</span></span>
<span id="cb413-5"><a href="#cb413-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(...) <span class="sc">%&gt;%</span></span>
<span id="cb413-6"><a href="#cb413-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(...) <span class="sc">%&gt;%</span></span>
<span id="cb413-7"><a href="#cb413-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb413-8"><a href="#cb413-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fase de análise e agregação</span></span>
<span id="cb413-9"><a href="#cb413-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(...) <span class="sc">%&gt;%</span></span>
<span id="cb413-10"><a href="#cb413-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(...) <span class="sc">%&gt;%</span></span>
<span id="cb413-11"><a href="#cb413-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb413-12"><a href="#cb413-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fase de apresentação em tabela</span></span>
<span id="cb413-13"><a href="#cb413-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(...) <span class="sc">%&gt;%</span></span>
<span id="cb413-14"><a href="#cb413-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(...) <span class="sc">%&gt;%</span></span>
<span id="cb413-15"><a href="#cb413-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(...)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Este fluxo integrado representa as fases 3, 4 e 6 do CRISP-DM.</p>
</div>
</div>
</section>
<section id="resumo" class="level2" data-number="11.6">
<h2 data-number="11.6" class="anchored" data-anchor-id="resumo"><span class="header-section-number">11.6</span> Resumo</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pacote kableExtra
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Para que serve</strong>: Transformar tabelas de dados simples em tabelas profissionais para relatórios, apresentações e publicações.</p></li>
<li><p><strong>Sintaxe básica</strong>:</p></li>
</ol>
<div class="cell" style="font-size: 1em;">
<div class="sourceCode cell-code" id="cb414"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb414-1"><a href="#cb414-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span></span>
<span id="cb414-2"><a href="#cb414-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(...) <span class="sc">%&gt;%</span></span>
<span id="cb414-3"><a href="#cb414-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(...) <span class="sc">%&gt;%</span></span>
<span id="cb414-4"><a href="#cb414-4" aria-hidden="true" tabindex="-1"></a>  ... outras personalizações ...</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li><p><strong>Funções principais</strong>:</p>
<ul>
<li><code>kable()</code>: Converte data frame em tabela base</li>
<li><code>kable_styling()</code>: Aplica estilos gerais à tabela</li>
<li><code>column_spec()</code> e <code>row_spec()</code>: Personalizações específicas</li>
<li><code>footnote()</code>: Adiciona notas de rodapé</li>
</ul></li>
<li><p><strong>Integrações estratégicas</strong>:</p>
<ul>
<li>Ideal no final de pipelines dplyr para apresentar resultados</li>
<li>Complementar aos gráficos do ggplot2 em relatórios</li>
</ul></li>
<li><p><strong>Benefícios em Administração</strong>:</p>
<ul>
<li>Eleva a qualidade visual de relatórios gerenciais</li>
<li>Facilita a comunicação de insights de dados para gestores</li>
<li>Permite destacar KPIs e métricas críticas para tomada de decisão</li>
</ul></li>
</ol>
</div>
</div>
</section>
<section id="tabela-com-o-pacote-kableextra" class="level2" data-number="11.7">
<h2 data-number="11.7" class="anchored" data-anchor-id="tabela-com-o-pacote-kableextra"><span class="header-section-number">11.7</span> Tabela com o Pacote KableExtra</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb415"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb415-1"><a href="#cb415-1" aria-hidden="true" tabindex="-1"></a><span class="co"># inicia com a df contendo o resultado do pipeline</span></span>
<span id="cb415-2"><a href="#cb415-2" aria-hidden="true" tabindex="-1"></a>relatorio_expectativa <span class="sc">%&gt;%</span></span>
<span id="cb415-3"><a href="#cb415-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Converte a df em uma tabela kable (tabela básica HTML/LaTeX)</span></span>
<span id="cb415-4"><a href="#cb415-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(</span>
<span id="cb415-5"><a href="#cb415-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Renomeia as colunas para português</span></span>
<span id="cb415-6"><a href="#cb415-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb415-7"><a href="#cb415-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Continente"</span>, <span class="st">"Expectativa Média"</span>, <span class="st">"Expectativa Mínima"</span>, <span class="st">"Expectativa Máxima"</span></span>
<span id="cb415-8"><a href="#cb415-8" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb415-9"><a href="#cb415-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Formata os números com 1 casa decimal</span></span>
<span id="cb415-10"><a href="#cb415-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">1</span>,</span>
<span id="cb415-11"><a href="#cb415-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># vírgula como separador decimal</span></span>
<span id="cb415-12"><a href="#cb415-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">format.args =</span> <span class="fu">list</span>(<span class="at">decimal.mark =</span> <span class="st">","</span>)</span>
<span id="cb415-13"><a href="#cb415-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb415-14"><a href="#cb415-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Adiciona estilo à tabela para melhorar o visual</span></span>
<span id="cb415-15"><a href="#cb415-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(</span>
<span id="cb415-16"><a href="#cb415-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># tamanho da fonte</span></span>
<span id="cb415-17"><a href="#cb415-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">font_size =</span> <span class="dv">25</span>,</span>
<span id="cb415-18"><a href="#cb415-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Impede que a tabela ocupe toda a largura disponível</span></span>
<span id="cb415-19"><a href="#cb415-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">full_width =</span> <span class="cn">FALSE</span>,</span>
<span id="cb415-20"><a href="#cb415-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># # Centraliza a tabela</span></span>
<span id="cb415-21"><a href="#cb415-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="st">"center"</span></span>
<span id="cb415-22"><a href="#cb415-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb415-23"><a href="#cb415-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Aplica formatação específica à coluna da expectativa média</span></span>
<span id="cb415-24"><a href="#cb415-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(</span>
<span id="cb415-25"><a href="#cb415-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Aplica a formatação à segunda coluna (Expectativa Média)</span></span>
<span id="cb415-26"><a href="#cb415-26" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2</span>,</span>
<span id="cb415-27"><a href="#cb415-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Coloca o texto em negrito para melhor destaque</span></span>
<span id="cb415-28"><a href="#cb415-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">bold =</span> <span class="cn">TRUE</span>,</span>
<span id="cb415-29"><a href="#cb415-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Define a cor dos números como branco</span></span>
<span id="cb415-30"><a href="#cb415-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"white"</span>,</span>
<span id="cb415-31"><a href="#cb415-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Aplica um gradiente de cores ao fundo das células</span></span>
<span id="cb415-32"><a href="#cb415-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">background =</span> <span class="fu">spec_color</span>(</span>
<span id="cb415-33"><a href="#cb415-33" aria-hidden="true" tabindex="-1"></a>      <span class="co"># A expectativa_media determinar a intensidade das cores</span></span>
<span id="cb415-34"><a href="#cb415-34" aria-hidden="true" tabindex="-1"></a>      relatorio_expectativa<span class="sc">$</span>expectativa_media,</span>
<span id="cb415-35"><a href="#cb415-35" aria-hidden="true" tabindex="-1"></a>      <span class="co"># início do gradiente com intensidade alta</span></span>
<span id="cb415-36"><a href="#cb415-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">begin =</span> <span class="fl">0.9</span>,</span>
<span id="cb415-37"><a href="#cb415-37" aria-hidden="true" tabindex="-1"></a>      <span class="co"># fim do gradiente com intensidade baixa</span></span>
<span id="cb415-38"><a href="#cb415-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">end =</span> <span class="fl">0.1</span>,</span>
<span id="cb415-39"><a href="#cb415-39" aria-hidden="true" tabindex="-1"></a>      <span class="co"># paleta de cores "viridis" (azul-verde-amarelo)</span></span>
<span id="cb415-40"><a href="#cb415-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">option =</span> <span class="st">"viridis"</span>,</span>
<span id="cb415-41"><a href="#cb415-41" aria-hidden="true" tabindex="-1"></a>      <span class="co"># 1 = valores mais altos recebem cores mais intensas</span></span>
<span id="cb415-42"><a href="#cb415-42" aria-hidden="true" tabindex="-1"></a>      <span class="at">direction =</span> <span class="dv">1</span></span>
<span id="cb415-43"><a href="#cb415-43" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb415-44"><a href="#cb415-44" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-1" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabela&nbsp;3: Expectativa de Vida (em anos) por Continente (2007)
</figcaption>
<div aria-describedby="tbl-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="lightable-classic do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Continente</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Expectativa Média</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Expectativa Mínima</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Expectativa Máxima</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Oceania</td>
<td style="text-align: right; font-weight: bold; color: white !important; background-color: rgba(72, 37, 118, 255) !important;">80,7</td>
<td style="text-align: right;">80,2</td>
<td style="text-align: right;">81,2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Europe</td>
<td style="text-align: right; font-weight: bold; color: white !important; background-color: rgba(65, 65, 134, 255) !important;">77,6</td>
<td style="text-align: right;">71,8</td>
<td style="text-align: right;">81,8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Americas</td>
<td style="text-align: right; font-weight: bold; color: white !important; background-color: rgba(50, 101, 142, 255) !important;">73,6</td>
<td style="text-align: right;">60,9</td>
<td style="text-align: right;">80,7</td>
</tr>
<tr class="even">
<td style="text-align: left;">Asia</td>
<td style="text-align: right; font-weight: bold; color: white !important; background-color: rgba(41, 122, 142, 255) !important;">70,7</td>
<td style="text-align: right;">43,8</td>
<td style="text-align: right;">82,6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Africa</td>
<td style="text-align: right; font-weight: bold; color: white !important; background-color: rgba(187, 223, 39, 255) !important;">54,8</td>
<td style="text-align: right;">39,6</td>
<td style="text-align: right;">76,4</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="exemplo-típico-em-administração-wide" class="level2" data-number="11.8">
<h2 data-number="11.8" class="anchored" data-anchor-id="exemplo-típico-em-administração-wide"><span class="header-section-number">11.8</span> Exemplo Típico em Administração (Wide)</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Dados de Vendas Mensais por Categoria e Produto
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb416"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb416-1"><a href="#cb416-1" aria-hidden="true" tabindex="-1"></a><span class="co"># formato típico de planilhas gerenciais</span></span>
<span id="cb416-2"><a href="#cb416-2" aria-hidden="true" tabindex="-1"></a>dados_vendas_wide <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb416-3"><a href="#cb416-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>produto, <span class="sc">~</span>categoria, <span class="sc">~</span>Jan, <span class="sc">~</span>Fev, <span class="sc">~</span>Mar, <span class="sc">~</span>Abr, <span class="sc">~</span>Mai, <span class="sc">~</span>Jun,</span>
<span id="cb416-4"><a href="#cb416-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Notebook Pro"</span>, <span class="st">"Eletrônicos"</span>, <span class="dv">45000</span>, <span class="dv">38000</span>, <span class="dv">42000</span>, <span class="dv">47000</span>, <span class="dv">52000</span>, <span class="dv">49000</span>,</span>
<span id="cb416-5"><a href="#cb416-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Smartphone X"</span>, <span class="st">"Eletrônicos"</span>, <span class="dv">38000</span>, <span class="dv">41000</span>, <span class="dv">40000</span>, <span class="dv">39000</span>, <span class="dv">45000</span>, <span class="dv">50000</span>,</span>
<span id="cb416-6"><a href="#cb416-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Monitor 24pol"</span>, <span class="st">"Informática"</span>, <span class="dv">22000</span>, <span class="dv">19000</span>, <span class="dv">23000</span>, <span class="dv">25000</span>, <span class="dv">24000</span>, <span class="dv">26000</span>,</span>
<span id="cb416-7"><a href="#cb416-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Mouse Gamer"</span>, <span class="st">"Informática"</span>, <span class="dv">12000</span>, <span class="dv">14000</span>, <span class="dv">13500</span>, <span class="dv">15000</span>, <span class="dv">16000</span>, <span class="dv">17500</span>,</span>
<span id="cb416-8"><a href="#cb416-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Mesa Office"</span>, <span class="st">"Mobiliário"</span>, <span class="dv">28000</span>, <span class="dv">25000</span>, <span class="dv">24000</span>, <span class="dv">26500</span>, <span class="dv">27000</span>, <span class="dv">29000</span>,</span>
<span id="cb416-9"><a href="#cb416-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Cadeira Ergo"</span>, <span class="st">"Mobiliário"</span>, <span class="dv">35000</span>, <span class="dv">32000</span>, <span class="dv">38000</span>, <span class="dv">36000</span>, <span class="dv">39000</span>, <span class="dv">42000</span></span>
<span id="cb416-10"><a href="#cb416-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb416-11"><a href="#cb416-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb416-12"><a href="#cb416-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizando os dados no formato amplo (wide)</span></span>
<span id="cb416-13"><a href="#cb416-13" aria-hidden="true" tabindex="-1"></a>dados_vendas_wide</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
  produto       categoria     Jan   Fev   Mar   Abr   Mai   Jun
  &lt;chr&gt;         &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Notebook Pro  Eletrônicos 45000 38000 42000 47000 52000 49000
2 Smartphone X  Eletrônicos 38000 41000 40000 39000 45000 50000
3 Monitor 24pol Informática 22000 19000 23000 25000 24000 26000
4 Mouse Gamer   Informática 12000 14000 13500 15000 16000 17500
5 Mesa Office   Mobiliário  28000 25000 24000 26500 27000 29000
6 Cadeira Ergo  Mobiliário  35000 32000 38000 36000 39000 42000</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="transformando-para-analise-de-dados" class="level2" data-number="11.9">
<h2 data-number="11.9" class="anchored" data-anchor-id="transformando-para-analise-de-dados"><span class="header-section-number">11.9</span> Transformando para Analise de Dados</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Aplicando pivot_longer para organizar os dados
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb418"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb418-1"><a href="#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformando os dados para o formato longo (tidy)</span></span>
<span id="cb418-2"><a href="#cb418-2" aria-hidden="true" tabindex="-1"></a>dados_vendas_longo <span class="ot">&lt;-</span> dados_vendas_wide <span class="sc">%&gt;%</span></span>
<span id="cb418-3"><a href="#cb418-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb418-4"><a href="#cb418-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> Jan<span class="sc">:</span>Jun, <span class="co"># colunas que serão transformadas em valores de mes</span></span>
<span id="cb418-5"><a href="#cb418-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"mes"</span>, <span class="co"># nome da nova coluna</span></span>
<span id="cb418-6"><a href="#cb418-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"valor_vendas"</span> <span class="co"># nome de outra nova coluna para as vendas</span></span>
<span id="cb418-7"><a href="#cb418-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb418-8"><a href="#cb418-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb418-9"><a href="#cb418-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizando o resultado</span></span>
<span id="cb418-10"><a href="#cb418-10" aria-hidden="true" tabindex="-1"></a>dados_vendas_longo</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 36 × 4
   produto      categoria   mes   valor_vendas
   &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;        &lt;dbl&gt;
 1 Notebook Pro Eletrônicos Jan          45000
 2 Notebook Pro Eletrônicos Fev          38000
 3 Notebook Pro Eletrônicos Mar          42000
 4 Notebook Pro Eletrônicos Abr          47000
 5 Notebook Pro Eletrônicos Mai          52000
 6 Notebook Pro Eletrônicos Jun          49000
 7 Smartphone X Eletrônicos Jan          38000
 8 Smartphone X Eletrônicos Fev          41000
 9 Smartphone X Eletrônicos Mar          40000
10 Smartphone X Eletrônicos Abr          39000
# ℹ 26 more rows</code></pre>
</div>
</div>
<p><strong>Agora os dados estão organizados para análise</strong>:</p>
<ul>
<li>Cada linha representa uma combinação única de produto, categoria e mês</li>
<li>As vendas mensais estão em uma única coluna (valor_vendas)</li>
<li>A informação do mês está em uma coluna própria (mes)</li>
</ul>
</div>
</div>
</section>
<section id="análise-1---nível-básico" class="level2" data-number="11.10">
<h2 data-number="11.10" class="anchored" data-anchor-id="análise-1---nível-básico"><span class="header-section-number">11.10</span> Análise 1 - Nível Básico</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Análise da Receita Bruta Mensa de Vendas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb420"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb420-1"><a href="#cb420-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pipeline de análise</span></span>
<span id="cb420-2"><a href="#cb420-2" aria-hidden="true" tabindex="-1"></a>receita_bruta_mes <span class="ot">&lt;-</span> dados_vendas_longo <span class="sc">%&gt;%</span></span>
<span id="cb420-3"><a href="#cb420-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(mes) <span class="sc">%&gt;%</span></span>
<span id="cb420-4"><a href="#cb420-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">vendas_total =</span> <span class="fu">sum</span>(valor_vendas)) <span class="sc">%&gt;%</span></span>
<span id="cb420-5"><a href="#cb420-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(vendas_total))</span>
<span id="cb420-6"><a href="#cb420-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb420-7"><a href="#cb420-7" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiza o resultado</span></span>
<span id="cb420-8"><a href="#cb420-8" aria-hidden="true" tabindex="-1"></a>receita_bruta_mes</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  mes   vendas_total
  &lt;chr&gt;        &lt;dbl&gt;
1 Jun         213500
2 Mai         203000
3 Abr         188500
4 Mar         180500
5 Jan         180000
6 Fev         169000</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="análise-2---nível-básico" class="level2" data-number="11.11">
<h2 data-number="11.11" class="anchored" data-anchor-id="análise-2---nível-básico"><span class="header-section-number">11.11</span> Análise 2 - Nível Básico</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Análise das Vendas Mensais de um Produto Específico
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb422"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb422-1"><a href="#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pipeline de análise</span></span>
<span id="cb422-2"><a href="#cb422-2" aria-hidden="true" tabindex="-1"></a>vendas_mensais_notebookpro <span class="ot">&lt;-</span> dados_vendas_longo <span class="sc">%&gt;%</span></span>
<span id="cb422-3"><a href="#cb422-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(produto <span class="sc">==</span> <span class="st">"Notebook Pro"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb422-4"><a href="#cb422-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(produto, mes, valor_vendas) <span class="sc">%&gt;%</span></span>
<span id="cb422-5"><a href="#cb422-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(mes)</span>
<span id="cb422-6"><a href="#cb422-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb422-7"><a href="#cb422-7" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiza o resultado</span></span>
<span id="cb422-8"><a href="#cb422-8" aria-hidden="true" tabindex="-1"></a>vendas_mensais_notebookpro</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  produto      mes   valor_vendas
  &lt;chr&gt;        &lt;chr&gt;        &lt;dbl&gt;
1 Notebook Pro Abr          47000
2 Notebook Pro Fev          38000
3 Notebook Pro Jan          45000
4 Notebook Pro Jun          49000
5 Notebook Pro Mai          52000
6 Notebook Pro Mar          42000</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="análise-3---nível-básico" class="level2" data-number="11.12">
<h2 data-number="11.12" class="anchored" data-anchor-id="análise-3---nível-básico"><span class="header-section-number">11.12</span> Análise 3 - Nível Básico</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Análise das Vendas Totais por Categoria e Mês
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb424"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb424-1"><a href="#cb424-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pipeline de análise</span></span>
<span id="cb424-2"><a href="#cb424-2" aria-hidden="true" tabindex="-1"></a>vendas_totais_categoria_mes <span class="ot">&lt;-</span> dados_vendas_longo <span class="sc">%&gt;%</span></span>
<span id="cb424-3"><a href="#cb424-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(categoria, mes) <span class="sc">%&gt;%</span></span>
<span id="cb424-4"><a href="#cb424-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">vendas_totais =</span> <span class="fu">sum</span>(valor_vendas)) <span class="sc">%&gt;%</span></span>
<span id="cb424-5"><a href="#cb424-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(vendas_totais))</span>
<span id="cb424-6"><a href="#cb424-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb424-7"><a href="#cb424-7" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiza o resultado</span></span>
<span id="cb424-8"><a href="#cb424-8" aria-hidden="true" tabindex="-1"></a>vendas_totais_categoria_mes</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 3
# Groups:   categoria [3]
   categoria   mes   vendas_totais
   &lt;chr&gt;       &lt;chr&gt;         &lt;dbl&gt;
 1 Eletrônicos Jun           99000
 2 Eletrônicos Mai           97000
 3 Eletrônicos Abr           86000
 4 Eletrônicos Jan           83000
 5 Eletrônicos Mar           82000
 6 Eletrônicos Fev           79000
 7 Mobiliário  Jun           71000
 8 Mobiliário  Mai           66000
 9 Mobiliário  Jan           63000
10 Mobiliário  Abr           62500
11 Mobiliário  Mar           62000
12 Mobiliário  Fev           57000
13 Informática Jun           43500
14 Informática Abr           40000
15 Informática Mai           40000
16 Informática Mar           36500
17 Informática Jan           34000
18 Informática Fev           33000</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="análise-4---nível-intermediário" class="level2" data-number="11.13">
<h2 data-number="11.13" class="anchored" data-anchor-id="análise-4---nível-intermediário"><span class="header-section-number">11.13</span> Análise 4 - Nível Intermediário</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Análise do Desempenho mensal por produto
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb426"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb426-1"><a href="#cb426-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pipeline</span></span>
<span id="cb426-2"><a href="#cb426-2" aria-hidden="true" tabindex="-1"></a>desempenho_mensal_produto <span class="ot">&lt;-</span> dados_vendas_longo <span class="sc">%&gt;%</span></span>
<span id="cb426-3"><a href="#cb426-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(produto) <span class="sc">%&gt;%</span></span>
<span id="cb426-4"><a href="#cb426-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb426-5"><a href="#cb426-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">vendas_total =</span> <span class="fu">sum</span>(valor_vendas),</span>
<span id="cb426-6"><a href="#cb426-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">vendas_media =</span> <span class="fu">mean</span>(valor_vendas),</span>
<span id="cb426-7"><a href="#cb426-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">vendas_min =</span> <span class="fu">min</span>(valor_vendas),</span>
<span id="cb426-8"><a href="#cb426-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">vendas_max =</span> <span class="fu">max</span>(valor_vendas)</span>
<span id="cb426-9"><a href="#cb426-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb426-10"><a href="#cb426-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(vendas_total))</span>
<span id="cb426-11"><a href="#cb426-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb426-12"><a href="#cb426-12" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiza o resultado</span></span>
<span id="cb426-13"><a href="#cb426-13" aria-hidden="true" tabindex="-1"></a>desempenho_mensal_produto</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  produto       vendas_total vendas_media vendas_min vendas_max
  &lt;chr&gt;                &lt;dbl&gt;        &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
1 Notebook Pro        273000       45500       38000      52000
2 Smartphone X        253000       42167.      38000      50000
3 Cadeira Ergo        222000       37000       32000      42000
4 Mesa Office         159500       26583.      24000      29000
5 Monitor 24pol       139000       23167.      19000      26000
6 Mouse Gamer          88000       14667.      12000      17500</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="análise-4---tabela-para-apresentação" class="level2" data-number="11.14">
<h2 data-number="11.14" class="anchored" data-anchor-id="análise-4---tabela-para-apresentação"><span class="header-section-number">11.14</span> Análise 4 - Tabela para Apresentação</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb428"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb428-1"><a href="#cb428-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Formata a tabela de desempenho por produto com kableExtra</span></span>
<span id="cb428-2"><a href="#cb428-2" aria-hidden="true" tabindex="-1"></a>desempenho_mensal_produto <span class="sc">%&gt;%</span></span>
<span id="cb428-3"><a href="#cb428-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(</span>
<span id="cb428-4"><a href="#cb428-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Renomeia as colunas para melhor apresentação</span></span>
<span id="cb428-5"><a href="#cb428-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb428-6"><a href="#cb428-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Produto"</span>, </span>
<span id="cb428-7"><a href="#cb428-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Vendas Totais (R$)"</span>, </span>
<span id="cb428-8"><a href="#cb428-8" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Média Mensal (R$)"</span>, </span>
<span id="cb428-9"><a href="#cb428-9" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Venda Mínima (R$)"</span>, </span>
<span id="cb428-10"><a href="#cb428-10" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Venda Máxima (R$)"</span></span>
<span id="cb428-11"><a href="#cb428-11" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb428-12"><a href="#cb428-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Formata números com 2 casas decimais</span></span>
<span id="cb428-13"><a href="#cb428-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span>,</span>
<span id="cb428-14"><a href="#cb428-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Define vírgula como separador decimal e ponto como separador de milhares</span></span>
<span id="cb428-15"><a href="#cb428-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">format.args =</span> <span class="fu">list</span>(<span class="at">decimal.mark =</span> <span class="st">","</span>, <span class="at">big.mark =</span> <span class="st">"."</span>, <span class="at">nsmall =</span> <span class="dv">2</span>)</span>
<span id="cb428-16"><a href="#cb428-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb428-17"><a href="#cb428-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Aplica um estilo clássico e limpo</span></span>
<span id="cb428-18"><a href="#cb428-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic_2</span>(</span>
<span id="cb428-19"><a href="#cb428-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Ajusta o tamanho da fonte</span></span>
<span id="cb428-20"><a href="#cb428-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">font_size =</span> <span class="dv">18</span>,</span>
<span id="cb428-21"><a href="#cb428-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Define largura para se ajustar melhor ao slide</span></span>
<span id="cb428-22"><a href="#cb428-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">full_width =</span> <span class="cn">TRUE</span>,</span>
<span id="cb428-23"><a href="#cb428-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Centraliza a tabela</span></span>
<span id="cb428-24"><a href="#cb428-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="st">"center"</span></span>
<span id="cb428-25"><a href="#cb428-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb428-26"><a href="#cb428-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Destaca as colunas de valores em negrito</span></span>
<span id="cb428-27"><a href="#cb428-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb428-28"><a href="#cb428-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Destaca as 3 primeiras linha da tabela</span></span>
<span id="cb428-29"><a href="#cb428-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">row_spec</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">bold =</span> T, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">background =</span> <span class="st">"#011f4b"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-4" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabela&nbsp;4: Desempenho mensal de Vendas por produto
</figcaption>
<div aria-describedby="tbl-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="lightable-classic-2 do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Produto</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Vendas Totais (R$)</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Média Mensal (R$)</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Venda Mínima (R$)</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Venda Máxima (R$)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: white !important; background-color: rgba(1, 31, 75, 255) !important;">Notebook Pro</td>
<td style="text-align: right; font-weight: bold; font-weight: bold; color: white !important; background-color: rgba(1, 31, 75, 255) !important;">273.000,00</td>
<td style="text-align: right; font-weight: bold; font-weight: bold; color: white !important; background-color: rgba(1, 31, 75, 255) !important;">45.500,00</td>
<td style="text-align: right; font-weight: bold; font-weight: bold; color: white !important; background-color: rgba(1, 31, 75, 255) !important;">38.000,00</td>
<td style="text-align: right; font-weight: bold; font-weight: bold; color: white !important; background-color: rgba(1, 31, 75, 255) !important;">52.000,00</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: white !important; background-color: rgba(1, 31, 75, 255) !important;">Smartphone X</td>
<td style="text-align: right; font-weight: bold; font-weight: bold; color: white !important; background-color: rgba(1, 31, 75, 255) !important;">253.000,00</td>
<td style="text-align: right; font-weight: bold; font-weight: bold; color: white !important; background-color: rgba(1, 31, 75, 255) !important;">42.166,67</td>
<td style="text-align: right; font-weight: bold; font-weight: bold; color: white !important; background-color: rgba(1, 31, 75, 255) !important;">38.000,00</td>
<td style="text-align: right; font-weight: bold; font-weight: bold; color: white !important; background-color: rgba(1, 31, 75, 255) !important;">50.000,00</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: white !important; background-color: rgba(1, 31, 75, 255) !important;">Cadeira Ergo</td>
<td style="text-align: right; font-weight: bold; font-weight: bold; color: white !important; background-color: rgba(1, 31, 75, 255) !important;">222.000,00</td>
<td style="text-align: right; font-weight: bold; font-weight: bold; color: white !important; background-color: rgba(1, 31, 75, 255) !important;">37.000,00</td>
<td style="text-align: right; font-weight: bold; font-weight: bold; color: white !important; background-color: rgba(1, 31, 75, 255) !important;">32.000,00</td>
<td style="text-align: right; font-weight: bold; font-weight: bold; color: white !important; background-color: rgba(1, 31, 75, 255) !important;">42.000,00</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mesa Office</td>
<td style="text-align: right; font-weight: bold;">159.500,00</td>
<td style="text-align: right; font-weight: bold;">26.583,33</td>
<td style="text-align: right; font-weight: bold;">24.000,00</td>
<td style="text-align: right; font-weight: bold;">29.000,00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Monitor 24pol</td>
<td style="text-align: right; font-weight: bold;">139.000,00</td>
<td style="text-align: right; font-weight: bold;">23.166,67</td>
<td style="text-align: right; font-weight: bold;">19.000,00</td>
<td style="text-align: right; font-weight: bold;">26.000,00</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mouse Gamer</td>
<td style="text-align: right; font-weight: bold;">88.000,00</td>
<td style="text-align: right; font-weight: bold;">14.666,67</td>
<td style="text-align: right; font-weight: bold;">12.000,00</td>
<td style="text-align: right; font-weight: bold;">17.500,00</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="análise-5---nível-intermediário" class="level2" data-number="11.15">
<h2 data-number="11.15" class="anchored" data-anchor-id="análise-5---nível-intermediário"><span class="header-section-number">11.15</span> Análise 5 - Nível Intermediário</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Identificando meses de pico de vendas para cada categoria
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb429"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb429-1"><a href="#cb429-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pipeline para identificar mês de melhor desempenho por categoria</span></span>
<span id="cb429-2"><a href="#cb429-2" aria-hidden="true" tabindex="-1"></a>meses_pico_categoria <span class="ot">&lt;-</span> dados_vendas_longo <span class="sc">%&gt;%</span></span>
<span id="cb429-3"><a href="#cb429-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Agrupa por categoria e mês</span></span>
<span id="cb429-4"><a href="#cb429-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(categoria, mes) <span class="sc">%&gt;%</span></span>
<span id="cb429-5"><a href="#cb429-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calcula as vendas totais</span></span>
<span id="cb429-6"><a href="#cb429-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">vendas_totais =</span> <span class="fu">sum</span>(valor_vendas)) <span class="sc">%&gt;%</span></span>
<span id="cb429-7"><a href="#cb429-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filtra para o mês de maior venda</span></span>
<span id="cb429-8"><a href="#cb429-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(vendas_totais <span class="sc">==</span> <span class="fu">max</span>(vendas_totais)) <span class="sc">%&gt;%</span></span>
<span id="cb429-9"><a href="#cb429-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ordena o resultado pelas vendas totais</span></span>
<span id="cb429-10"><a href="#cb429-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(vendas_totais))</span>
<span id="cb429-11"><a href="#cb429-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb429-12"><a href="#cb429-12" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiza o resultado </span></span>
<span id="cb429-13"><a href="#cb429-13" aria-hidden="true" tabindex="-1"></a>meses_pico_categoria</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
# Groups:   categoria [3]
  categoria   mes   vendas_totais
  &lt;chr&gt;       &lt;chr&gt;         &lt;dbl&gt;
1 Eletrônicos Jun           99000
2 Mobiliário  Jun           71000
3 Informática Jun           43500</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="análise-6---nível-intermediário" class="level2" data-number="11.16">
<h2 data-number="11.16" class="anchored" data-anchor-id="análise-6---nível-intermediário"><span class="header-section-number">11.16</span> Análise 6 - Nível Intermediário</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Identificando meses de pior venda para cada categoria
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb431"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb431-1"><a href="#cb431-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pipeline para identificar mês de pior desempenho por categoria</span></span>
<span id="cb431-2"><a href="#cb431-2" aria-hidden="true" tabindex="-1"></a>meses_pior_categoria <span class="ot">&lt;-</span> dados_vendas_longo <span class="sc">%&gt;%</span></span>
<span id="cb431-3"><a href="#cb431-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Agrupa por categoria e mês</span></span>
<span id="cb431-4"><a href="#cb431-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(categoria, mes) <span class="sc">%&gt;%</span></span>
<span id="cb431-5"><a href="#cb431-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calcula as vendas totais</span></span>
<span id="cb431-6"><a href="#cb431-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">vendas_totais =</span> <span class="fu">sum</span>(valor_vendas)) <span class="sc">%&gt;%</span></span>
<span id="cb431-7"><a href="#cb431-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filtra para o mês de menor venda</span></span>
<span id="cb431-8"><a href="#cb431-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(vendas_totais <span class="sc">==</span> <span class="fu">min</span>(vendas_totais)) <span class="sc">%&gt;%</span></span>
<span id="cb431-9"><a href="#cb431-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ordena o resultado pelas vendas totais</span></span>
<span id="cb431-10"><a href="#cb431-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(vendas_totais))</span>
<span id="cb431-11"><a href="#cb431-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb431-12"><a href="#cb431-12" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiza o resultado </span></span>
<span id="cb431-13"><a href="#cb431-13" aria-hidden="true" tabindex="-1"></a>meses_pior_categoria</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
# Groups:   categoria [3]
  categoria   mes   vendas_totais
  &lt;chr&gt;       &lt;chr&gt;         &lt;dbl&gt;
1 Eletrônicos Fev           79000
2 Mobiliário  Fev           57000
3 Informática Fev           33000</code></pre>
</div>
</div>
</div>
</div>
<section id="funções-which.max-e-which.min" class="level3" data-number="11.16.1">
<h3 data-number="11.16.1" class="anchored" data-anchor-id="funções-which.max-e-which.min"><span class="header-section-number">11.16.1</span> Funções which.max() e which.min()</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Localizando posições de valores máximos e mínimos
</div>
</div>
<div class="callout-body-container callout-body">
<p>As funções <code>which.max()</code> e <code>which.min()</code> são extremamente úteis em análise de dados:</p>
<ul>
<li><code>which.max(x)</code>: Retorna a <strong>posição</strong> (índice) do valor máximo no vetor <code>x</code></li>
<li><code>which.min(x)</code>: Retorna a <strong>posição</strong> (índice) do valor mínimo no vetor <code>x</code></li>
</ul>
<p><strong>Exemplo simples:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb433"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb433-1"><a href="#cb433-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vetor de valores</span></span>
<span id="cb433-2"><a href="#cb433-2" aria-hidden="true" tabindex="-1"></a>vendas_mensais <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">120</span>, <span class="dv">150</span>, <span class="dv">140</span>, <span class="dv">160</span>, <span class="dv">110</span>, <span class="dv">130</span>)</span>
<span id="cb433-3"><a href="#cb433-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb433-4"><a href="#cb433-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Qual a posição do valor máximo?</span></span>
<span id="cb433-5"><a href="#cb433-5" aria-hidden="true" tabindex="-1"></a>posicao_max <span class="ot">&lt;-</span> <span class="fu">which.max</span>(vendas_mensais)</span>
<span id="cb433-6"><a href="#cb433-6" aria-hidden="true" tabindex="-1"></a>posicao_max</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb435"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb435-1"><a href="#cb435-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Qual o valor máximo?</span></span>
<span id="cb435-2"><a href="#cb435-2" aria-hidden="true" tabindex="-1"></a>vendas_mensais[posicao_max]</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 160</code></pre>
</div>
<div class="sourceCode cell-code" id="cb437"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb437-1"><a href="#cb437-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Supondo que temos nomes para os meses</span></span>
<span id="cb437-2"><a href="#cb437-2" aria-hidden="true" tabindex="-1"></a>nomes_meses <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Jan"</span>, <span class="st">"Fev"</span>, <span class="st">"Mar"</span>, <span class="st">"Abr"</span>, <span class="st">"Mai"</span>, <span class="st">"Jun"</span>)</span>
<span id="cb437-3"><a href="#cb437-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb437-4"><a href="#cb437-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Em qual mês ocorreu a venda máxima?</span></span>
<span id="cb437-5"><a href="#cb437-5" aria-hidden="true" tabindex="-1"></a>mes_maior_venda <span class="ot">&lt;-</span> nomes_meses[<span class="fu">which.max</span>(vendas_mensais)]</span>
<span id="cb437-6"><a href="#cb437-6" aria-hidden="true" tabindex="-1"></a>mes_maior_venda</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Abr"</code></pre>
</div>
</div>
<p>Estas funções são perfeitas para encontrar <strong>quando</strong> ocorreram eventos importantes nos seus dados (máximos, mínimos, picos) em vez de apenas quais foram os valores.</p>
</div>
</div>
</section>
</section>
<section id="análise-7---nível-avançado" class="level2" data-number="11.17">
<h2 data-number="11.17" class="anchored" data-anchor-id="análise-7---nível-avançado"><span class="header-section-number">11.17</span> Análise 7 - Nível Avançado</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Identificando os Meses de Maior e Menor Venda por Produto
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb439"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb439-1"><a href="#cb439-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pipeline de análise para identificar os meses de pico e vale por produto</span></span>
<span id="cb439-2"><a href="#cb439-2" aria-hidden="true" tabindex="-1"></a>resumo_comparativo_produto <span class="ot">&lt;-</span> dados_vendas_longo <span class="sc">%&gt;%</span></span>
<span id="cb439-3"><a href="#cb439-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Agrupa os dados por produto para analisar cada um separadamente</span></span>
<span id="cb439-4"><a href="#cb439-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(produto) <span class="sc">%&gt;%</span></span>
<span id="cb439-5"><a href="#cb439-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Para cada produto, calculamos:</span></span>
<span id="cb439-6"><a href="#cb439-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb439-7"><a href="#cb439-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 1. Qual o mês da maior venda:</span></span>
<span id="cb439-8"><a href="#cb439-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># - which.max(valor_vendas) encontra a POSIÇÃO da maior venda</span></span>
<span id="cb439-9"><a href="#cb439-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># - mes[which.max(valor_vendas)] seleciona o nome do mês de maior venda</span></span>
<span id="cb439-10"><a href="#cb439-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">melhor_mes =</span> mes[<span class="fu">which.max</span>(valor_vendas)],</span>
<span id="cb439-11"><a href="#cb439-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb439-12"><a href="#cb439-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 2. Qual foi o valor da maior venda</span></span>
<span id="cb439-13"><a href="#cb439-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">maior_venda =</span> <span class="fu">max</span>(valor_vendas),</span>
<span id="cb439-14"><a href="#cb439-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb439-15"><a href="#cb439-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 3. Qual o mês da menor venda (mesma lógica do melhor mês)</span></span>
<span id="cb439-16"><a href="#cb439-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">pior_mes =</span> mes[<span class="fu">which.min</span>(valor_vendas)],</span>
<span id="cb439-17"><a href="#cb439-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb439-18"><a href="#cb439-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4. Qual foi o valor da menor venda</span></span>
<span id="cb439-19"><a href="#cb439-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">menor_venda =</span> <span class="fu">min</span>(valor_vendas)</span>
<span id="cb439-20"><a href="#cb439-20" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb439-21"><a href="#cb439-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb439-22"><a href="#cb439-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualiza o resultado</span></span>
<span id="cb439-23"><a href="#cb439-23" aria-hidden="true" tabindex="-1"></a>resumo_comparativo_produto</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  produto       melhor_mes maior_venda pior_mes menor_venda
  &lt;chr&gt;         &lt;chr&gt;            &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;
1 Cadeira Ergo  Jun              42000 Fev            32000
2 Mesa Office   Jun              29000 Mar            24000
3 Monitor 24pol Jun              26000 Fev            19000
4 Mouse Gamer   Jun              17500 Jan            12000
5 Notebook Pro  Mai              52000 Fev            38000
6 Smartphone X  Jun              50000 Jan            38000</code></pre>
</div>
</div>
<p><strong>Explicação do código:</strong></p>
<ol type="1">
<li><p>Primeiro agrupamos por produto para realizar a análise para cada item</p></li>
<li><p>A função <code>which.max(valor_vendas)</code> retorna a posição (índice) do valor máximo</p></li>
<li><p>Ao usar <code>mes[which.max(valor_vendas)]</code>, extraímos o nome do mês na posição com valor máximo</p></li>
<li><p>Este tipo de análise é essencial para identificar padrões sazonais de produtos</p></li>
</ol>
<p>Este relatório permite identificar rapidamente quais meses foram melhores e piores para cada produto - informação valiosa para planejamento de estoque e promoções.</p>
<p>Assim, esta análise permite otimizar o planejamento de estoque e ações promocionais sazonais.</p>
</div>
</div>
</section>
<section id="análise-7---tabela-para-apresentação" class="level2" data-number="11.18">
<h2 data-number="11.18" class="anchored" data-anchor-id="análise-7---tabela-para-apresentação"><span class="header-section-number">11.18</span> Análise 7 - Tabela para Apresentação</h2>
<div class="cell">
<div id="tbl-7" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabela&nbsp;5: Meses de Maior e Menor Venda por Produto
</figcaption>
<div aria-describedby="tbl-7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class=" lightable-paper" style="font-size: 22px; font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Produto </th>
   <th style="text-align:left;"> Melhor Mês </th>
   <th style="text-align:right;"> Maior Venda (R$) </th>
   <th style="text-align:left;"> Pior Mês </th>
   <th style="text-align:right;"> Menor Venda (R$) </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Cadeira Ergo </td>
   <td style="text-align:left;"> Jun </td>
   <td style="text-align:right;font-weight: bold;"> 42.000,00 </td>
   <td style="text-align:left;"> Fev </td>
   <td style="text-align:right;font-weight: bold;"> 32.000,00 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mesa Office </td>
   <td style="text-align:left;"> Jun </td>
   <td style="text-align:right;font-weight: bold;"> 29.000,00 </td>
   <td style="text-align:left;"> Mar </td>
   <td style="text-align:right;font-weight: bold;"> 24.000,00 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Monitor 24pol </td>
   <td style="text-align:left;"> Jun </td>
   <td style="text-align:right;font-weight: bold;"> 26.000,00 </td>
   <td style="text-align:left;"> Fev </td>
   <td style="text-align:right;font-weight: bold;"> 19.000,00 </td>
  </tr>
  <tr>
   <td style="text-align:left;font-weight: bold;color: white !important;background-color: rgba(215, 38, 30, 255) !important;"> Mouse Gamer </td>
   <td style="text-align:left;font-weight: bold;color: white !important;background-color: rgba(215, 38, 30, 255) !important;"> Jun </td>
   <td style="text-align:right;font-weight: bold;font-weight: bold;color: white !important;background-color: rgba(215, 38, 30, 255) !important;"> 17.500,00 </td>
   <td style="text-align:left;font-weight: bold;color: white !important;background-color: rgba(215, 38, 30, 255) !important;"> Jan </td>
   <td style="text-align:right;font-weight: bold;font-weight: bold;color: white !important;background-color: rgba(215, 38, 30, 255) !important;"> 12.000,00 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Notebook Pro </td>
   <td style="text-align:left;"> Mai </td>
   <td style="text-align:right;font-weight: bold;"> 52.000,00 </td>
   <td style="text-align:left;"> Fev </td>
   <td style="text-align:right;font-weight: bold;"> 38.000,00 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Smartphone X </td>
   <td style="text-align:left;"> Jun </td>
   <td style="text-align:right;font-weight: bold;"> 50.000,00 </td>
   <td style="text-align:left;"> Jan </td>
   <td style="text-align:right;font-weight: bold;"> 38.000,00 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</figure>
</div>
</div>
</section>
<section id="dados-em-seu-ambiente-de-trabalho" class="level2" data-number="11.19">
<h2 data-number="11.19" class="anchored" data-anchor-id="dados-em-seu-ambiente-de-trabalho"><span class="header-section-number">11.19</span> Dados em Seu Ambiente de Trabalho</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflexão
</div>
</div>
<div class="callout-body-container callout-body">
<p>Considere os dados com os quais você já trabalha ou espera trabalhar em sua carreira:</p>
<ol type="1">
<li><p><strong>Que tipos</strong> de dados desorganizados você encontra ou espera encontrar?</p>
<ul>
<li>Relatórios gerenciais?</li>
<li>Planilhas financeiras?</li>
<li>Arquivos de sistemas ERP/CRM?</li>
</ul></li>
<li><p><strong>Como</strong> esses dados poderiam ser melhor organizados para análise?</p>
<ul>
<li>Quais são as verdadeiras “observações” nesses dados?</li>
<li>Quais são as verdadeiras “variáveis”?</li>
</ul></li>
<li><p><strong>Quais insights de negócio</strong> você poderia extrair se esses dados estivessem organizados adequadamente?</p>
<ul>
<li>Padrões temporais?</li>
<li>Comparações entre unidades/produtos/regiões?</li>
<li>Correlações entre diferentes métricas?</li>
</ul></li>
<li><p><strong>Como você aplicaria</strong> o conhecimento desta aula em um exemplo concreto do seu interesse profissional?</p></li>
</ol>
<ul>
<li><strong>Dica para sua carreira</strong>: Manter um repositório pessoal de códigos R para transformações comuns que você encontra no seu trabalho pode economizar horas de trabalho repetitivo no futuro.</li>
</ul>
</div>
</div>



</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">Referências</h2><div id="refs" class="references csl-bib-body" data-entry-spacing="0" role="list">
<div id="ref-broman2018" class="csl-entry" role="listitem">
BROMAN, K. W.; WOO, K. H. <a href="https://doi.org/10.1080/00031305.2017.1375989">Data Organization in Spreadsheets</a>. <strong>The American Statistician</strong>, v. 72, n. 1, p. 2–10, 2018.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copiada");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copiada");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/washingtonsilva\.github\.io");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2023, Washington Santos da Silva</p>
</div>   
    <div class="nav-footer-center">

<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/washingtonsilva">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/washingtonssilva/">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>